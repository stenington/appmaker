<html>
<head>
    <title></title>
</head>
<body>
<polymer-element name="ceci-addform" attributes="resetonsubmit validatecontent dataname datascope" dataname="Items" extends="ceci-element" assetpath="component-addform/">
  <template>
    <style>:host {
  display: block;
  width: 100%;
  box-sizing: border-box;
  background: #EFEFEF;
  padding: 10px;
}

:host h1 {
  font-size: 18px;
  border-bottom: solid 2px #CCC;
  margin-bottom: 10px;
  padding-bottom: 4px;
  text-shadow: 0px 1px 0px white;
}

:host input {
  padding: 5px 3px;
  font-size: 16px;
  box-sizing: border-box;
}

:host input[type=text]{
  width: 90%
}

:host input[type=checkbox]{
  margin-right: 5px;
}

:host label {
  display: block;
}

:host p {
  color: white;
  background: green;
  cursor: pointer;
  padding: 5px 10px;
  display: inline-block;
}

:host .input-wrapper {
  position: relative;
  margin-bottom: 5px;
}

:host input[type=checkbox] {
  margin: 0px;
}

:host .input-wrapper .delete-item {
  display: inline-block;
  background: #BBB;
  -webkit-border-radius: 15px;
  color: white;
  cursor: pointer;
  padding: 3px 7px;
  float: right;
  position: absolute;
  top: calc(50% - 15px);
  right: 0px;
}

:host .button {
  background: green;
  text-align: center;
  padding: 5px 10px;
  color: white;
  cursor: pointer;
  margin: 4px 0;
}

:host #add-input-view {
  background: #DDD;
  border-bottom: solid 1px #BBB;
  padding: 5px;
  padding: 10px;
  -webkit-border-radius: 5px;
  text-align: center;
  margin-bottom: 8px;
}

:host #add-input-view h2 {
  cursor: pointer;
}

:host #add-input-view h2 {
  font-size: 15px;
  margin-bottom: 10px;
  font-weight: normal;
  color: #777;
  line-height: 15px;
}

:host #add-input-view[show=no] h2 {
  margin-bottom: 0;
}

:host #add-input-view[show=no] .input-type {
  display: none;
}

:host .input-type {
  background: #CCC;
  padding: 5px 10px;
  cursor: pointer;
  text-align: center;
  padding: 5px 10px;
  background: #FFF;
  -webkit-border-radius: 4px;
  margin-bottom: 6px;
}

:host .input-type:last-child {
  margin-bottom: 0px;
}

:host .input-types {
  display: block;
}

:host #form-wrapper {
  position: relative;
}

:host #datascope {
  text-align: center;
  padding-bottom: 5px;
}
</style>
    <div id="datascope"></div>
    <div id="add-input-view" show="no">
      <h2 on-click="{{toggleInputMenu}}" id="addInputs">+ Add Inputs</h2>
      <div on-click="{{addInputClick}}" class="input-types">
        <div class="input-type" type="text" id="textInput">Text Input</div>
        <div class="input-type" type="checkbox" id="checkbox">Checkbox</div>
        <div class="input-type" type="range" id="slider">Slider</div>
      </div>
    </div>
    <div id="form-wrapper" class="form"></div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      "thumbnail": "./thumbnail.png",
      "name": "Add Form",
      "description": "Create forms and save data to a database.",
      "broadcasts": {
      },
      "listeners": {
        "saveData": {
          "description": "Submit this form and saves the data a record.",
          "label": "Submit Form"
        },
        "setScope": {
          "description": "Specifies what record to save the data to.",
          "label": "Set Save Scope"
        }
      },
      "attributes": {
        "dataname": {
          "description": "This form will create this item, ie.. 'Cats'",
          "label": "I create...",
          "editable": "text"
        },
        "resetonsubmit": {
          "description": "Clear the form fields after submitting",
          "label": "Reset fields on submit",
          "editable": "boolean"
        },
        "validatecontent": {
          "description": "Prevents the form from submitting without data",
          "label": "Prevent submitting empty form",
          "editable": "boolean"
        }
      }
    }
  </ceci-definition>
  <script>
    Polymer("ceci-addform", {
      ready: function(){
        this.super();
        this.datascope = [];
        var self = this;
        window.addEventListener("CeciAppSaveAs", function(){
          self.saveData();
        });
        this.$.addInputs.innerHTML = this.gettext(this.localName + "/addInputs") || this.$.addInputs.innerHTML;
        this.$.textInput.innerHTML = this.gettext(this.localName + "/textInput") || this.$.textInput.innerHTML;
        this.$.checkbox.innerHTML = this.gettext(this.localName + "/checkbox") || this.$.checkbox.innerHTML;
        this.$.slider.innerHTML = this.gettext(this.localName + "/slider") || this.$.slider.innerHTML;
        this.initialBuildForm = false;
        this.buildForm();
      },
      toggleInputMenu: function(){
        //Toggles the menu at the top of the form used for adding iputs
        var menu = this.shadowRoot.querySelector("#add-input-view");
        var state = menu.getAttribute("show");
        if(state == "yes") {
          menu.setAttribute("show","no");
        } else {
          menu.setAttribute("show","yes");
        }
      },
      setScope : function(e){
        this.datascope = e;
      },
      datascopeChanged : function(){
        var scopeEl = this.shadowRoot.querySelector("#datascope");
        var scopeString = "Adding to ";
        if(this.datascope.length > 0) {
          scopeEl.style.display = "block";
          for(var i = 0; i < this.datascope.length; i++) {
            scopeString = scopeString + this.datascope[i].dataset;
          }
          // scopeEl.innerHTML = scopeString;
        } else {
          scopeEl.style.display = "none";
        }
        scopeEl.style.display = "none";
      },
      addInputClick : function(e){
        var type = e.target.getAttribute("type");
        var inputName = window.prompt(this.gettext(this.localName + "/Name this input") || "Name this input");
        if(inputName){
          this.addInput(type,inputName);
        }
      },
      datanameChanged : function(){
        //handle the case where the dataname is in the process of changing or has changed
        //but doesn't have any input forms yet, so nothing needs to be saved
        this.updateSchema();
      },
      resetForm: function(){
        var fields = this.shadowRoot.querySelectorAll(".form input");
        for (var field in fields) {
          if (fields.hasOwnProperty(field)) {
            var f = fields[field];
            f.value = "";
          }
        }
      },
      _addInputInit: function(type,inputName){
        var self = this;

        var wrapper = document.createElement("div");
        wrapper.classList.add("input-wrapper");

        var input = document.createElement("input");
        input.setAttribute("type",type);
        input.setAttribute("storeName",inputName);

        var label = document.createElement("label");

        var deleteLink = document.createElement("div");
        deleteLink.innerHTML = "X";
        deleteLink.classList.add("delete-item");
        deleteLink.setAttribute("on-click","{{deleteMe}}");
        deleteLink.addEventListener("click",function(e){
          self.deleteItem(e);
        });

        wrapper.appendChild(deleteLink);

        if(type=="checkbox"){
            var labelWrapper = document.createElement("span");
            labelWrapper.innerHTML = inputName;
            label.appendChild(input);
            label.appendChild(labelWrapper);
            wrapper.appendChild(label);
        } else {
            label.innerHTML = inputName;
            wrapper.appendChild(label);
            wrapper.appendChild(input);
        }
        this.shadowRoot.querySelector("#form-wrapper").appendChild(wrapper);
      },
      addInput: function(type,inputName){
        this._addInputInit(type,inputName);
        this.updateSchema();
      },
      enteredView : function(){
        var formWrapper = this.shadowRoot.querySelector("#form-wrapper");
        this.super();
      },
      deleteItem : function(e){
        var item = e.target.parentNode;
        item.parentNode.removeChild(item);
        this.updateSchema();
      },
      buildForm: function(){
        //Builds out the remembered form fields
        var self = this;

        this._checkFirebase(function(ceciApp){
          ceciApp.getFirebaseObject('form-data',"", function(data){
            var db = data || {};

            var fields = db[self.dataname + "_formschema"] || [];
            for (var index in fields) {
              if (fields.hasOwnProperty(index)) {
                var field = fields[index];
                self._addInputInit(field["type"],field["name"]);
              }
            }

            self.initialBuildForm = true;
          });
        });
      },
      _checkFirebase: function(callback){
        var ca = document.querySelector("ceci-app");
        if(!ca){
          var self = this;
          window.addEventListener("CeciDataConnectionLoaded", function(e){
            self.ca = document.querySelector("ceci-app");
            callback(self.ca);
          });
        } else {
          if(ca.firebase){
            callback(ca);
          } else {
            //ceci-app available but firebase not up yet
            window.addEventListener("CeciDataConnectionLoaded", function(e){
              var ca = document.querySelector("ceci-app");
              callback(ca);
            });
          }
        }
      },
      updateSchema : function(){
        if(this.initialBuildForm){
          //Check what inputs there are, and build a schema file of them,
          // so that when the component loads next time, it builds out the correct form
          var schema = [];

          //Builds a schema file based on the fields in the form,
          // should be triggered on load and on add / remove of fields
          var fields = this.shadowRoot.querySelectorAll(".form input");
          for (var field in fields) {
            if (fields.hasOwnProperty(field)) {
              var fieldSchema = {}
              var f = fields[field];
              var name = f.getAttribute("storeName");
              var type = f.getAttribute("type");
              fieldSchema["name"] = name;
              fieldSchema["type"] = type;
              schema.push(fieldSchema);
            }
          }

          // Builds new schema
          var keyname = this.dataname + "_formschema";

          this._checkFirebase(function(ca){
            var that = self;

            ca.getFirebaseObject('form-data',"", function(data){
              var db = data || {};
              db[keyname] = schema;

              var ca = document.querySelector("ceci-app")
              ca.setFirebaseObject('form-data', db);

              //Stoage event!
              var event = new CustomEvent("storage");
              window.dispatchEvent(event);
            });

            // Event! So that data view components know when the schema has changed.
            // Right now the schema depends only on the form inputs?
            // var event = new CustomEvent("formChange");
            // window.dispatchEvent(event);
          });
        }
      },
      saveData : function(){
        var self = this;
        var hasData = true;

        this._checkFirebase(function(ca){
          var that = self;
          ca.getFirebaseObject('form-data',"", function(data){
            var db = data || {};

            var addTo = db;

            for (var i = 0; i < that.datascope.length; i++){
              var scopeItem = that.datascope[i];
              addTo = addTo[scopeItem["dataset"]][scopeItem["index"]];
            }

            if (addTo[that.dataname] === undefined){
              addTo[that.dataname] = [];
            }

            var newData = {};
            var fields = that.shadowRoot.querySelectorAll(".form input");

            for (var field in fields) {
              if (fields.hasOwnProperty(field)) {
                var f = fields[field];
                var name = f.getAttribute("storeName");
                if(f.getAttribute("type") == "checkbox"){
                  var value = f.checked;
                } else {
                  var value = f.value;
                  if(value == ""){
                    hasData = false;
                  }
                }
                newData[name] = value;
              }
            }

            addTo[that.dataname].push(newData);

            if(that.resetonsubmit == "true"){
              that.resetForm();
            }

            if(that.validatecontent == "true" && hasData == false) {

              //Don't submit if
            } else {
              var ca = document.querySelector("ceci-app")
              ca.setFirebaseObject('form-data', db);
              //Stoage event!
              var event = new CustomEvent("storage");
              window.dispatchEvent(event);
            }

          });
        });
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-alternating-gate" attributes="countbeforeswitch" extends="ceci-element" assetpath="component-alternating-gate/">
  <template>
    <style>:host {
  display: block;
  width: 100%;
  padding: 10px;
  background: #555;
  text-align: center;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
}

:host .output-channel {
  padding: 5px 10px;
  background: #999;
  margin: 0 3px;
  display: inline-block;
  border: solid 2px #555;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  border-radius: 2px;
}

:host .next-up {
  background: white;
  border: solid 2px white;
  font-weight: bold;
}
</style>
    <div id="channels"></div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      "tags": ["alternating-gate", "low-level"],
      "thumbnail": "./thumbnail.png",
      "name": "Alternating Gate",
      "description": "Alternates output between set broadcasts from a single input",
      "broadcasts": {
        "A": {
          "label": "Output A",
          "description": "The first broadcast in the rotation.",
          "default": "green"
        },
        "B": {
          "label": "Output B",
          "description": "The second broadcast in the rotation.",
          "default": "yellow"
        },
        "C": {
          "label": "Output C",
          "description": "The third broadcast in the rotation."
        },
        "D": {
          "label": "Output D",
          "description": "The fourth broadcast in the rotation."
        },
        "E": {
          "label": "Output E",
          "description": "The fifth broadcast in the rotation."
        }
      },
      "listeners": {
        "input": {
          "description": "The input that alternates out the broadcasts.",
          "label": "Input",
          "default": true
        }
      },
      "attributes": {
        "countbeforeswitch": {
          "label": "Count Before Switch",
          "description": "How many events to send on each channel before switching",
          "editable": "number",
          "min" : 1
        }
      }
    }
  </ceci-definition>
  <script>
    Polymer('ceci-alternating-gate', {
      nextBroadcast : "",
      ready: function() {
        this.countbeforeswitch = Number(this.countbeforeswitch) || 1;
        this.lastBroadcast = null;
        this.count = 0;
        this.super();
      },
      countbeforeswitch: 1,
      attached : function(){
        var that = this;
        this.addEventListener("channelUpdated",function(){
          this.updateChannels();
          this.updateUI();
        });
        this.updateChannels();
        this.nextBroadcast = this.activeBroadcasts[0];
        this.lastBroadcast = this.activeBroadcasts[0];
        this.updateUI();
        this.super();
      },
      updateUI : function(){
        Array.prototype.forEach.call(this.$.channels.querySelectorAll(".output-channel"), function(c) {
          c.classList.remove("next-up");
        });
        var selected = this.$.channels.querySelector("." + this.nextBroadcast);
        if(selected){
          selected.classList.add("next-up");
        }
      },
      updateChannels: function(){
        var that = this;
        this.activeBroadcasts = [];
        that.$.channels.innerHTML = "";
        Array.prototype.forEach.call(this.querySelectorAll("ceci-broadcast"), function(broadcast) {
          that.activeBroadcasts.push(broadcast.getAttribute("from"));
          var channel = document.createElement("div");
          channel.classList.add("output-channel");
          channel.classList.add(broadcast.getAttribute("from"));
          channel.innerHTML = broadcast.getAttribute("from");
          that.$.channels.appendChild(channel);
        });
      },
      input: function(value) {
        this.broadcast(this.nextBroadcast, value);
        this.count += 1;
        this.count = this.count % this.countbeforeswitch || 0;

        // Only switch broadcaster if we've hit this one {{this.countbeforeswitch}} times
        if (this.count == 0) {
          this.nextBroadcast = this.activeBroadcasts.indexOf(this.lastBroadcast) + 1;
          this.nextBroadcast %= this.activeBroadcasts.length;
          this.nextBroadcast = this.activeBroadcasts[this.nextBroadcast];
          this.lastBroadcast = this.nextBroadcast;
          this.updateUI();
        }
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-audio" attributes="source speed label value tapecolor" extends="ceci-element" label="dogs.wav" source="http://soundjax.com/reddo/21812%5Edog_bark_x.mp3" tapecolor="#2181cb" speed="1.0" assetpath="component-audio/">
  <ceci-definition>
    {
      "tags": ["sound", "audio", "music"],
      "thumbnail": "./thumbnail.png",
      "description": "Plays a sound.",
      "name": "Audio Clip",
      "broadcasts": {},
      "listeners": {
        "play": {
          "description": "Plays the audio clip.",
          "label": "Play",
          "default": true
        }
      },
      "attributes": {
        "source": {
          "label": "Audio source URL",
          "description": "The URL for the sound clip you want to play",
          "editable": "text",
          "listener": true
        },
        "speed": {
          "label": "Audio playback rate",
          "description": "1 for normal speed, 2 for twice speed, -1 for reverse, etc.",
          "editable": "number"
        },
        "label": {
          "label": "Label",
          "description": "Text shown on the button.",
          "editable": "text"
        },
        "tapecolor": {
          "label": "Value",
          "description": "Color of the tape",
          "editable": "color"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host .wrapper {
  cursor: pointer;
  background: orange;
  height: 75px;
  position: relative;
  overflow: hidden;
}

:host .wrapper .label {
  background: white;
  position: absolute;
  top: 8px;
  width: 218px;
  height: 30px;
  left: 45px;
  -webkit-border-radius: 2px;
  border-radius: 2px;
}

:host .wrapper .text {
  position: absolute;
  top: 3px;
  width: 100%;
  height: 30px;
  text-align:center;
  font-size: 18px;
}

:host .wrapper .circles {
  position: absolute;
  bottom: -40px;
  height: 70px;
  width: 230px;
  -webkit-border-radius: 60px;
  border-radius: 60px;
  -webkit-transform: rotate(0deg);
  transform: rotate(0deg);
  left: 40px;
  overflow: hidden;
  background-color: white;
  border-top: solid 5px black;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}

:host .circle {
  background-image: url(/bundles/components/component-audio/images/circle.png);
  background-size: 50px;
  background-repeat: no-repeat;
  background-position: center;
  position: absolute;
  top: 5px;
  background-color: black;
  -webkit-border-radius: 100px;
  border-radius: 100px;
}

@-webkit-keyframes spin {
  0% { -webkit-transform: rotate(0deg);}
  100% { -webkit-transform: rotate(360deg);}
}

@keyframes spin {
  0% { transform: rotate(0deg);}
  100% { transform: rotate(360deg);}
}
:host .left {
  left: -40px;
  top: -45px;
  height: 150px;
  width: 150px;

}

:host .playing .left {
  -webkit-animation: spin linear 1.5s infinite;
  animation: spin linear 1.5s infinite;
}

:host .right {
  right: -20px;
  top: -25px;
  height: 110px;
  width: 110px;
}

:host .playing .right {
    -webkit-animation: spin linear 1.3s infinite;
    animation: spin linear 1.3s infinite;
}

:host audio {
  display: none;
}
</style>
    <div id="wrapper" on-click="{{play}}" class="wrapper">
      <div class="label">
        <div class="text">{{label}}</div>
      </div>
      <div class="circles">
        <div class="circle left"></div>
        <div class="circle right"></div>
      </div>
    </div>
    <audio id="sound" src="component-audio/sounds/snare.mp3" preload="preload"></audio>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-audio', {
      ready: function() {
        this.super();
        var that = this;
        this.$.sound.addEventListener("ended",function(){
          that.stopSound();
        });
      },
      stopSound : function(){
        this.$.wrapper.classList.remove("playing");
      },
      play: function() {
        this.$.wrapper.classList.add("playing");
        this.$.sound.pause();
        this.$.sound.currentTime = 0;
        this.$.sound.play();
      },
      sourceChanged: function(oldValue, newValue) {
        this.$.sound.src = newValue;
      },
      setSpeed: function(channel, value) {
        this.speedChanged(this.$.sound.playbackRate || 1, value);
      },
      tapecolorChanged: function (oldValue, newValue) {
        this.$.wrapper.style.background = newValue;
      },
      speedChanged: function(oldValue, newValue) {
        try  {
          var f = parseFloat(newValue);
          if (f) {
            this.$.sound.playbackRate = parseFloat(newValue);
          }
        } catch (e) {}
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-bool" extends="ceci-element" attributes="checkif" checkif="hello" assetpath="component-boolean/">
  <ceci-definition>
    {
      "name": "Boolean",
      "thumbnail": "./thumbnail.png",
      "description": "Checks if a message matches the condition and broadcasts true or false.",
      "broadcasts": {
        "true": {
          "label": "True",
          "description": "The signal matches the condition.",
          "default" : true
        },
        "false": {
          "label": "False",
          "description": "The signal doesn't match the condition."
        }
      },

      "listeners": {
        "incomingMessage": {
          "description": "Increment the total by the increment value",
          "label": "Incoming Message",
          "default" : true
        }
      },
      "attributes": {
        "checkif": {
          "description": "Check if the incoming signal matches this string.",
          "label": "Check If",
          "editable": "Text",
          "default" : true
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  box-sizing: border-box;
  background: #DDD;
  padding: 5px 10px;
  text-align: center;
}

:host span.checkif {
  display: inline-block;
  background-color: white;
  padding: 4px 5px;
  border-top-left-radius: 5px;
  border-top-right-radius: 5px;
  border-bottom-right-radius: 5px;
  border-bottom-left-radius: 5px;
  border-style: solid;
  border-color: rgb(204, 204, 204);
  border-width: 1px 1px 2px;
}</style>

    <div class="rule">
      Does the signal equal <span class="checkif">"{{checkif}}"</span> ?
    </div>

    <shadow></shadow>
  </template>
  <tags>starter,math</tags>

    <script>
      Polymer("ceci-bool", {
        ready: function() {
          this.super();
        },
        attached : function(){
          this.super();
        },
        incomingMessage : function(e){
          if (e.toLowerCase === this.checkif.toLowerCase) {
            this.broadcast("true", "true");
          }
          else {
            this.broadcast("false", "false");
          }
        }
      });
    </script>
</polymer-element>

<polymer-element name="ceci-button" attributes="textcolor buttoncolor label value" value="Click" extends="ceci-element" label="Click Me" textcolor="#ffffff" buttoncolor="#4DB227" assetpath="component-button/">
  <ceci-definition>
    {
      "tags": ["button", "click", "tap"],
      "thumbnail": "./thumbnail.png",
      "description": "Broadcasts a \"click\" when clicked.",
      "name": "Button",
      "broadcasts": {
        "click": {
          "label": "Click",
          "description": "Occurs when button is clicked.",
          "default": true
        }
      },
      "listeners": {},
      "attributes": {
        "label": {
          "label": "Label",
          "description": "Text shown on the button.",
          "editable": "text",
          "listener": true
        },
        "value": {
          "label": "Value",
          "description": "Value sent by the button.",
          "editable": "text"
        },
        "textcolor": {
          "label": "Text Color",
          "description": "Color of the text on the button's label.",
          "editable": "color"
        },
        "buttoncolor": {
          "label": "Button Color",
          "description": "Background color of the button.",
          "editable": "color",
          "listener": true
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host .button-wrapper {
  position: relative;
}

:host #button {
  font-family: "FiraSans", sans-serif;
  cursor: pointer;
  border-bottom: 2px solid rgba(0,0,0,.1);
  display: block;
  text-align: center;
  padding: 12px 0 10px 0;
  text-overflow: ellipsis;
  overflow: hidden;
  font-weight: 300;
  font-size: 1.8rem;
  line-height: 1.8rem;

}

:host .overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  opacity: 0;
}

:host .active-overlay {
  background: black;
}

:host .hover-overlay {
  background: white;
}

:host .button-wrapper:hover .hover-overlay {
  opacity: .1;
}

:host .button-wrapper:active .active-overlay {
  opacity: .1;
}
:host .button-wrapper:active .hover-overlay {
  opacity: 0;
}




:host .button-wrapper:active #button {
  border-top: solid 2px rgba(0,0,0,.1);
  border-bottom: none;
}

:host button {
  border: none;
}

</style>
    <div class="button-wrapper" on-mousedown="{{click}}">
      <div id="button">{{label}}</div>
      <div class="overlay active-overlay"></div>
      <div class="overlay hover-overlay"></div>
    </div>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-button', {
      ready: function () {
        this.super();
        var that = this;
      },
      click: function () {
        this.broadcast('click', this.getAttribute('value'));
      },
      textcolorChanged: function (oldValue, newValue) {
        this.$.button.style.color = newValue;
      },
      buttoncolorChanged: function (oldValue, newValue) {
        this.$.button.style.backgroundColor = newValue;
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-button-with-confirmation" attributes="textcolor buttoncolor buttonactivecolor label confirmationmessage value" extends="ceci-element" label="Click and Confirm Me" textcolor="#ffffff" buttoncolor="#4DB227" buttonactivecolor="#358915" confirmationmessage="Are you sure?" assetpath="component-button-with-confirmation/">
  <template>
    <style>:host {
  display: block;
  width: 100%;
  height: 50px;
}

:host button {
  font-family: "FiraSans", sans-serif;
  cursor: pointer;
  position: relative;
  text-decoration: none;
  outline: none;
  border-top: 1px solid rgba(255,255,255,.3);
  border-bottom: 2px solid rgba(0,0,0,.2);
  background-color: #4DB227;
  text-align: center;
  display: block;
  padding-top: 5px;
  padding-bottom: 3px;
  text-overflow: ellipsis;
  overflow: hidden;
  border-radius: 0.2rem;
  font-weight: 600;
  font-size: 1.8rem;
  line-height: 3.8rem;
  color: #ffffff;
  width: 100%;
  margin: 0;
}

:host button {
  border: none;
}

</style>
    <button id="button" on-click="{{click}}"></button>
    <shadow></shadow>

  </template>
  <ceci-definition>
    {
      "tags": ["button", "click", "tap"],
      "thumbnail": "./thumbnail.png",
      "name": "Button with Confirmation",
      "description": "A button that asks the user to confirm before broadcasting.",
      "broadcasts": {
        "click": {
          "label": "Click",
          "description": "Occurs when button is clicked.",
          "default": true
        },
        "cancelClick": {
          "label": "Cancel Click",
          "description": "Occurs when button is clicked and the user denies the confirmation message."
        }
      },
      "listeners": {
        "click": {
          "description": "Causes a fake click event to occur.",
          "label": "Click"
        }
      },
      "attributes": {
        "label": {
          "label": "Label",
          "description": "Text shown on the button.",
          "editable": "text",
          "listener": true
        },
         "confirmationmessage": {
          "label": "Confirmation Message",
          "description": "Confirmation message that is displayed to the user before executing action.",
          "editable": "text"
        },
        "value": {
          "label": "Value",
          "description": "Value sent by the button.",
          "editable": "text",
          "listener": true,
          "defaultListener": true
        },
        "textcolor": {
          "label": "Text Color",
          "description": "Color of the text on the button's label.",
          "editable": "color",
          "listener": true
        },
        "buttoncolor": {
          "label": "Button Color",
          "description": "Background color of the button.",
          "editable": "color",
          "listener": true
        },
        "buttonactivecolor": {
          "label": "Button Active Color",
          "description": "Background color of the button while it is being clicked or tapped.",
          "editable": "color",
          "listener": true
        }
      }
    }
  </ceci-definition>
  <script>
    Polymer('ceci-button-with-confirmation', {
      ready: function () {
        this.super();

        var that = this;
        this.$.button.addEventListener('mousedown', function (e) {
          var valueBefore = that.buttoncolor;
          if (that.buttonactivecolor) {
            that.$.button.style.backgroundColor = that.buttonactivecolor;
            window.addEventListener('mouseup', function (e) {
              that.$.button.style.backgroundColor = valueBefore;
            }, false);
          }
        }, false);

        this.confirmationmessage = this.getAttribute('confirmationmessage') || "extra default";
      },
      confirmationmessage: (this.confirmationmessage || "default thingy"),
      click: function () {
        if (window.confirm(this.confirmationmessage)) {
            this.broadcast('click', this.getAttribute('value'));
        } else {
            this.broadcast('cancelClick', this.getAttribute('value'));
        }
      },
      labelChanged: function (oldValue, newValue) {
        this.$.button.innerHTML = newValue;
      },
      textcolorChanged: function (oldValue, newValue) {
          this.$.button.style.color = newValue;
      },
      buttoncolorChanged: function (oldValue, newValue) {
        this.$.button.style.backgroundColor = newValue;
      },
      confirmationmessageChanged: function(oldValue, newValue) {
        this.confirmationmessage = newValue;

      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-camera-button" attributes="textcolor buttoncolor buttonactivecolor label value imageheight imagewidth" extends="ceci-element" label="Enable Camera" textcolor="#ffffff" buttoncolor="#4DB227" buttonactivecolor="#358915" imageheight="160" imagewidth="160" assetpath="component-camera-button/">
  <template>
    <style>:host {
  position: relative;
  display: block;
  width: 100%;
  background: #555;
}

:host .mode-content img {
  width: 80px;
  opacity: .5;
}

/* Pending Mode */

:host .mode-pending .mode-content {
  padding-top: 30px;
}

:host .mode-pending img {
  width: 120px;
}


/* Disabled Mode */

:host .mode-disabled {
  background-position: center 10px;
  background-repeat: no-repeat;
  background-size: 100px;
}

:host .mode-disabled img {
  margin-bottom: 5px;
}

:host .mode-disabled .mode-content {
  padding-top: 30px;
}

:host .mode-disabled img {
  width: 120px;
}

/* File Mode */

:host .mode-file .mode-content {
  padding: 15px 15px 20px 15px;
  min-height: 0;
}

:host .mode-content h2 {
  color: #EEE;
  font-size: 18px;
  padding: 0;
  margin: 0 0 0 0;
}

:host .mode-content p {
  color: #CCC;
  font-size: 16px;
  padding: 0 40px;
  margin: 0 0 20px 0;
}

/* Enabled Mode */

:host .mode-enabled .shutter-bar {
  opacity: 1;
}

/* From File Mode */

:host .mode-file p {
  top: 0;
}

:host .mode {
  text-align: center;
  position: relative;
}

:host .mode-content {
  min-height: 180px;
}

:host  .shutter-bar {
  background: #333;
  padding: 10px 0 12px 0px;
  width: 100%;
  opacity: .2;
  border-top: solid 2px #666;
}

:host .shutter-button {
  margin: 0 auto;
  bottom: 0px;
  background: #DDD;
  height: 35px;
  width: 35px;
  border-radius: 35px;
  background: #4DB227 -webkit-linear-gradient(#DDD,white);
  border: solid 3px #777;
}

:host .mode-enabled .shutter-button {
  cursor: pointer;
}

:host button {
  display: block;
  margin: 0 auto;
  padding: 8px 14px;
  border: 1px solid rgba(0,0,0,.35) ;
  border-bottom: 2px solid rgba(0,0,0,.35);
  border-radius: 0.2rem;
  text-shadow: 0px -1px 0px rgba(0,0,0,.3);
  background: #4DB227 -webkit-linear-gradient(#58c82d,#4DB227);
  color: #ffffff;
  font-family: "FiraSans", sans-serif;
  font-weight: 400;
  font-size: 16px;
  -webkit-border-radius: 3px;
  text-align: center;
  text-decoration: none;
  text-overflow: ellipsis;
  cursor: pointer;
  position: relative;
  outline: rgba(0,0,0,.2) 5px solid;
  overflow: hidden;
  position: realtive;
}

:host button:active {
  background: #4DB227 -webkit-linear-gradient(#4DB227,#58c82d);
  background: #4DB227 -moz-linear-gradient(#4DB227,#58c82d);
  background: #4DB227 linear-gradient(#4DB227,#58c82d);
}

:host #camerainput {
  display: none;
}

:host #videoinput {
  width: 100%;
  display: block;
}

:host #canvasinput {
  display: none;
  height: 200px;
}
</style>

    <div class="mode mode-disabled">
      <div class="mode-content">
        <img src="component-camera-button/images/camera-asleep.png">
        <button id="enable-camera" on-click="{{enableCamera}}">Enable Camera</button>
      </div>
      <div class="shutter-bar">
        <div class="shutter-button"></div>
      </div>
    </div>

    <div class="mode mode-pending">
      <div class="mode-content">
        <img src="component-camera-button/images/arrow-up.png">
        <p>Please allow your device to use your camera.</p>
      </div>
      <div class="shutter-bar">
        <div class="shutter-button"></div>
      </div>
    </div>

    <div class="mode mode-file">
      <div class="mode-content">
        <img src="component-camera-button/images/folder-photo.png">
        <h2>Oops!</h2>
        <p>This device doesn't have a camera but you can...</p>
        <button on-click="{{pickFile}}">Choose an Image File</button>
      </div>
    </div>

    <div class="mode mode-enabled">
      <div class="mode-content">
        <video id="videoinput"></video>
      </div>
      <div class="shutter-bar">
        <div class="shutter-button" on-click="{{takePhoto}}"></div>
      </div>
    </div>

    <canvas id="canvasinput"></canvas>

    <input id="camerainput" type="file" accept="image/*">
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      "tags": ["tap","camera","photo"],
      "thumbnail": "./thumbnail.png",
      "name": "Camera",
      "description": "Takes a picture with your device camera, or uses an image file camera is not available.",
      "broadcasts": {
        "photo": {
          "label": "Photo",
          "description": "Broadcasts the photo image data.",
          "default": true
        }
      },
      "listeners": {}
    }
  </ceci-definition>
  <script>
    Polymer('ceci-camera-button', {
      ready: function () {
        this.super();
        // do we have getMedia available?
        navigator.getMedia = (navigator.getUserMedia ||
          navigator.webkitGetUserMedia ||
          navigator.mozGetUserMedia ||
          navigator.msGetUserMedia);
      },
      attached : function(){
        if (!navigator.getMedia) {
          this.cameraMode("file");
        } else {
          this.cameraMode("disabled");
        }
        this.super();
      },
      cameraMode : function(mode) {
        var modes = this.shadowRoot.querySelectorAll(".mode");
        modes = Array.prototype.slice.call(modes);
        var fn = function(e) {
          e.style.display = "none";
        };
        modes.forEach(fn);
        this.shadowRoot.querySelector(".mode-" + mode).style.display = "block";
      },
      enableCamera: function() {
        if (navigator.getMedia) {

          this.cameraMode("pending");

          this.streaming = false;
          var that = this;
          var video = this.video = this.$.videoinput;
          var cameraPurpose = {
            video: true,
            audio: false
          };

          var streamHandler = function(stream) {
            that.videoStream = stream;
            if (navigator.mozGetUserMedia) {
              video.mozSrcObject = stream;
            } else {
              var vendorURL = window.URL || window.webkitURL;
              video.src = vendorURL.createObjectURL(stream);
            }
            video.play();
          };

          var errorHandler = function(err) {
            console.log("An error occured! " + err);
            that.cameraMode("disabled");
          };

          navigator.getMedia(cameraPurpose, streamHandler, errorHandler);

          video.addEventListener('canplay', function(ev) {

            if (!that.streaming) {
              that.cameraMode("enabled");
              that.streaming = true;
            }
          }, false);
        }
        // end of ready() code
      },

      takePhoto : function(){
        if ("mozActivity" in navigator) {
          return this.ffosClick();
        }

        var that = this;

        if (navigator.getMedia) {
          var canvas = this.$.canvasinput;
          var video = this.$.videoinput;
          var width = parseInt(this.imagewidth,10);
          var height = video.videoHeight / (video.videoWidth/width);
          canvas.width = width;
          canvas.height = height;
          canvas.getContext('2d').drawImage(video, 0, 0, width, height);
          var data = canvas.toDataURL('image/png');
          console.log("broadcasting");
          this.broadcast('photo', data);

          // Stops the video stream and resets camera
          video.src = "";
          this.videoStream.stop();
          this.cameraMode("disabled");
        }
      },
      ffosClick: function() {
        var activity = new MozActivity({
          // Ask for the "pick" activity
          name: "pick",

          // Provide the data required by the filters of the activity
          data: {
            type: ["image/jpeg", "image/png"]
          }
        });

        var that = this;

        activity.onsuccess = function() {
          var data =  window.URL.createObjectURL(this.result.blob);
          console.log("A picture has been retrieved");
          that.broadcast("photo", data);
        };

        activity.onerror = function() {
          console.log(this.error);
        };
      },
      pickFile : function(){
        var that = this;
        function selectImageFile() {
          var reader = new FileReader();
          var file = that.$.camerainput.files[0];

          reader.onloadend = function() {
            console.log("File", reader.result);
            that.broadcast("photo", reader.result);
          };

          if (file) {
            reader.readAsDataURL(file);
          }
        }

        this.$.camerainput.addEventListener("change", selectImageFile, false);
        this.$.camerainput.click();
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-component-canvas" extends="ceci-element" attributes="height pensize readonly imageurl generateonchange" assetpath="component-canvas/">
  <ceci-definition>
    {
      "name": "Canvas",
      "tags": "canvas",
      "thumbnail": "./thumbnail.png",
      "description": "A canvas for drawing and sharing",
      "broadcasts": {
        "imageGenerated": {
          "label": "Image Generated",
          "description": "A portable image URL was generated",
          "default": "green"
        }
      },
      "listeners": {
        "generateImage": {
          "label": "Generate Image",
          "description": "Generates a portable image URL from the drawing"
        },
        "reset": {
          "label": "Reset",
          "description": "Description for reset"
        }
      },
      "attributes": {
        "generateonchange": {
          "label": "Generate on Change",
          "description": "Generate image when canvas is changed",
          "editable": "boolean"
        },
        "pensize": {
          "label": "Pen Size",
          "description": "Width of pen used for drawing",
          "editable": "number",
          "min": 1
        },
        "readonly": {
          "label": "Read Only",
          "description": "Locks/unlocks drawn content",
          "editable": "boolean"
        },
        "height": {
          "label": "Height",
          "description": "Height of canvas",
          "editable": "number"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  position: relative;
  background-color: #fff;
  background-image: linear-gradient(rgba(201, 210, 248, 0.4) .1em, transparent .1em);
  background-size: 100% 1.2em;
}

:host canvas {
  width: 100%;
  height: 100%;
  cursor: none;
}

:host #cursor {
  background: #000;
  position: absolute;
  cursor: none;
  pointer-events: none;
}
</style>
    <canvas id="canvas"></canvas>
    <div id="cursor" hidden="true"></div>
    <shadow></shadow>
  </template>
    <script>
      function getMousePositionOffset(e, canvas) {
        var rect = canvas.getBoundingClientRect();

        if (e.touches) {
          return [e.touches[0].clientX - rect.left, e.touches[0].clientY - rect.top];
        }
        else if (e.offsetX) {
          return [e.offsetX, e.offsetY];
        }
        else {
          // recover from PointerEvents bug... :/
          return [e.clientX - rect.left, e.clientY - rect.top];
        }
      }

      function enableCanvas (canvas, changedCallback) {
        changedCallback = changedCallback || function () {};

        return function (eMouseDown) {
          var canvas = eMouseDown.target;
          var ctx = canvas.getContext('2d');

          var moved = false;

          var canvasRect = canvas.getBoundingClientRect();
          var startPos = getMousePositionOffset(eMouseDown, canvas);

          ctx.beginPath();
          ctx.moveTo(startPos[0], startPos[1]);

          function onCanvasMouseMove (eMouseMove) {
            var movedPos = getMousePositionOffset(eMouseMove, canvas);
            ctx.lineTo(movedPos[0], movedPos[1]);
            ctx.stroke();
            moved = true;
            eMouseMove.preventDefault();
          }

          function onCanvasMouseUp (eMouseUp) {
            canvas.removeEventListener('mousemove', onCanvasMouseMove, false);
            window.removeEventListener('mouseup', onCanvasMouseUp, false);
            canvas.removeEventListener('touchmove', onCanvasMouseMove, false);
            window.removeEventListener('touchend', onCanvasMouseUp, false);

            if (!moved) {
              ctx.lineTo(startPos[0] + ctx.lineWidth, startPos[1] + ctx.lineWidth);
              ctx.stroke();
            }
            ctx.closePath();
            changedCallback();
          }

          canvas.addEventListener('mousemove', onCanvasMouseMove, false);
          window.addEventListener('mouseup', onCanvasMouseUp, false);
          canvas.addEventListener('touchmove', onCanvasMouseMove, false);
          window.addEventListener('touchend', onCanvasMouseUp, false);
        }
      }

      Polymer("ceci-component-canvas", {
        readonly: 'false',
        pensize: 5,
        height: 100,
        generateonchange: 'false',
        heightChanged: function () {
          this.style.height = this.height + 'px';
          this.async(function () {
            var rect = this.getBoundingClientRect();
            this.$.canvas.width = rect.width;
            this.$.canvas.height = rect.height;
          });
        },
        ready: function() {
          this.super();

          var that = this;
          var cursor = this.$.cursor;
          this.$.canvas.addEventListener('mousemove', function (e) {
            var pos = getMousePositionOffset(e, that.$.canvas);
            cursor.style.left = pos[0] + 'px';
            cursor.style.top = pos[1] + 'px';
          }, false);

          this.$.canvas.addEventListener('mouseenter', function (e) {
            cursor.hidden = false;
          }, false);

          this.$.canvas.addEventListener('mouseleave', function (e) {
            cursor.hidden = true;
          }, false);

          if (this.imageurl && this.imageurl.indexOf('data:image/png;base64,') === 0) {
            var img = new Image();
            var canvas = this.$.canvas;
            img.onload = function () {
              canvas.getContext('2d').drawImage(img,0,0);
            };
            img.src = this.imageurl;
          }

          this.readonlyChanged();
          this.pensizeChanged();
        },
        readonlyChanged: function () {
          var that = this;
          if (this.readonly === 'false') {
            this._onCanvasMouseDown = enableCanvas(this.$.canvas, function () {
              that.imageurl = that.$.canvas.toDataURL();
              if (that.generateonchange === 'true') {
                that.broadcast('imageGenerated', that.$.canvas.toDataURL());
              }
            });
            this.$.canvas.addEventListener('mousedown', this._onCanvasMouseDown, false);
            this.$.canvas.addEventListener('touchstart', this._onCanvasMouseDown, false);
          }
          else {
            if (this._onCanvasMouseDown) {
              this.$.canvas.removeEventListener('mousedown', this._onCanvasMouseDown, false);
              this.$.canvas.removeEventListener('touchdown', this._onCanvasMouseDown, false);
            }
          }
        },
        pensizeChanged: function () {
          var size = parseInt(this.pensize);
          this.$.canvas.getContext('2d').lineWidth = parseInt(this.pensize);
          this.$.cursor.style.width = size + 'px';
          this.$.cursor.style.height = size + 'px';
          this.$.cursor.style.marginTop = -(size/2) + 'px';
          this.$.cursor.style.marginLeft = -(size/2) + 'px';
        },
        generateImage: function () {
          this.broadcast('imageGenerated', this.$.canvas.toDataURL());
        },
        attached: function () {
          var rect = this.getBoundingClientRect();
          this.$.canvas.width = rect.width;
          this.$.canvas.height = rect.height;
          this.super();
        },
        reset: function() {
          var c = this.$.canvas;
          c.getContext('2d').clearRect(0, 0, c.width, c.height);
          this.broadcast('reset');
        }
      });
    </script>
</polymer-element>

<polymer-element name="ceci-channel-gate" attributes="" extends="ceci-element" assetpath="component-channel-gate/">
  <template>
    <style>:host {
  display: block;
  width: 100%;
  padding: 10px;
  background: #555;
  text-align: center;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
}

:host .output-channel {
  padding: 5px 10px;
  background: #999;
  margin: 0 3px;
  display: inline-block;
  border: solid 2px #555;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  border-radius: 2px;
  cursor: pointer;
}

:host .output-channel:not(.next-up):hover {
  background: #AAA;
}

:host .next-up {
  background: white;
  border: solid 2px white;
  font-weight: bold;
}
</style>
    <div id="channels"></div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      "tags": ["alternating-gate", "low-level"],
      "thumbnail": "./thumbnail.png",
      "name": "Channel Gate",
      "description": "Chooose which channel to send a signal through.",
      "broadcasts": {
        "A": {
          "label": "Output A",
          "description": "The first broadcast in the rotation.",
          "default": "green"
        },
        "B": {
          "label": "Output B",
          "description": "The second broadcast in the rotation.",
          "default": "yellow"
        },
        "C": {
          "label": "Output C",
          "description": "The third broadcast in the rotation."
        },
        "D": {
          "label": "Output D",
          "description": "The fourth broadcast in the rotation."
        },
        "E": {
          "label": "Output E",
          "description": "The fifth broadcast in the rotation."
        }
      },
      "listeners": {
        "input": {
          "description": "The input that alternates out the broadcasts.",
          "label": "Input",
          "default": true
        }
      },
      "attributes": {}
    }
  </ceci-definition>
  <script>
    Polymer('ceci-channel-gate', {
      nextBroadcast : "",
      ready: function() {
        this.super();
        this.lastBroadcast = null;
      },
      attached : function(){
        var that = this;
        this.addEventListener("channelUpdated",function(){
          this.updateChannels();
          this.updateUI();
        });
        this.updateChannels();
        this.nextBroadcast = this.activeBroadcasts[0];
        this.updateUI();
        this.super();
      },
      updateUI : function(){
        Array.prototype.forEach.call(this.$.channels.querySelectorAll(".output-channel"), function(c) {
          c.classList.remove("next-up");
        });
        var selected = this.$.channels.querySelector("." + this.nextBroadcast);
        if(selected){
          selected.classList.add("next-up");
        }
      },
      channelClick : function(from){
        this.nextBroadcast = from;
        this.updateUI();
      },
      updateChannels: function(){
        var that = this;
        this.activeBroadcasts = [];
        that.$.channels.innerHTML = "";
        Array.prototype.forEach.call(this.querySelectorAll("ceci-broadcast"), function(broadcast) {
          that.activeBroadcasts.push(broadcast.getAttribute("from"));
          var channel = document.createElement("div");
          channel.classList.add("output-channel");
          channel.classList.add(broadcast.getAttribute("from"));
          channel.innerHTML = broadcast.getAttribute("from");
          var from = broadcast.getAttribute("from");
          channel.addEventListener("click",function(){
            that.channelClick(from);
          });
          that.$.channels.appendChild(channel);
        });
      },
      input: function(value) {
        this.broadcast(this.nextBroadcast, value);
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-chart" collectionname="times" extends="ceci-element" attributes="unit increment value collectionname" assetpath="component-chart/">
  <script src="component-chart/vendor/chartjs/Chart.min.js"></script>
  <ceci-definition>
    {
      "name": "Chart",
      "thumbnail": "./thumbnail.png",
      "description": "Charts a collection",
      "tags": ["asdf"],
      "broadcasts": {
      },
      "listeners": {
        "graph": {
          "description": "Graphs available data.",
          "label": "Graph",
          "default": true
        }
      },
      "attributes": {
        "collectionname": {
          "description": "The name of the collection to store the value",
          "label": "Collection Name",
          "editable": "text"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host .wrapper {
  width: 100%;
  min-height: 400px;
}

:host canvas {
  height: 400px;
  width: 100%;
}
</style>
    <div class="wrapper">
      <canvas id="canvas" width="310" height="400"></canvas>
    </div>
    <shadow></shadow>
  </template>
  <tags></tags>
  <script>
    Polymer("ceci-chart", {
      ready: function() {
        this.super();
        var canvas = this.$.canvas;
        var ctx = canvas.getContext('2d');
        this.chart = new Chart(ctx);

        localStorage['hack-collection-times'] = JSON.stringify({
          "6/2/2014":20,
          "6/3/2014":20,
          "6/4/2014":23,
          "6/5/2014":25,
          "6/6/2014":30,
          "6/7/2014":32,
          "6/8/2014":35,
          "6/9/2014":36,
          "6/10/2014":33,
          "6/11/2014":25,
          "6/12/2014":34,
          "6/13/2014":60
        });

        this.graph();

      },
      getData: function() {
        var data = JSON.parse(localStorage['hack-collection-' + this.collectionname]);

        var values = [];
        var keys = Object.keys(data);

        for (var i in keys){
          values.push(data[keys[i]]);
        }

        return {
          labels: keys,
          datasets: [
            {
              fillColor: "rgba(54, 171, 42, .6)",
              strokeColor: "rgba(30, 151, 29, 1.0000)",
              data: values
            }
          ]
        };
      },
      getIntegerScaleParameters: function(data) {
        var maxValue = false;
        for (datasetIndex = 0; datasetIndex < data.datasets.length; ++datasetIndex) {
           var setMax = Math.max.apply(null, data.datasets[datasetIndex].data);
           if (maxValue === false || setMax > maxValue) maxValue = setMax;
        }

        var steps = new Number(maxValue);
        var stepWidth = new Number(1);
        if (maxValue > 10) {
           stepWidth = Math.floor(maxValue / 10);
           steps = Math.ceil(maxValue / stepWidth);
        }
        return { animation: false, scaleOverride: true, scaleSteps: steps, scaleStepWidth: stepWidth, scaleStartValue: 0 };
      },
      graph: function() {
        var data = this.getData();
        this.chart.Line(data, this.getIntegerScaleParameters(data));
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-chat-window" attributes="username room" extends="ceci-element" username="Anonymous" room="Mozilla" assetpath="component-chat-window/">
  <ceci-definition>
    {
      "tags": ["chat", "social"],
      "thumbnail": "./thumbnail.png",
      "description": "Start your own chat room.",
      "name": "Chat Window",
      "broadcasts": {
        "messageposted": {
          "label": "Message posted",
          "description": "Occurs when a message is posted in the chatroom.",
          "default": "green"
        }
      },
      "listeners": {
        "clear": {
          "description": "Clear all messages from the chat room",
          "label": "Clear"
        },
        "sendMessage": {
          "default": true,
          "description": "Send a message to the chat room",
          "label": "Send message"
        }
      },
      "attributes": {
        "username": {
          "description": "A username to send messages as",
          "editable": "text",
          "label": "Username",
          "listener": true
        },
        "room": {
          "description": "A chat room to send messages to",
          "editable": "text",
          "label": "Room",
          "listener": true
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  position: relative;
}

:host header {
  background: #333;
  padding: 1.5rem;
  color: white;
}

:host header h1 {
  text-align: left;
  font-size: 1.6rem;
  color: #DDD;
  font-weight: 400;
}

:host header .room-name-wrapper {
  float: right;
  color: #999;
  font-size: 1.4rem;
}

:host ul {
  margin: 0;
  padding: 1rem 1.5rem;
  list-style-type: none;
  border-top: 1px solid #ccc;
  height: 200px;
  top: 7.5rem;
  bottom: 0;
  left: 1rem;
  right: 1rem;
  overflow-y: auto;
  overflow-x: hidden;
}

:host li {
  font-size: 1.2rem;
  font-family: "FiraSans", sans-serif;
  padding: 0.1rem 0rem;
  color: #777;
}

:host li:last-child {
  border: none;
}
</style>
    <header>
      <h1><span id="chatRoom"></span><span class="room-name-wrapper"><span id="roomName"></span> <span class="room-name">{{room}}</span></span></h1>
    </header>
    <ul id="messages"></ul>
    <shadow></shadow>
  </template>
  <script>
    var defaultAppID = 'appmaker';

    Polymer("ceci-chat-window", {
      "chatRoom": "Chat Room",
      "roomName": "Room:",
      ready: function() {
        this.super();

        this.$.chatRoom.innerHTML = this.gettext("ceci-chat-window/chatRoom") || this.chatRoom;
        this.$.roomName.innerHTML = this.gettext("ceci-chat-window/roomName") || this.roomName;

        if (!window.Firebase) {
          var script = document.createElement("script");
          script.onload = this._connect.bind(this);
          script.src = "https://cdn.firebase.com/v0/firebase.js";
          document.head.appendChild(script);
          return;
        }

        this._db = null;
        this._connect();
      },
      clear: function () {
        this._clear();
      },
      usernameChanged: function(oldValue, newValue) {
        if (oldValue && oldValue != 'null'){
          this._sendMessage(
            oldValue + " " +
            this.gettext("ceci-chat-window/is now known as") + " " +
            newValue
          );
        }
      },
      roomChanged: function(oldValue, newValue) {
        this._connect();
      },
      sendMessage: function(event) {
        this._sendMessage(this.username + ": " + event);
      },
      _clear: function() {
        if (!window.Firebase) {
          return;
        }

        this._db.remove();
      },
      _connect: function() {
        if (!window.Firebase) {
          return;
        }
        if(this.__prevQuery) {
          this.__prevQuery.off("child_added");
          this.__prevQuery.off("child_removed");
        }

        this._db = new Firebase("https://appmaker.firebaseio.com/" + defaultAppID + "/chat-window/" + this.room);

        var query = this._db.limit(20);
        query.on("child_added", function(snapshot) {
          var li = document.createElement("li");
          li.textContent = snapshot.val().message;
          li.setAttribute("id", "chat-message-" + snapshot.name().substr(1));
          this.$.messages.appendChild(li);
          this.broadcast('messageposted', snapshot.val().message);
          this.$.messages.scrollTop = this.$.messages.scrollHeight;
        }.bind(this));
        query.on("child_removed", function(snapshot) {
          var messageElement = document.getElementById("chat-message-" + snapshot.name().substr(1));
          if (messageElement) {
            messageElement.remove();
            this.$.messages.scrollTop = this.$.messages.scrollHeight;
          }
        }.bind(this));
        this.__prevQuery = query;
      },
      _sendMessage: function(msg) {
        if (!window.Firebase) {
          return;
        }

        this._db.push({message: msg});
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-combiner" extends="ceci-element" assetpath="component-combiner/">
  <template>
    <style>:host, :host .combiner {
  display: block;
  width: 100%;
  height: 50px;
}

:host .combiner {
  background-color: black;
}
</style>
    <div class="combiner"></div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      "tags": ["component-combiner", "combiner"],
      "thumbnail": "./thumbnail.png",
      "description": "Messages of any colour sent to this brick .",
      "name": "Combiner",
      "broadcasts": {
        "output": {
          "label": "Output",
          "description": "Repeats input",
          "default": true
        }
      },
      "listeners": {
        "input1": {
          "description": "Input 1",
          "label": "Input 1",
          "default": "green"
        },
        "input2": {
          "description": "Input 2",
          "label": "Input 2",
          "default": "red"
        },
        "input3": {
          "description": "Input 3",
          "label": "Input 3"
        },
        "input4": {
          "description": "Input 4",
          "label": "Input 4"
        },
        "input5": {
          "description": "Input 5",
          "label": "Input 5"
        },
        "input6": {
          "description": "Input 6",
          "label": "Input 6"
        }
      }
    }
  </ceci-definition>
  <script>
    Polymer('ceci-combiner', {
      ready: function () {
        this.super();

        var i = 0;
        while (i++ < Object.keys(this.ceci.listeners).length) {
          this['input' + i] = this.input;
        }
      },
      input: function(val) {
        this.broadcast('output', val);
      }
    });
  </script>
</polymer-element>


<polymer-element name="ceci-counter" extends="ceci-element" attributes="unit increment value" assetpath="component-counter/">
  <ceci-definition>
    {
      "name": "Counter",
      "thumbnail": "./thumbnail.png",
      "description": "Listens for a message and counts",
      "broadcasts": {
        "currentCount": {
          "label": "Current Count",
          "description": "Broadcasts the current count."
        }
      },
      "listeners": {
        "countUp": {
          "description": "Increment the total by the increment value",
          "label": "Count Up!",
          "default" : true
        },
        "countDown": {
          "description": "Decrement the total by the increment value",
          "label": "Count Down"
        },
        "resetCount": {
          "description": "Reset the total to 0.",
          "label": "Reset Count"
        }
      },
      "attributes": {
        "unit": {
          "description": "Name for items which are being counted.",
          "label": "Unit",
          "editable": "text"
        },
        "increment": {
          "description": "Count up or down with this number.",
          "label": "Increment By",
          "editable": "number",
          "min" : 1
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host .counter {
  text-align: center;
  font-size: 16px;
  padding: 8px 0px;
  background: #DDD;
  color: #666;
}

:host .counter .count-wrapper {
  display: inline-block;
  background: white;
  padding: 5px 12px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
  border: solid 1px #CCC;
  border-width: 1px 1px 2px 1px;
}
</style>
    <div class="counter">
      <div class="count-wrapper">
        <span class="count">{{value}}</span>
        <span class="count-label">{{displayUnit}}</span>
      </div>
    </div>
    <shadow></shadow>
  </template>
  <tags>starter,math</tags>
    <script>
      Polymer("ceci-counter", {
        ready: function() {
          this.increment = Number(this.increment) || 1;
          this.value = Number(this.value) || 0;
          this.super();
          this.displayUnit = this.unit;
          this.updateUnit();
        },
        value: 0,
        increment: 1,
        unit: 'Sprocket',
        incrementChanged: function(oldValue, newValue) {
          this.increment = Number(this.increment) || 0;
        },
        updateUnit : function(){
          if (this.unit) {
            var unit = this.unit.trim();
            if (unit.length > 0) {

              var pluralChar = "";
              if((Number(this.value) !== 1) && (unit[unit.length - 1] !== 's')){
                pluralChar = "s";
              }

              if(unit[unit.length - 1] === unit[unit.length - 1].toUpperCase()) {
                pluralChar = pluralChar.toUpperCase()
              }
              this.displayUnit = " " + unit + pluralChar;
            }
          }
        },
        unitChanged: function() {
          this.updateUnit();
        },
        valueChanged: function() {
          this.broadcast("currentCount", this.value);
          this.updateUnit();
        },
        countUp: function() {
          this.value = Number(this.value) + Number(this.increment, 10);
        },
        countDown: function() {
          this.value = Number(this.value) - Number(this.increment, 10);
        },
        resetCount: function() {
          this.value = 0;
        }
      });
    </script>
</polymer-element>

<polymer-element name="ceci-cowbell" attributes="bellcolor backgroundcolor" bellcolor="#FFFFFF" backgroundcolor="#4DB227" extends="ceci-element" assetpath="component-cowbell/">
  <ceci-definition>
    {
      "tags": ["button", "click", "tap"],
      "thumbnail": "./thumbnail.png",
      "description": "Broadcasts a \"click\" when clicked.",
      "name": "Cowbell",
      "broadcasts": {},
      "listeners": {
        "kick": {
          "description": "Hits the cowbell!",
          "label": "More",
          "default": true
        }
      },
      "attributes": {
        "backgroundcolor": {
          "label": "Background Color",
          "editable": "color"
        },
        "bellcolor": {
          "label": "Cowbell Color",
          "description": "Color of the drum.",
          "editable": "color"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  background: orange;
}

:host #wrapper {
  height: 75px;
  display: block;
  cursor: pointer;
  overflow: hidden;
  width: 100%;
  position: relative;
}

:host #bell {
  position: absolute;
  left: calc(50% - 75px);
  width: 50px;
  top: -20px;
  border-bottom: 100px solid white;
  border-left: 50px solid transparent;
  border-right: 50px solid transparent;
}

:host .hit #bell {
  -webkit-transform: scale(1.2);
  -moz-transform: scale(1.2);
  transform: scale(1.2);
}

:host audio {
  display: none;
}
</style>
    <div id="wrapper" class="off" on-mousedown="{{kickon}}" on-mouseup="{{kickoff}}">
      <div id="bell"></div>
    </div>
    <audio id="kicksound" src="component-cowbell/sounds/sound.mp3" preload="preload"></audio>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-cowbell', {
      ready: function () {
        this.super();
        var that = this;
      },
      kickon: function () {
        this.$.kicksound.pause();
        this.$.kicksound.currentTime = 0;
        this.$.kicksound.play();
        this.$.wrapper.classList.add("hit");
      },
      kick : function(){
        this.kickon();
        var that = this;
        window.setTimeout(function(){
          that.kickoff();
        },100)
      },
      kickoff : function(){
        this.$.wrapper.classList.remove("hit");
      },
      snare: function () {
        this.$.snare.pause();
        this.$.snare.currentTime = 0;
        this.$.snare.play();
      },
      backgroundcolorChanged: function (oldValue, newValue) {
        this.$.wrapper.style.background = newValue;
      },
      bellcolorChanged: function (oldValue, newValue) {
        this.$.bell.style.borderBottom = "solid 100px " + newValue;
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-daily-counter" collectionname="times" extends="ceci-element" attributes="unit increment collectionname" assetpath="component-daily-counter/">
  <ceci-definition>
    {
      "name": "Daily Counter",
      "thumbnail": "./thumbnail.png",
      "description": "Listens for a message and counts",
      "broadcasts": {
        "currentCount": {
          "label": "Current Count",
          "description": "Broadcasts the current count."
        }
      },
      "listeners": {
        "countUp": {
          "description": "Increment the total by the increment value",
          "label": "Count Up!",
          "default" : false
        },
        "countDown": {
          "description": "Decrement the total by the increment value",
          "label": "Count Down"
        },
        "resetCount": {
          "description": "Reset the total to 0.",
          "label": "Reset Count"
        }
      },
      "attributes": {
        "unit": {
          "description": "Name for items which are being counted.",
          "label": "Unit",
          "editable": "text"
        },
        "collectionname": {
          "description": "The name of the collection to store the value",
          "label": "Collection Name",
          "editable": "text"
        },
        "increment": {
          "description": "Count up or down with this number.",
          "label": "Increment By",
          "editable": "number",
          "min" : 1
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  background: #DDD;
  text-align: center;
  padding: 5px ;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}

:host .timer {
  text-align: center;
  font-size: 16px;
  padding: 5px 0;
}

:host .counter {
  font-size: 16px;
  color: #666;
  margin: 5px auto;
  text-align: center;
  padding: 10px 12px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
  border: 1px #CCC solid;
  border-bottom-width: 2px;
  background: white;
  display: inline-block;
  font-weight: bold;
}
</style>
      <div class="timer">
        <span>{{dayCountDown}}</span>
        <span class="label">left Today</span>
      </div>
      <div class="counter">
        <span>{{value}}</span>
        <span class="label">{{displayUnit}}</span>
      </div>
    <shadow></shadow>
  </template>
  <tags></tags>
  <script>
    Polymer("ceci-daily-counter", {
      ready: function() {
        this.dayCountDown = '00:00';
        this.increment = Number(this.increment) || 1;
        this.value = this.getTodaysValue() || 0;
        this.displayUnit = this.unit;
        this.updateUnit();
        var t = this;
        this.countdownInterval = setInterval(function(){
          t.updateCountdown();
        }, 2000);
        t.updateCountdown();
        this.super();
      },
      value: 0,
      increment: 1,
      unit: 'Times',
      updateCountdown: function(){
        function minutesUntilMidnight() {
          var midnight = new Date();
          midnight.setHours(24);
          midnight.setMinutes(0);
          midnight.setSeconds(0);

          var hours = Math.floor(
            (midnight.getTime() - new Date().getTime()) / 1000 / 60 / 60
          );

          if (hours < 10) {
            hours = "0" + hours;
          }

          var minutes = Math.ceil(
            (midnight.getTime() - new Date().getTime()) / 1000 / 60 % 60
          );

          if (minutes < 10) {
            minutes = "0" + minutes;
          }

          return [hours, minutes].join(":");
        }

        this.dayCountDown = minutesUntilMidnight();
      },
      incrementChanged: function(oldValue, newValue) {
        this.increment = Number(this.increment) || 0;
      },
      updateUnit : function(){
        if (this.unit) {
          var unit = this.unit.trim();
          if (unit.length > 0) {

            var pluralChar = "";
            if((Number(this.value) !== 1) && (unit[unit.length - 1] !== 's')){
              pluralChar = "s";
            }

            if(unit[unit.length - 1] === unit[unit.length - 1].toUpperCase()) {
              pluralChar = pluralChar.toUpperCase()
            }
            this.displayUnit = " " + unit + pluralChar;
          }
        }
      },
      unitChanged: function() {
        this.updateUnit();
      },
      getTodaysValue: function(){
        var collection = localStorage['hack-collection-' + this.collectionname];

        // This will go away when collections are redone
        if (!collection){
          localStorage['hack-collection-' + this.collectionname] = JSON.stringify({});
        }

        var data = JSON.parse(localStorage['hack-collection-' + this.collectionname]);

        return data[new Date().toLocaleDateString()];
      },
      storeValue: function(val) {
        var collection = localStorage['hack-collection-' + this.collectionname];

        // This will go away when collections are redone
        if (!collection){
          localStorage['hack-collection-' + this.collectionname] = JSON.stringify({});
        }

        var data = JSON.parse(localStorage['hack-collection-' + this.collectionname]);

        data[new Date().toLocaleDateString()] = val;
        localStorage['hack-collection-' + this.collectionname] = JSON.stringify(data);
      },
      valueChanged: function() {
        this.broadcast("currentCount", this.value);
        this.storeValue(this.value);
        this.updateUnit();
      },
      countUp: function() {
        this.value = Number(this.value) + Number(this.increment, 10);
      },
      countDown: function() {
        this.value = Number(this.value) - Number(this.increment, 10);
      },
      resetCount: function() {
        this.value = 0;
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-dataview" showdelete="true" showedit="true" attributes="showaddtoitem listschema showkey dataname datascope showedit showdelete" dataname="Items" extends="ceci-element" assetpath="component-dataview/">
  <template>
    <style>:host {
  display: block;
  width: 100%;
  box-sizing: border-box;
  padding: 10px;
  background: #EFEFEF;
  border-bottom: solid 3px #BBB;
}

:host h1 {
  font-size: 18px;
  border-bottom: solid 2px #CCC;
  margin-bottom: 10px;
  padding-bottom: 4px;
  text-shadow: 0px 1px 0px white;
}

:host .counter {
  line-height: 3.8rem;
  text-align: center;
  font-size: 1.6rem;
  font-family: "FiraSans", sans-serif;
  padding: .5rem 0rem;
  background: #0Da;
  color: #666;
}

:host #keys-wrapper h2 {
  color: #777;
  cursor: pointer;
  font-size: 15px;
  font-weight: normal;
  text-align: center;
  margin: 0;
}

:host #keys[show=no]{
  display: none;
}

:host #keys-wrapper {
  background: #DDD;
  -webkit-border-radius: 5px;
  border-bottom: solid 1px #BBB;
  padding: 5px 0 3px 0px;
  font-size: 15px;
  border-bottom: solid 1px #BBB;
}

:host #items {
  margin-top: 10px;
  text-align: center;
}

:host .keyConfig {
  margin: 0 0 2px 0;
  text-align: center;
  color: #777;
  font-size: 15px;
}

:host input {
  display: block;
  padding: 5px;
}

:host .dataGroup {
  padding: 5px 0;
  border: solid 1px #DDD;
  margin-bottom: 5px;
  background: white;
  padding: 5px;
  -webkit-border-radius: 3px;
}

:host .dataGroup .dataItem {
  padding: 5px 0;
  border-bottom: solid 1px #EFEFEF;
  font-size: 16px;
}

:host .dataGroup .dataItem:only-child {
  border: none;
}

:host .dataGroup img {
  max-width: 100%;
  display: block;
  margin: 0 auto;
  margin-bottom: 5px;
  box-shadow: 0 1px 3px rgba(0,0,0,.25);
}

:host .deleteItem, :host .editItem, :host .addToItem {
  display: inline-block;
  padding: 4px 10px !important;
  background: #BBB;
  color: white;
  margin: 8px 0px 3px 0px;
  margin-right: 5px;
  cursor: pointer;
  -webkit-border-radius: 3px;
}

:host .editItem {
  background: #358CCE;
}

:host .deleteItem {
  background: #999;
}

:host .addToItem {
  background: #84c147;
}

:host #datascope {
  text-align: center;
  padding-bottom: 5px;
}
</style>
    <div id="datascope"></div>
    <div id="keys-wrapper">
      <h2 on-click="{{toggleKeyConfig}}" id="configureView">Configure View</h2>
      <div id="keys" show="no"></div>
    </div>
    <div id="items"></div>
    <shadow></shadow>
    <script type="text/json" id="ceci-definition">

    </script>
  </template>
  <ceci-definition>
    {
      "thumbnail": "./thumbnail.png",
      "description": "Display any data you have created using forms made with addform component.",
      "broadcasts": {
        "editItem": {
          "label": "Send Item",
          "description": "Broadcasts a reference to the record when the 'Edit' button is tapped."
        },
        "addToItem": {
          "description": "Broadcasts a reference to the record when the 'Add to' button is tapped.",
          "label": "Add to Item"
        },
        "sendItem": {
          "description": "Broadcasts a reference to the record when it is tapped.",
          "label": "View Item"
        }
      },
      "listeners": {
        "showItem": {
          "description": "Shows the data for this record.",
          "label": "Show item"
        }
      },
      "attributes": {
        "dataname": {
          "description": "Will try to show this kind of item in the saved data, i.e. 'Cats'",
          "label": "I show...",
          "editable": "text"
        },
        "showdelete": {
          "description": "Hides or shows the delete icon for each record.",
          "label": "Show Delete Link",
          "editable": "boolean"
        },
        "showedit": {
          "description": "Show 'Edit' button",
          "label": "Hides or shows the Edit button for each record.",
          "editable": "boolean"
        },
        "showaddtoitem": {
          "description": "Show 'Add To' Button",
          "label": "Hides or shows the 'Add to This' button",
          "editable": "boolean"
        }
      }
    }
  </ceci-definition>
  <tags>data</tags>
  <script>
    Polymer("ceci-dataview", {
      keyConfig: {},
      storedData: {},
      dataChangedEvent: new CustomEvent("storage"),
      ready: function(){
        this.super();
        this.datascope = [];
        this.$.configureView.innerHTML = this.gettext(this.localName + "/configureView") || this.$.configureView.innerHTML;
      },
      toggleKeyConfig: function(){
        var keysEl = this.shadowRoot.querySelector("#keys");
        if(keysEl.getAttribute("show") == "no") {
          keysEl.setAttribute("show","yes");
        } else {
          keysEl.setAttribute("show","no");
        }
      },
      showdeleteChanged: function(oldValue,newValue){
        this.showData();
      },
      showaddtoitemChanged: function(oldValue,newValue){
        this.showData();
      },
      showeditChanged: function(oldValue,newValue){
        this.showData();
      },
      datanameChanged: function (oldValue, newValue) {
        this.updateKeyUI();
        this.showData();
      },
      showItem: function(e){
        this.datascope = e;
      },
      datascopeChanged: function(){
        // If we want to indicate the scope of the data that is shown, there is where we'd do it.
        // var scopeEl = this.shadowRoot.querySelector("#datascope");
        this.updateKeyUI();
        this.showData();
      },
      deleteItem: function(id){
        var self = this;
        var ca = document.querySelector("ceci-app");
        if(!ca){
          window.addEventListener("CeciDataConnectionLoaded", function(){
            self._deleteItemFirebase(id);
          });
        }
        else {
          if(ca.firebase){
            this._deleteItemFirebase(id);
          }
        }
      },
      _deleteItemFirebase: function(id){
        var self = this;
        var ca = document.querySelector("ceci-app")
        ca.getFirebaseObject('form-data', "", function(data){
          self.storedData = data || {};
          for (var i = 0; i < self.datascope.length; i++){
            var scopeItem = self.datascope[i];
            self.storedData = self.storedData[scopeItem["dataset"]][scopeItem["index"]];
          }
          self.storedData = self.storedData[self.dataname] || [];
          self.storedData.splice(id, 1);
          ca.setFirebaseObject('form-data', data);
          window.dispatchEvent(self.dataChangedEvent);
        });
      },
      updateKeyUI: function(){
        var self = this;
        var ca = document.querySelector("ceci-app");
        if(!ca){
          window.addEventListener("CeciDataConnectionLoaded", function(){
            self._updateKeyUIFirebase();
          })
        }
        else {
          if(ca.firebase){
            this._updateKeyUIFirebase();
          }
          else {
            window.addEventListener("CeciDataConnectionLoaded", function(){
              self._updateKeyUIFirebase();
            });
          }
        }
      },
      _updateKeyUIFirebase : function(){

        //This builds the UI that lets you choose how each key in the data set is displayed!
        var self = this;

        document.querySelector("ceci-app").getFirebaseObject('form-data',"", function(data){

          // Clears out the old UI
          self.shadowRoot.querySelector("#keys").innerHTML = "";

          // Tries to grab the stored Data
          var db = data || {};
          self.storedData = db[self.dataname] || [];

          // Tries to grab it's own keyConfig (which tells it how to render each Key field)
          self.keyConfig = JSON.parse(self.listschema) || {};

          // Grabs the schema from the form
          var formSchema = db[self.dataname + "_formschema"] || {};

          // Builds a list of all the keys from the form and data set
          // To know what to display options for.
          var keylist = [];
          for (var i = 0; i < self.storedData.length; i++){
            var item = self.storedData[i];
            for (var key in item) {
              if(keylist.indexOf(key) < 0) {
                keylist.push(key);
              }
            }
          }

          for (var j = 0; j < formSchema.length; j++){
            var item = formSchema[j];
            if(keylist.indexOf(item["name"]) < 0 ){
              keylist.push(item["name"]);
            }
          }

          for (var k = 0; k < keylist.length; k++){
            var key = keylist[k];
            if(!self.keyConfig[key]) {
              self.keyConfig[key] = "text";
            }
          }

          // CLean up the keyConfig file
          // Removes everything in the keyConfig that isn't in the keylist anymore.
          for (var key in self.keyConfig){
            if(keylist.indexOf(key) < 0) {
              delete self.keyConfig[key];
            }
          }

          // We should also clean up the key config.
          // we should also get rid of keys that are no longer needed from keyConfig
          // Like if something is NOT in the keylist, then dump it

          // Have a way to choose how each key is displayed

          for (var j = 0; j < keylist.length; j ++){
            var keyConfig = document.createElement("div");
            keyConfig.classList.add("keyConfig");
            keyConfig.innerHTML = "Show <strong>" + keylist[j] + "</strong> as ";

            var select =  document.createElement("select");
            keyConfig.appendChild(select);

            select.setAttribute("key",keylist[j]);
            select.innerHTML = "<option value='text'>text</option><option value='image'>image</option><option value='hide'>hide</option>";
            select.value = self.keyConfig[keylist[j]];

            select.addEventListener("change",function(e){
              self.keyConfig[e.target.getAttribute("key")] = e.target.value;
              self.showData();
              self.listschema = JSON.stringify(self.keyConfig);
            });
            self.shadowRoot.querySelector("#keys").appendChild(keyConfig);
          }

          //Put the list schema into the db
          db[self.dataname + "_listSchema"] = self.keyConfig;
          document.querySelector("ceci-app").setFirebaseObject('form-data', db);
          self.showData();
        });
      },
      enteredView : function(){
        var self = this;

        //Listens to updates to the data set
        window.addEventListener('storage', this.showData.bind(this), false);
        window.addEventListener('storage', this.updateKeyUI.bind(this), false);
        window.addEventListener('formChange', this.updateKeyUI.bind(this), false);

        this.updateKeyUI();

        //Show exising data
        this.showData();
        this.super();
      },
      getOrWaitForCeciApp: function(callback){
        var ceciApp = document.querySelector("ceci-app");
        if(!ceciApp){
          window.addEventListener("CeciDataConnectionLoaded", function(){
            callback(document.querySelector("ceci-app"));
          });
        } else {
          if(ceciApp && ceciApp.firebase){
            callback(ceciApp);
          } else {
            window.addEventListener("CeciDataConnectionLoaded", function(){
              callback(document.querySelector("ceci-app"));
            });
          }
        }
      },
      showData: function(){
        var self = this;
        this.getOrWaitForCeciApp(function(ceciApp){
          var that = self;
          ceciApp.getFirebaseObject('form-data', "", function(data){
          var those = that;
          those.storedData = data || {};

          //handle case where dataview is just loading and listSchema hasn't been parsed and
          //stored in keyConfig
          if(those.keyConfig && Object.getOwnPropertyNames(those.keyConfig).length < 1){
            those.keyConfig = those.storedData[those.dataname+"_listSchema"];
          }

          var lastData;
          for (var i = 0; i < those.datascope.length; i++){
            var scopeItem = those.datascope[i];
            self.storedData = those.storedData[scopeItem["dataset"]][scopeItem["index"]];
            lastData = scopeItem["dataset"];
          }

          if (lastData == those.dataname){
            var blam = [];
            blam.push(those.storedData);
            those.storedData = blam;
          }
          else {
            those.storedData = those.storedData[those.dataname] || [];
          }

          var itemList = those.shadowRoot.querySelector("#items");
          itemList.innerHTML = "";

          for(var i = 0; i < those.storedData.length; i++){
            var item = those.storedData[i];
            var itemEl = document.createElement("div");
            itemEl.classList.add("dataGroup");

            for (var key in item) {
              var displayType = those.keyConfig[key];
              var dataItem;

              if (displayType == "text") {
                dataItem = document.createElement("div");

                if (typeof item[key] == "object"){
                  dataItem.innerHTML = "List of " + item[key].length + " " + key;
                }
                else {
                  dataItem.innerHTML = item[key];
                }
              }
              else if (displayType == "image") {
                dataItem = document.createElement("img");
                dataItem.setAttribute("src", item[key]);
              }
              else {
                dataItem = document.createElement("div");
              }

              dataItem.classList.add("dataItem");

              var these = those;
              dataItem.addEventListener("click",function(e){
                var nodeList = Array.prototype.slice.call(e.currentTarget.parentNode.parentNode.children);
                var index = nodeList.indexOf(e.currentTarget.parentNode);
                var sendScope = JSON.parse(JSON.stringify(that.datascope));
                var scopeItem = {};
                scopeItem["dataset"] = these.dataname;
                scopeItem["index"] = index;
                sendScope.push(scopeItem);
                these.broadcast('sendItem', sendScope);
              });

              if(displayType != "hide") {
                itemEl.appendChild(dataItem);
              }
            }

            if(self.showedit == "true"){
              var editItem = document.createElement("div");
              editItem.innerHTML = "Edit";
              editItem.classList.add("editItem");
              itemEl.appendChild(editItem);
              editItem.addEventListener("click",function(e){
                var nodeList = Array.prototype.slice.call(e.currentTarget.parentNode.parentNode.children);
                var index = nodeList.indexOf( e.currentTarget.parentNode );
                var sendScope = JSON.parse(JSON.stringify(that.datascope));
                var scopeItem = {};
                scopeItem["dataset"] = these.dataname;
                scopeItem["index"] = index;
                sendScope.push(scopeItem);
                these.broadcast('editItem', sendScope);
              });
            }

            if(these.showaddtoitem == "true"){
              var el = document.createElement("div");
              el.innerHTML = "Add to self";
              el.classList.add("addToItem");
              itemEl.appendChild(el);
              el.addEventListener("click",function(e){
                var nodeList = Array.prototype.slice.call(e.currentTarget.parentNode.parentNode.children);
                var index = nodeList.indexOf( e.currentTarget.parentNode );
                var sendScope = JSON.parse(JSON.stringify(that.datascope));
                var scopeItem = {};
                scopeItem["dataset"] = these.dataname;
                scopeItem["index"] = index;
                sendScope.push(scopeItem);
                these.broadcast('addToItem', sendScope);
              });
            }

            if(self.showdelete == "true"){
              var deleteItem = document.createElement("div");
              deleteItem.innerHTML = "X";
              deleteItem.classList.add("deleteItem");
              itemEl.appendChild(deleteItem);
              deleteItem.addEventListener("click",function(e){
                var nodeList = Array.prototype.slice.call(e.currentTarget.parentNode.parentNode.children);
                var index = nodeList.indexOf( e.currentTarget.parentNode );
                these.deleteItem(index);
              });
            }

            itemList.appendChild(itemEl);
          }
          });
        });
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-double-button" attributes="textcolor rightbuttoncolor leftbuttoncolor leftlabel rightlabel value" value="Click" extends="ceci-element" leftlabel="OK" rightlabel="Cancel" textcolor="#ffffff" leftbuttoncolor="#4DB227" rightbuttoncolor="#bd400a" assetpath="component-double-button/">
  <ceci-definition>
    {
      "tags": ["button", "click", "tap"],
      "thumbnail": "./thumbnail.png",
      "description": "Broadcasts a \"click\" when clicked.",
      "name": "Double Button",
      "broadcasts": {
        "clickleft": {
          "label": "Left Button",
          "description": "Occurs when left button is clicked.",
          "default": "blue"
        },
        "clickright": {
          "label": "Right Button",
          "description": "Occurs when right button is clicked.",
          "default": "blue-two"
        }
      },
      "listeners": {},
      "attributes": {
        "leftlabel": {
          "label": "Left Button Label",
          "description": "Text shown on the left button.",
          "editable": "text"
        },
        "leftbuttoncolor": {
          "label": "Left Button Color",
          "description": "Background color of the left button.",
          "editable": "color"
        },
        "rightlabel": {
          "label": "Right Button Label",
          "description": "Text shown on the right button.",
          "editable": "text"
        },
        "rightbuttoncolor": {
          "label": "Right Button Color",
          "description": "Background color of the right button.",
          "editable": "color"
        },
        "textcolor": {
          "label": "Text Color",
          "description": "Color of the text on the button's label.",
          "editable": "color"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  font-size: 0px;
  word-spacing: -1;
}

:host .button-wrapper {
  position: relative;
  display: inline-block;
  width: 50%;
}

:host .button {
  font-family: "FiraSans", sans-serif;
  cursor: pointer;
  border-bottom: 2px solid rgba(0,0,0,.1);
  display: block;
  text-align: center;
  padding: 12px 0 10px 0;
  text-overflow: ellipsis;
  overflow: hidden;
  font-weight: 600;
  font-size: 1.8rem;
  line-height: 1.8rem;
  width: 100%;
  display: inline-block;
  -webkit-box-sizing: border-box;
}

:host #leftbutton {
 border-right: 2px solid rgba(0,0,0,.1);
}

:host #rightbutton {
  border-left: 2px solid rgba(255,255,255,.1);
}

:host .overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  opacity: 0;
}

:host .active-overlay {
  background: black;
}

:host .hover-overlay {
  background: white;
}

:host .button-wrapper:hover .hover-overlay {
  opacity: .1;
}

:host .button-wrapper:active .active-overlay {
  opacity: .1;
}
:host .button-wrapper:active .hover-overlay {
  opacity: 0;
}

:host .button-wrapper:active .button {
  border-top: solid 2px rgba(0,0,0,.1);
  border-bottom: none;
}

:host button {
  border: none;
}
</style>
    <div class="button-wrapper" on-click="{{clickleft}}">
      <div class="button" id="leftbutton">{{leftlabel}}</div>
      <div class="overlay active-overlay"></div>
      <div class="overlay hover-overlay"></div>
    </div>
    <div class="button-wrapper" on-click="{{clickright}}">
      <div class="button" id="rightbutton">{{rightlabel}}</div>
      <div class="overlay active-overlay"></div>
      <div class="overlay hover-overlay"></div>
    </div>
    <shadow></shadow></template>
  <script>
    Polymer('ceci-double-button', {
      ready: function () {
        this.super();
        var that = this;
      },
      clickleft: function () {
        this.broadcast('clickleft', this.getAttribute('value'));
      },
      clickright: function () {
        this.broadcast('clickright', this.getAttribute('value'));
      },
      textcolorChanged: function (oldValue, newValue) {
        this.$.leftbutton.style.color = newValue;
        this.$.rightbutton.style.color = newValue;
      },
      leftbuttoncolorChanged: function (oldValue, newValue) {
        this.$.leftbutton.style.backgroundColor = newValue;
      },
      rightbuttoncolorChanged: function (oldValue, newValue) {
        this.$.rightbutton.style.backgroundColor = newValue;
      }

    });
  </script>
</polymer-element>

<polymer-element name="ceci-editform" extends="ceci-element" assetpath="component-editform/">
  <template>
    <style>:host {
  display: block;
  width: 100%;
  padding: 10px;
  box-sizing: border-box;
  background: #EFEFEF;
}

:host h1 {
  font-size: 18px;
  border-bottom: solid 2px #CCC;
  margin-bottom: 10px;
  padding-bottom: 4px;
  text-shadow: 0px 1px 0px white;
}

:host input {
  display: block;
  padding: 5px;
  width: 100%;
  font-size: 16px;
  margin-bottom: 4px;
  box-sizing: border-box;
}

:host p {
  color: white;
  background: green;
  cursor: pointer;
  padding: 5px 10px;
  display: inline-block;
}
</style>
    <div class="form">

    </div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      "thumbnail": "./thumbnail.png",
      "name": "Edit Form",
      "description": "Edits an item!",
      "listeners": {
        "editItem": {
          "description": "Set the item to edit with the form.",
          "label": "Set Edit Item"
        },
        "submitForm": {
          "description": "Submit this form.",
          "label": "Submit Form"
        }
      }
    }
  </ceci-definition>
  <script>
    Polymer("ceci-editform", {
      storedData : {},
      db: {},
      datascope: {},
      storedData: {},
      ready: function(){
        this.super();
      },
      editItem : function(scope){
        var self = this;
        var ca = document.querySelector("ceci-app");

        if(!ca){
          window.addEventListener("CeciDataConnectionLoaded", function(){
            self.editItemFirebase(scope);
          });
        } else {
          if(ca.firebase){
            this.editItemFirebase(scope);
          }
        }

      },
      editItemFirebase : function(scope){
        var self = this;

        document.querySelector("ceci-app").getFirebaseObject('form-data', "", function(data){

          self.db = data;
          self.datascope = scope;
          self.storedData = data || {};

          for (var i = 0; i < self.datascope.length; i++){
            var scopeItem = self.datascope[i];
            self.storedData = self.storedData[scopeItem["dataset"]][scopeItem["index"]];
          }

          var form = self.shadowRoot.querySelector(".form");
          form.innerHTML = "";

          for(key in self.storedData){
            if(typeof self.storedData[key] != "object"){

              var label = document.createElement("label");
              label.innerHTML = key;
              form.appendChild(label);

              var input = document.createElement("input");
              input.value = self.storedData[key];
              input.setAttribute("storeName",key);
              form.appendChild(input);
            }
          }

        });

      },
      submitForm : function(){
        // This resubmits the entire DB with the updated record
        var self = this;

        var newData = self.storedData;
        var fields = self.shadowRoot.querySelectorAll(".form input");

        self.storedData = self.db;

        for (var field in fields) {
          if (fields.hasOwnProperty(field)) {
            var f = fields[field];
            var name = f.getAttribute("storeName");
            var value = f.value;
            newData[name] = value;
          }
        }

        // Gets a reference to the correct item
        for (var i = 0; i < self.datascope.length; i++){
          var scopeItem = self.datascope[i];
          self.storedData = self.storedData[scopeItem["dataset"]][scopeItem["index"]];
        }

        // Replaces it with the new item
        self.storedData = newData;

        // Saves over the entire DB with the new item included
        var ca = document.querySelector("ceci-app");
        ca.setFirebaseObject('form-data', self.db);

        var event = new CustomEvent("storage");
        window.dispatchEvent(event);

      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-fireworks" attributes="fireworksound" extends="ceci-element" fireworksound="Kaboom!" assetpath="component-fireworks/">
  <template>
    <style>:host {
  display: block;
  background: black;
}

:host .app-fireworks {
  background-color: #0e1012;
  display: inline-block;
}

:host canvas {
  height: 100%;
  width: 100%;
}
</style>
    <div class="fireworks-wrapper">
      <canvas id="canvas" class="fireworks-canvas" on-click="{{click}}">Canvas is not supported in your browser.</canvas>
    </div>
    <shadow></shadow>
  </template>
  <ceci-definition>
      {
        "tags": ["animated", "starter", "fun"],
        "thumbnail": "./thumbnail.png",
        "description": "Shows firework show",
        "name": "Fireworks",
        "broadcasts": {
          "kaboom": {
            "label": "Kaboom",
            "description": "Occurs when a rocket explodes"
          }
        },
        "listeners": {
          "shootRocket": {
            "description": "Causes a rocket to launch",
            "label": "Shoot Rocket",
            "default": true
          },
          "shootThisManyRockets": {
            "description": "Shoot a number of rockets",
            "label": "Shoot This Many Rockets"
          }
        },
        "attributes": {
          "fireworksound": {
            "label": "Firework Sound",
            "description": "Tell the fireworks what to broadcast every shot.",
            "editable": "text",
            "listener": true
          }
        }
      }
    </ceci-definition>
  <script>
    Polymer('ceci-fireworks', {
      ready: function () {
        this.super();
        // when animating on canvas, it is best to use requestAnimationFrame instead of setTimeout or setInterval
        // not supported in all browsers though and sometimes needs a prefix, so we need a shim
        window.requestAnimFrame = ( function() {
          return window.requestAnimationFrame ||
                window.webkitRequestAnimationFrame ||
                window.mozRequestAnimationFrame ||
                function( callback ) {
                  window.setTimeout( callback, 1000 / 60 );
                };
        })();

        this.setAttribute('fireworksound', this.getAttribute("fireworksound") || 'Kapow!');

        // now we will setup our basic variables for the demo
        var canvas = this.$.canvas,
            ctx = canvas.getContext( '2d' ),

            // firework collection
            fireworks = [],
            // particle collection
            particles = [],
            // when launching fireworks with a click, too many get launched at once without a limiter, one launch per 5 loop ticks
            limiterTotal = 5,
            limiterTick = 0,
            mousedown = false,
            // mouse x coordinate,
            mx,
            // mouse y coordinate
            my;

        // starting hue
        this.hue = 120;
        // this will time the auto launches of fireworks, one launch per 80 loop ticks
        this.timerTotal = 80,
        this.timerTick = 0,

        this.ctx = ctx;

        // now we are going to setup our function placeholders for the entire demo

        // get a random number within a range
        function random( min, max ) {
          return Math.random() * ( max - min ) + min;
        }
        this.random = random;

        // calculate the distance between two points
        function calculateDistance( p1x, p1y, p2x, p2y ) {
          var xDistance = p1x - p2x,
              yDistance = p1y - p2y;
          return Math.sqrt( Math.pow( xDistance, 2 ) + Math.pow( yDistance, 2 ) );
        }

        var t = this;
        // create firework
        function Firework( sx, sy, tx, ty, hue ) {
          // actual coordinates
          this.x = sx;
          this.y = sy;
          // starting coordinates
          this.sx = sx;
          this.sy = sy;
          // target coordinates
          this.tx = tx;
          this.ty = ty;
          this.hue = hue;
          // distance from starting point to target
          this.distanceToTarget = calculateDistance( sx, sy, tx, ty );
          this.distanceTraveled = 0;
          // track the past coordinates of each firework to create a trail effect, increase the coordinate count to create more prominent trails
          this.coordinates = [];
          this.coordinateCount = 3;
          // populate initial coordinate collection with the current coordinates
          while( this.coordinateCount-- ) {
            this.coordinates.push( [ this.x, this.y ] );
          }
          this.angle = Math.atan2( ty - sy, tx - sx );
          this.speed = 2;
          this.acceleration = 1.05;
          this.brightness = random( 50, 70 );
        }
        // update firework
        Firework.prototype.update = function( index ) {
          // remove last item in coordinates array
          this.coordinates.pop();
          // add current coordinates to the start of the array
          this.coordinates.unshift( [ this.x, this.y ] );

          // speed up the firework
          this.speed *= this.acceleration;

          // get the current velocities based on angle and speed
          var vx = Math.cos( this.angle ) * this.speed,
              vy = Math.sin( this.angle ) * this.speed;
          // how far will the firework have traveled with velocities applied?
          this.distanceTraveled = calculateDistance( this.sx, this.sy, this.x + vx, this.y + vy );

          // if the distance traveled, including velocities, is greater than the initial distance to the target, then the target has been reached
          if( this.distanceTraveled >= this.distanceToTarget ) {
            t.broadcast('kaboom', t.getAttribute('fireworksound'));
            createParticles( this.tx, this.ty, this.hue );
            // remove the firework, use the index passed into the update function to determine which to remove
            fireworks.splice( index, 1 );
          } else {
            // target not reached, keep traveling
            this.x += vx;
            this.y += vy;
          }
        }
        // draw firework
        Firework.prototype.draw = function() {
          ctx.beginPath();
          // move to the last tracked coordinate in the set, then draw a line to the current x and y
          ctx.moveTo( this.coordinates[ this.coordinates.length - 1][ 0 ], this.coordinates[ this.coordinates.length - 1][ 1 ] );
          ctx.lineTo( this.x, this.y );
          ctx.strokeStyle = 'hsl(' + this.hue + ', 100%, ' + this.brightness + '%)';
          ctx.stroke();

          ctx.beginPath();
          // draw the target for this firework with a pulsing circle
          ctx.arc( this.tx, this.ty, this.targetRadius, 0, Math.PI * 2 );
        }
        // create particle
        function Particle( x, y, hue ) {
          this.x = x;
          this.y = y;
          // track the past coordinates of each particle to create a trail effect, increase the coordinate count to create more prominent trails
          this.coordinates = [];
          this.coordinateCount = 5;
          while( this.coordinateCount-- ) {
            this.coordinates.push( [ this.x, this.y ] );
          }
          // set a random angle in all possible directions, in radians
          this.angle = random( 0, Math.PI * 2 );
          this.speed = random( 1, 10 );
          // friction will slow the particle down
          this.friction = 0.95;
          // gravity will be applied and pull the particle down
          this.gravity = 1;
          // set the hue to a random number +-20 of the overall hue variable
          this.hue = random( hue - 20, hue + 20 );
          this.brightness = random( 50, 80 );
          this.alpha = 1;
          // set how fast the particle fades out
          this.decay = random( 0.015, 0.03 );
        }
        // update particle
        Particle.prototype.update = function( index ) {
          // remove last item in coordinates array
          this.coordinates.pop();
          // add current coordinates to the start of the array
          this.coordinates.unshift( [ this.x, this.y ] );
          // slow down the particle
          this.speed *= this.friction;
          // apply velocity
          this.x += Math.cos( this.angle ) * this.speed;
          this.y += Math.sin( this.angle ) * this.speed + this.gravity;
          // fade out the particle
          this.alpha -= this.decay;
          // remove the particle once the alpha is low enough, based on the passed in index
          if( this.alpha <= this.decay ) {
            particles.splice( index, 1 );
          }
        }
        // draw particle
        Particle.prototype.draw = function() {
          ctx.beginPath();
          // move to the last tracked coordinates in the set, then draw a line to the current x and y
          ctx.moveTo( this.coordinates[ this.coordinates.length - 1 ][ 0 ], this.coordinates[ this.coordinates.length - 1 ][ 1 ] );
          ctx.lineTo( this.x, this.y );
          ctx.strokeStyle = 'hsla(' + this.hue + ', 100%, ' + this.brightness + '%, ' + this.alpha + ')';
          ctx.stroke();
        }
        // create particle group/explosion
        function createParticles( x, y, hue ) {
          // increase the particle count for a bigger explosion, beware of the canvas performance hit with the increased particles though
          var particleCount = 30;
          while( particleCount-- ) {
            particles.push( new Particle( x, y, hue ) );
          }
        }
        this.Firework = Firework;
        this.Particle = Particle;
        this.fireworks = fireworks;
        this.particles = particles;

        (function loop() {
          // this function will run endlessly with requestAnimationFrame
          requestAnimFrame( loop );
          // increase the hue to get different colored fireworks over time
          t.hue += t.random(0,20)
          // normally, clearRect() would be used to clear the canvas
          // we want to create a trailing effect though
          // setting the composite operation to destination-out will allow us to clear the canvas at a specific opacity, rather than wiping it entirely
          t.ctx.globalCompositeOperation = 'destination-out';
          // decrease the alpha property to create more prominent trails
          t.ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
          t.ctx.fillRect( 0, 0, t.cw, t.ch );
          // change the composite operation back to our main mode
          // lighter creates bright highlight points as the fireworks and particles overlap each other
          t.ctx.globalCompositeOperation = 'lighter';
          // loop over each firework, draw it, update it
          var i = t.fireworks.length;
          while( i-- ) {
            t.fireworks[ i ].draw();
            t.fireworks[ i ].update( i );
          }
          // loop over each particle, draw it, update it
          var i = t.particles.length;
          while( i-- ) {
            t.particles[ i ].draw();
            t.particles[ i ].update( i );
          }
        })();

      },
      launchRocket: function() {
        this.fireworks.push( new this.Firework( this.cw / 2, this.ch,
        this.random( 0, this.cw ), this.random( 0, this.ch / 2 ), this.hue));
      },
      shootRocket: function (count, channel) {
        this.launchRocket();
      },
      shootThisManyRockets: function (count, channel) {
        var intRegex = /^\d+$/;
        if (intRegex.test(count)) {

          var n = Number(count);
          if (n > 15){
            n = 15;
          }
          for (var i=0; i < n; i++) {
            this.launchRocket();
          }
        } else {
          this.launchRocket();
        }
      },
      attached: function() {
        var rect = this.getBoundingClientRect();
        this.$.canvas.width = this.cw = rect.width;
        this.$.canvas.height = this.ch = rect.width;
        this.super();
      }
    });
  </script>
</polymer-element>


<polymer-element name="ceci-header" attributes="header" extends="ceci-element" header="Header" assetpath="component-header/">
  <ceci-definition>
    {
      "tags": ["starter", "layout", "navigation"],
      "thumbnail": "./thumbnail.png",
      "description": "A page header. You can send it a signal to navigate to that page.",
      "name": "Header",
      "broadcasts": {},
      "listeners": {
        "navigateHere": {
          "description": "navigateHere",
          "label": "Navigate Here"
        }
      },
      "attributes": {
        "header": {
          "label": "Header Label",
          "description": "Text for header label",
          "editable": "text",
          "listener": true
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

header {
  background-color: #212429;
  width: 100%;
  padding: 0;
  min-height: 5rem;
  line-height: 5rem;
  color: #FFF;
  font-size: 2.4rem;
  text-align: center;
}
</style>
    <header id="headerText"></header>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-header', {
      ready: function () {
        this.super();
      },
      headerChanged: function (oldValue, newValue) {
        this.$.headerText.innerHTML = newValue;
      },
      navigateHere: function () {
        var parent = this.parentNode;
        while (parent.nodeName !== "CECI-CARD") {
          parent = parent.parentNode;
        }
        if (parent) {
          parent.show();
        }
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-hot-potato" extends="ceci-element" attributes="min max" min="10" max="15" assetpath="component-hot-potato/">
  <ceci-definition>
    {
      "name": "Hot Potato",
      "thumbnail": "./thumbnail.png",
      "description": "Generates a random number",
      "broadcasts": {
        "finish": {
          "label": "Game over",
          "description": "Sends a message that the game is over."
        }
      },
      "listeners": {
        "start": {
          "description": "Starts a new game.",
          "label": "New Game"
        }
      },
      "attributes": {
        "min": {
          "description": "Minimum",
          "label": "Min",
          "editable": "number"
        },
        "max": {
          "description": "Maximum",
          "label": "Max",
          "editable": "number"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host .timer {
  font-family: "FiraSans", sans-serif;
  cursor: pointer;
  position: relative;
  text-decoration: none;
  outline: none;
  border-top: 1px solid rgba(255,255,255,.3);
  border-bottom: 2px solid rgba(0,0,0,.2);
  background-color: #4DB227;
  text-align: center;
  display: block;
  padding-top: 5px;
  padding-bottom: 3px;
  text-overflow: ellipsis;
  overflow: hidden;
  border-radius: 0.2rem;
  font-weight: 600;
  font-size: 1.8rem;
  line-height: 3.8rem;
  color: #ffffff;
  width: 100%;
  margin: 0;
}

:host button {
  border: none;
}


</style>
    <div class="timer">{{diffTime}}</div>
    <shadow></shadow>
  </template>
  <tags>starter,math</tags>
    <script>
      Polymer("ceci-hot-potato", {
        ready: function() {
          this.super();
          this.startTime = 0;
          this.randomTimeBetweenRange = 0;
          this.diffTime = 0;
        },
        start: function() {
          this.startTime = Date.now();
          var max = Number(this.max);
          var min = Number(this.min);
          this.randomTimeBetweenRange = Math.floor(Math.random() * (max - min + 1)) + min;
          this.timer();
        },
        timer: function() {
          var nowTime = Date.now();
          this.diffTime = ( nowTime - this.startTime ) / 1000;
          var that = this;
          if (this.diffTime >= this.randomTimeBetweenRange) {
            this.broadcast("finish", this.diffTime);
            return;
          }
          setTimeout(function() {
            that.timer();
          }, 200);
        }
      });
    </script>
</polymer-element>

<polymer-element name="ceci-image" source="http://www.placekitten.com/150/150" attributes="height source" extends="ceci-element" height="160" assetpath="component-image/">
  <template>
    <style>:host {
  display: block;
  text-align: center;
  width: 100%;
}

:host img {
  margin: 0;
  padding: 0;
  display: inline-block;
}

</style>
    <img id="image"><shadow></shadow>
  </template>
  <ceci-definition>
    {
      "tags": ["component-image", "view", "image"],
      "thumbnail": "./thumbnail.png",
      "name": "Image",
      "description": "Shows a simple image.",
      "broadcasts": {
        "click": {
          "label": "Click",
          "description": "Occurs when the image is clicked.",
          "default": false
        }
      },
      "listeners": {
        "setImageSource": {
          "description": "changes the image tags src attribute.",
          "label": "Set Image Source",
          "default": true
        }
      },
      "attributes": {
        "height": {
          "label": "Image Height",
          "description": "Image Height",
          "editable": "number",
          "listener": true
        },
        "source": {
          "label": "Image Source",
          "description": "The Image to Show",
          "editable": "text"
        }
      }
    }
  </ceci-definition>
  <script>
    Polymer('ceci-image', {
      ready: function () {
        this.super();

        var that = this;

        // User-configurable Properties
        // A component's user-configurable properties are stored as attributes.
        // Here they are set to a remembered value, or to a default starting.
        // The attribute name must match the name of the editable property in the 'editables' section.
        this.setAttribute("imageUrl", this.getAttribute("imageUrl") || "");
        this.img = this.$.image;
        this.img.style.height = this.getAttribute( "height" ) + "px";

        this.onclick = function () {
          that.broadcast("click", this.img.getAttribute( "src" ));
        };
        this.super();
      },
      setValue : function(v) {
        this.setImageSource(v);
      },
      sourceChanged : function(oldValue,newValue){
        this.setImageSource(this.source);
      },
      setImageSource : function (val) {
        this.source = val;
        this.img.setAttribute('src', val);
      },
      heightChanged: function( oldValue, newValue ) {
        this.img.style.height = ( newValue || newValue === 0 ? newValue : "160" ) + "px";
      }
    });
  </script>
</polymer-element>


<polymer-element name="ceci-jazzhands" attributes="backgroundcolor" backgroundcolor="#ff9900" extends="ceci-element" assetpath="component-jazzhands/">
  <ceci-definition>
    {
      "tags": ["music", "instrument", "tap"],
      "thumbnail": "./thumbnail.png",
      "description": "Broadcasts a \"click\" when clicked.",
      "name": "Jazz Hands",
      "broadcasts": {},
      "listeners": {
        "both": {
          "description": "Jazz both hands",
          "label": "Both Hands",
          "default": true
        },
        "left": {
          "description": "Jazz the left hand",
          "label": "Left Hand"
        },
        "right": {
          "description": "Jazz the right hand",
          "label": "Right Hand"
        }
      },
      "attributes": {
        "backgroundcolor": {
          "label": "Background Color",
          "editable": "color"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  background: orange;
}

:host #kick {
  height: 75px;
  display: block;
  cursor: pointer;
  overflow: hidden;
  width: 100%;
  position: relative;
}

:host #kick, :host #kick * {

}

:host .hand {
  height: 100px;
  width: 100px;
  background-size: 100px;
  position: absolute;

}

:host .one {
  left: 40px;
  top: -15px;
  background-image: url(/bundles/components/component-jazzhands/images/handone.png);
}

:host .two {
  right: 40px;
  background-image: url(/bundles/components/component-jazzhands/images/handtwo.png);
}

:host .both .one {
  -webkit-animation: waveone .6s linear;
  -moz-animation: waveone .6s linear;
}
:host .both .two {
  -webkit-animation: wavetwo .6s linear;
  -moz-animation: waveone .6s linear;
}



:host .left .one {
  -webkit-animation: waveone .6s linear;
  -moz-animation: wavetwo .6s linear;
}

:host .right .two {
  -webkit-animation: wavetwo .6s linear;
  -moz-animation: wavetwo .6s linear;
}



@-moz-keyframes waveone {
  0% {   -moz-transform: rotate(0deg);}
  10% {  -moz-transform: rotate(-12deg) scaleX(.9);}
  20% {  -moz-transform: rotate(0deg);}
  30% {  -moz-transform: rotate(-12deg) scaleX(.9);}
  40% {  -moz-transform: rotate(0deg);}
  50% {  -moz-transform: rotate(-12deg) scaleX(.9);}
  60% {  -moz-transform: rotate(0deg);}
  70% {  -moz-transform: rotate(-12deg) scaleX(.9);}
  80% {  -moz-transform: rotate(0deg);}
  90% {  -moz-transform: rotate(-12deg) scaleX(.9) ;}
  100% { -moz-transform: rotate(0deg);}
}

@-moz-keyframes wavetwo {
  0% {   -moz-transform: rotate(12deg) scaleX(.9);}
  10% {  -moz-transform: rotate(0deg);}
  20% {  -moz-transform: rotate(12deg) scaleX(.9);}
  30% {  -moz-transform: rotate(0deg);}
  40% {  -moz-transform: rotate(12deg) scaleX(.9);}
  50% {  -moz-transform: rotate(0deg);}
  60% {  -moz-transform: rotate(12deg) scaleX(.9);}
  70% {  -moz-transform: rotate(0deg);}
  80% {  -moz-transform: rotate(12deg) scaleX(.9);}
  90% {  -moz-transform: rotate(0deg);}
  100% { -moz-transform: rotate(12deg) scaleX(.9) ;}
}

@-webkit-keyframes waveone {
  0% { -webkit-transform: rotate(0deg);}
  10% { -webkit-transform: rotate(-12deg) scaleX(.9);}
  20% { -webkit-transform: rotate(0deg);}
  30% { -webkit-transform: rotate(-12deg) scaleX(.9);}
  40% { -webkit-transform: rotate(0deg);}
  50% { -webkit-transform: rotate(-12deg) scaleX(.9);}
  60% { -webkit-transform: rotate(0deg);}
  70% { -webkit-transform: rotate(-12deg) scaleX(.9);}
  80% { -webkit-transform: rotate(0deg);}
  90% { -webkit-transform: rotate(-12deg) scaleX(.9) ;}
  100% { -webkit-transform: rotate(0deg);}
}

@-webkit-keyframes wavetwo {
  0% { -webkit-transform: rotate(12deg) scaleX(.9);}
  10% { -webkit-transform: rotate(0deg);}
  20% { -webkit-transform: rotate(12deg) scaleX(.9);}
  30% { -webkit-transform: rotate(0deg);}
  40% { -webkit-transform: rotate(12deg) scaleX(.9);}
  50% { -webkit-transform: rotate(0deg);}
  60% { -webkit-transform: rotate(12deg) scaleX(.9);}
  70% { -webkit-transform: rotate(0deg);}
  80% { -webkit-transform: rotate(12deg) scaleX(.9);}
  90% { -webkit-transform: rotate(0deg);}
  100% { -webkit-transform: rotate(12deg) scaleX(.9) ;}
}


:host audio {
  display: none;
}
</style>
    <div id="kick" on-mousedown="{{both}}">
      <div id="two" class="hand two"></div>
      <div id="one" class="hand one"></div>
    </div>
    <!-- <audio id="kicksound" src="sounds/snare.mp3" preload=preload></audio> -->
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-jazzhands', {
      ready: function () {
        this.super();
        var that = this;
      },
      both : function(){
        this.kickoff();
        this.$.kick.classList.add("both");
      },
      left : function(){
        this.kickoff();
        this.$.kick.classList.add("left");
      },
      right : function(){
        this.kickoff();
        this.$.kick.classList.add("right");
      },
      kickoff : function(){
        this.$.kick.classList.remove("both");
        this.$.kick.classList.remove("right");
        this.$.kick.classList.remove("left");
        this.$.one.offsetWidth = this.$.one.offsetWidth;
        this.$.two.offsetWidth = this.$.two.offsetWidth;
      },
      backgroundcolorChanged: function (oldValue, newValue) {
        this.$.kick.style.background = newValue;
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-kickdrum" attributes="stickcolor backgroundcolor drumcolor" drumcolor="#d60e0e" stickcolor="#000000" backgroundcolor="#FFFFFF" extends="ceci-element" assetpath="component-kickdrum/">
  <ceci-definition>
    {
      "tags": ["button", "click", "tap"],
      "thumbnail": "./thumbnail.png",
      "description": "Broadcasts a \"click\" when clicked.",
      "name": "Kick Drum",
      "broadcasts": {},
      "listeners": {
        "kick": {
          "description": "Hits the kick drum!",
          "label": "Kick",
          "default": true
        }
      },
      "attributes": {
        "stickcolor": {
          "label": "Stick Color",
          "editable": "color"
        },
        "backgroundcolor": {
          "label": "Background Color",
          "editable": "color"
        },
        "drumcolor": {
          "label": "Drum Color",
          "description": "Color of the drum.",
          "editable": "color"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host #kick {
  overflow: hidden;
  height: 75px;
  display: block;
  cursor: pointer;
  width: 100%;
  position: relative;
}

:host #drum {
  position: absolute;
  background: red;
  left: 0;
  top:0;
  height: 100%;
  width: 50%;
}

:host #face {
  position: absolute;
  background: white;
  width: 200px;
  height: 200px;
  top: calc(50% - 100px);
  -webkit-border-radius: 200px;
     -moz-border-radius: 200px;
          border-radius: 200px;
  right: -100px;
  -webkit-transform: scaleX(.5);
  -moz-transform: scaleX(.5);
  transform: scaleX(.5);
  border: solid 25px red;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

:host #stick {
  position: absolute;
  width: 8px;
  background: black;
  height: 50px;
  bottom: -4px;
  left: calc(50% + 5px);
  -webkit-transform-origin: bottom;
  -moz-transform-origin: bottom;
  transform-origin: bottom;
  -webkit-transform: rotate(15deg);
  -moz-transform: rotate(15deg);
  transform: rotate(15deg);
}

:host #ball {
  -webkit-border-radius: 20px;
  -moz-border-radius: 20px;
  border-radius: 20px;
  width: 20px;
  height: 20px;
  background: black;
  position: absolute;
  top: -4px;
  left: calc(50% - 10px);
}

:host .on #face {
  right: -95px;
}

:host .on #stick {
  -webkit-transform: rotate(0deg);
  -moz-transform: rotate(0deg);
  transform: rotate(0deg);
  left: 50%;
}

:host audio {
  display: none;
}
</style>
    <div id="kick" on-mousedown="{{kickon}}" on-mouseup="{{kickoff}}">
      <div id="drum">
        <div id="face"></div>
      </div>
      <div id="stick">
        <div id="ball"></div>
      </div>
    </div>
    <audio id="kicksound" src="component-kickdrum/sounds/kick.mp3" preload="preload"></audio>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-kickdrum', {
      ready: function () {
        this.super();
        var that = this;
      },
      kickon: function () {
        this.$.kicksound.pause();
        this.$.kicksound.currentTime = 0;
        this.$.kicksound.play();
        this.$.kick.classList.add("on");
      },
      kick : function(){
        this.kickon();
        var that = this;
        window.setTimeout(function(){
          that.kickoff();
        },100)
      },
      kickoff : function(){
        this.$.kick.classList.remove("on");
      },
      stickcolorChanged: function (oldValue, newValue) {
        this.$.stick.style.background = newValue;
        this.$.ball.style.background = newValue;
      },
      drumcolorChanged: function (oldValue, newValue) {
        this.$.drum.style.background = newValue;
        this.$.face.style.borderColor = newValue;
      },
      backgroundcolorChanged: function (oldValue, newValue) {
        this.$.kick.style.background = newValue;
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-meatspaces-input" attributes="image text server mode" extends="ceci-element" assetpath="component-meatspaces-input/">
  <ceci-definition>
    {
      "tags": ["meatspaces", "input"],
      "thumbnail": "./thumbnail.png",
      "description": "Sends Meatspaces chat messages",
      "name": "Meat Chat Input",
      "listeners": {
        "send": {
          "label": "Send",
          "description": "Send message to chat server",
          "default": true
        }
      },
      "broadcasts": {
        "sent": {
          "label": "Message Sent",
          "description": "Message was sent to chat server"
        }
      },
      "attributes": {
        "image": {
          "label": "Image",
          "description": "Data-URL for image to be used",
          "listener": true
        },
        "server": {
          "label": "Server",
          "description": "URL for Appmaker Meatspaces Chat Server",
          "editable": "text"
        },
        "mode": {
          "label": "Message Mode",
          "description": "What kind of messages will be sent.",
          "editable": "select",
          "options": ["both", "text only", "image only"]
        }
      }
    }
  </ceci-definition>
  <template>
    <style>
      :host {
        display: block;
        width: 100%;
        min-height: 160px;
        position: relative;
      }

      :host img {
        width: 100px;
        height: 100px;
        float: left;
        margin-left: 5px;
        background-color: rgba(0, 0, 0, 0.2);
        display: block;
      }

      :host #container {
        padding: 5px 0;
      }

      :host #textarea-container {
        position: absolute;
        left: 110px;
        right: 10px;
        top: 5px;
        bottom: 10px;
      }

      :host textarea {
        width: 100%;
        height: 100%;
        resize: none;
      }

      :host #container[data-mode="text only"] img {
        display: none;
      }

      :host #container[data-mode="text only"] #textarea-container {
        left: 5px;
      }

      :host #container[data-mode="image only"] img {
        float: none;
        margin: 0 auto;
        width: 150px;
        height: 150px;
      }

      :host #container[data-mode="image only"] #textarea-container {
        display: none;
      }
    </style>
    <div id="container" data-mode="{{mode}}">
      <img src="{{image}}">
      <div id="textarea-container">
        <textarea placeholder="Type here">{{text}}</textarea>
      </div>
    </div>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-meatspaces-input', {
      text: '',
      image: 'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==',
      server: 'http://appmaker-meatspaces-proxy.herokuapp.com/',
      mode: 'both',
      ready: function () {
        this.super();
      },
      send: function () {
        var payload = {
          image: this.image,
          text: this.text
        };
        var xhr = new XMLHttpRequest();
        xhr.open('POST', this.server + '/add/chat', true);
        xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
        xhr.onload = function (e) {
          console.log(xhr.response);
        };
        xhr.send(JSON.stringify(payload));
        this.text = '';
        this.image = 'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==';
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-meatspaces-messages" attributes="server mode height" extends="ceci-element" assetpath="component-meatspaces-messages/">
  <script src="component-meatspaces-messages/vendor/socketio.js"></script>
  <ceci-definition>
    {
      "tags": ["meatspaces", "chat"],
      "thumbnail": "./thumbnail.png",
      "name": "Meat Chat Window",
      "description": "Displays Meatspaces chat messages",
      "attributes": {
        "server": {
          "label": "Meatspaces Server",
          "description": "Meatspaces server to which this app should connect to receive messages.",
          "editable": "text"
        },
        "height": {
          "label": "Height",
          "description": "Height of this brick.",
          "editable": "number"
        },
        "mode": {
          "label": "Message Mode",
          "description": "What to display for each message",
          "editable": "select",
          "options": ["both", "text only", "image only"]
        }
      }
    }
  </ceci-definition>
  <template>
    <style>
      :host {
        display: block;
        width: 100%;
      }

      :host #container {
        overflow: scroll;
      }

      :host #container .message {
        font-size: 1em;
        clear: both;
        width: 100%;
        min-height: 60px;
        padding: .2em 0;
      }

      :host #container .message:nth-child(odd) {
        background: rgba(0, 0, 0, 0.1);
      }

      :host #container .message img {
        float: left;
        height: 50px;
        margin-right: .25em;
      }

      :host #status {
        text-align: center;
        padding: .25em 0;
      }

      :host #container[data-mode="text only"] {
        margin-left: 3%;
      }

      :host #container[data-mode="text only"] .message img {
        display: none;
      }

      :host #container[data-mode="text only"] .message .text {
      }

      :host #container[data-mode="image only"] {
        margin-left: 3%;
      }

      :host #container[data-mode="image only"] .message img {
        width: 100%;
        height: auto;
        float: none;
      }

      :host #container[data-mode="image only"] .message .text {
        display: none;
      }

      :host #container[data-mode="image only"] .message {
        display: inline-block;
        width: 48%;
        background: rgba(0, 0, 0, 0.1);
        padding: 0;
        margin-top: .25em;
      }
    </style>

    <div id="status">{{status}}</div>
    <div id="container" data-mode="{{mode}}">
      <template repeat="{{message in _messages}}">
        <div class="message"><img src="{{message.media}}"><span class="text">{{message.message}}</span></div>
      </template>
    </div>

    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-meatspaces-messages', {
      server: 'https://chat.meatspac.es:443',
      status: 'Connecting...',
      mode: 'both',
      height: 300,
      _messages: [],
      _boundMessageReceived: null,
      _messageReceived: function (data) {
        this._messages.push(data.chat.value);
        this.async(function () {
          this.$.container.scrollTop = this.$.container.scrollHeight + 1000;
        });
      },
      _connect: function () {
        var that = this;

        if (this._socket) { return; }

        var socket = this._socket = io.connect(this.server);
        socket.on('connect', function () {
          socket.emit('join');
          that.status = 'Connected';
        });

        this._boundMessageReceived = this._messageReceived.bind(this);
        socket.on('message', this._boundMessageReceived);
      },
      _disconnect: function () {
        this._socket.removeAllListeners('message');
        window.s = this._socket;
        if (this._socket.socket.connected) {
          this._socket.disconnect();
        }
        this.status = 'Disconnected';
        this._boundMessageReceived = null;
        this._socket = null;
      },
      ready: function () {
        this.super();
        this.heightChanged();
      },
      attached: function (e) {
        this._connect();
        this.super();
      },
      detached: function (e) {
        this._disconnect();
        this.super();
      },
      serverChanged: function (oldValue, newValue) {
        this._disconnect();
        this._messages = [];
        this.async(function () {
          this._connect();
        });
      },
      heightChanged: function () {
        this.$.container.style.height = this.height + 'px';
      }
    });
  </script>
</polymer-element>

<!--TODO-->
<!--1. stop event-->
<!--2. Does this evaluate true / false  this.getAttribute('autostart')-->
<!--3. support tap / touch event? touchend-->
<!--4. cancel-->

<polymer-element name="ceci-metronome" attributes="changeby beatsperminute autostart" beatsperminute="60" autostart="true" extends="ceci-element" changeby="10" assetpath="component-metronome/">
  <template>
    <style>:host {
  display: block;
  position: relative;
  padding: 10px 0;
  -webkit-user-select: none;
  -moz-user-select: none;
}

:host .metronome-wrapper {
  margin: 0 auto;
  position: relative;
}

:host .speed-control {
  height: 50px;
  width: 50px;
  background: #63a6cc;
  position: absolute;
  border-radius: 30px;
  -webkit-border-radius: 30px;
  top: 10px;
  cursor: pointer;
  opacity: .8;
}

:host .speed-control .icon {
  position: absolute;
  font-size: 40px;
  color: white;
  font-weight: bold;
  width: 100%;
  text-align: center;
  text-shadow: 0px -1px 0px rgba(0,0,0,.25);
}

:host .speed-control:hover {
  opacity: 1;
}

:host .speed-control.up {
  right: 40px;
}

:host .down .icon {
  top: -4px;
}

:host .speed-control.down {
  left: 40px;
}

:host .metronome-body {
  background: #85560b;
  border-top: solid 2px #85560b;
  background: -webkit-linear-gradient(top, #a87018,#85560b);
  background: -moz-linear-gradient(top, #a87018,#85560b);
  width: 40px;
  margin: 0 auto;
  padding: 8px 0 12px 0;
  -webkit-border-radius: 15px 15px 5px 5px;
  border-radius: 15px 15px 5px 5px;
  position: relative;
  cursor: pointer;
}

:host  .metronome-hole {
  background: white;
  height: 50px;
  width: 10px;
  margin: 0 auto;
  border-radius: 3px 3px 10px  10px;
  border-top: solid 2px #85560b;
  border-left: solid 1px #85560b;
  border-right: solid 1px #85560b;
}

:host  .metronome-shadow {
  background: #DDD;
  width: 50px;
  height: 20px;
  margin: 0 auto;
  -webkit-border-radius: 12px;
  -webkit-transform: scaleY(.5);
  border-radius: 12px;
  transform: scaleY(.5);
  border-radius: 12px;
  position: absolute;
  left: calc(50% - 25px);
  top: 62px;
}

:host .metronome-arrow {
  background: black;
  height: 45px;
  width: 6px;
  border: solid 2px white;
  -webkit-transform-origin: center 45px;
  -webkit-border-radius: 0 0 5px 5px;
  transform-origin: center 45px;
  border-radius: 0 0 5px 5px;
  position: absolute;
  top: 10px;
  left: 15px;
}

:host .metronome-animation {
  -webkit-animation-name: metronome;
  -webkit-animation-timing-function: linear;
  -webkit-animation-iteration-count: infinite;
  animation-name: metronome;
  animation-timing-function: linear;
  animation-iteration-count: infinite;
}

@-webkit-keyframes metronome {
  0% {-webkit-transform: rotate(0deg); }
  25% {-webkit-transform: rotate(-30deg); }
  50% {-webkit-transform: rotate(0deg); }
  75% {-webkit-transform: rotate(30deg); }
  100% {-webkit-transform: rotate(0deg); }
}

@keyframes metronome {
  0% {transform: rotate(0deg); }
  25% {transform: rotate(-30deg); }
  50% {transform: rotate(0deg); }
  75% {transform: rotate(30deg); }
  100% {transform: rotate(0deg); }
}
</style>
    <div class="metronome-wrapper">
      <div class="metronome-shadow"></div>
      <div class="metronome-body" on-click="{{click}}">
        <div class="metronome-hole"></div>
        <div class="metronome-arrow"></div>
      </div>
      <div class="speed-control up" on-click="{{faster}}">
        <span class="icon">+</span>
      </div>
      <div class="speed-control down" on-click="{{slower}}">
        <span class="icon">-</span>
      </div>
    </div>
    <shadow></shadow>
    <script type="text/json" id="ceci-definition"></script>
  </template>
  <ceci-definition>
    {
      "description": "Outputs ticks measured in Beats Per Minute (BPM)",
      "tags": ["fun","animated","starter"],
      "thumbnail": "./thumbnail.png",
      "name": "Metronome",
      "broadcasts": {
        "tick": {
          "label": "Tick",
          "description": "A tick of the metronome measured in Beats Per Minute(BPM)",
          "default": true
        }
      },
      "listeners": {
        "stop": {
          "description": "Stops metronome ticking.",
          "label": "Stop ticking"
        },
        "start": {
          "description": "Starts metronome ticking.",
          "label": "Start ticking"
        }
      },
      "attributes": {
        "beatsperminute": {
          "label": "Beats Per Minute (BPM)",
          "description": "Metronome ticks measured in beats per minute",
          "editable": "number",
          "min" : 0.1,
          "listener": true
        },
        "changeby" : {
          "label": "Button Increment",
          "description": "How much the + and - buttons change the speed by.",
          "editable": "number",
          "min" : 1,
          "listener": true
        },
        "autostart": {
          "label": "Autostart",
          "description": "Boolean value that controls if the metronome starts auto-playing when the component loads",
          "editable": "boolean",
          "listener": true
        }
      }
    }
  </ceci-definition>
  <script>
    Polymer('ceci-metronome', {
      ready: function () {
        this.super();
        this._count = 0;
        this._playing = false;
        this.timeout = null;
      },
      leftView: function () {
        clearTimeout(this.timeout);
      },
      setArrowSpeed: function (v) {
        var animDuration = v * 2;
        var metronomeArrow = this.shadowRoot.querySelector('.metronome-arrow');
        metronomeArrow.classList.remove("metronome-animation");
        if (v > 0 && this._playing) {
          metronomeArrow.offsetWidth = metronomeArrow.offsetWidth;
          metronomeArrow.classList.add("metronome-animation");
          metronomeArrow.style.webkitAnimationDuration = animDuration + "s";
          metronomeArrow.style.animationDuration = animDuration + "s";
        }
      },
      autostartChanged : function(){
        if(this.autostart == "true") {
          this.start();
        } else {
          this.stop();
        }
      },
      click: function() {
        if(this._playing){
          this.stop();
        } else {
          this.start();
        }
      },
      faster : function(){
        this.beatsperminute = parseInt(this.beatsperminute,10) + parseInt(this.changeby,10);
      },
      slower : function(){
        this.beatsperminute = parseInt(this.beatsperminute,10) - parseInt(this.changeby,10);
      },
      beatsperminuteChanged: function (oldValue, newValue) {
        if (newValue <= 0) {
          this.beatsperminute = 0.1;
        }
        this.setArrowSpeed((60 / this.beatsperminute));
      },
      start: function (oldValue, newValue) {
        this._playing = true;
        this.setArrowSpeed((60 / this.beatsperminute));
        this.tick();
      },
      stop: function () {
        this._playing = false;
        this.setArrowSpeed(0);
      },
      tick: function () {
        if (!this._playing) {
          return;
        }
        this._count++;
        this.broadcast('tick', this._count);
        var t = this;
        var defer = function () {
          t.tick();
        };
        this.timeout = setTimeout(defer, (60 / this.beatsperminute) * 1000);
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-microphone-button" attributes="textcolor record done" extends="ceci-element" record="Record" done="Done" textcolor="#ffffff" assetpath="component-microphone-button/">
  <ceci-definition>
    {
      "tags": ["microphone", "button", "audio"],
      "thumbnail": "./thumbnail.png",
      "description": "Records an audio clip.",
      "name": "Microphone",
      "broadcasts": {
        "clip": {
          "label": "clip",
          "description": "An audio clip from your microphone.",
          "default": true
        }
      },
      "listeners": {
        "start": {
          "description": "Start a microphone recording.",
          "label": "start"
        },
        "stop": {
          "description": "Stop a microphone recording.",
          "label": "stop"
        }
      },
      "attributes": {}
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  padding: 10px 0;
  text-align: center;
  background: #EEE;
}

:host .buttonwrapper {
  display: inline-block;
}

:host .button {
  font-family: "FiraSans", sans-serif;
  cursor: pointer;
  position: relative;
  text-decoration: none;
  outline: none;
  background-color: #4DB227;
  text-align: center;
  border-radius: 0.2rem;
  font-weight: 600;
  font-size: 1.8rem;
  border: none;
  width: 80px;
  height: 42px;
  margin: 0 5px;
  position: relative;
  display: block;
  width: 100px;
  background: #CCC;

  border: solid 2px #BBB;
  border-top: solid 2px #CCC;
  border-bottom: solid 4px #AAA;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  border-radius: 2px;
  background-image:  -webkit-linear-gradient(top, #EEE,#DDD);
  background-image:  -moz-linear-gradient(top, #EEE,#DDD);
  background-image:  linear-gradient(top, #EEE,#DDD);
}

:host .button:active {
  border-bottom: solid 2px #AAA;
  margin-top: 2px;
}

:host .icon {
  width: 20px;
  height: 20px;
}

:host #startButton .iconwrapper {
  position: absolute;
  top: calc(50% - 12px);
  left: calc(50% - 12px);
  padding: 2px;
  background-image: -moz-linear-gradient(top, #AAA,#FFF);
  background-image: -webkit-linear-gradient(top, #AAA,#FFF);
  background-image:  linear-gradient(top, #AAA,#FFF);
  -webkit-border-radius: 22px;
  -moz-border-radius: 22px;
  border-radius: 22px;
}

:host #stopButton .iconwrapper {
  position: absolute;
  top: calc(50% - 10px);
  left: calc(50% - 10px);
  -webkit-border-radius: 22px;
  -moz-border-radius: 22px;
  border-radius: 22px;
}

:host #startButton .icon {
  background: #a13333;
  -webkit-border-radius: 20px;*/
  -moz-border-radius: 20px;
  border-radius: 20px;
  height: 20px;
  width: 20px;
}

:host #stopButton .icon {
  background: #555;
}

:host #startButton.recording  {
  border-bottom: solid 2px #AAA;
  margin-top: 2px;
}

:host #startButton.recording .icon {
  background: #eb1919;
}

</style>
      <div class="buttonwrapper">
        <div class="button" id="startButton">
          <div class="iconwrapper">
            <div class="icon"></div>
          </div>
        </div>
      </div>
      <div class="buttonwrapper">
        <div class="button" id="stopButton">
          <div class="iconwrapper">
            <div class="icon"></div>
          </div>
        </div>
      </div>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-microphone-button', {
      ready: function () {
        this.super();
        this.startButton = this.shadowRoot.querySelector("#startButton");
        this.stopButton = this.shadowRoot.querySelector("#stopButton");
        this.bg = this.shadowRoot.querySelector(".button");
        this.bg.style.background = this.buttoncolor;
        navigator.getMedia = ( navigator.getUserMedia ||
                               navigator.webkitGetUserMedia ||
                               navigator.mozGetUserMedia ||
                               navigator.msGetUserMedia );
      },
      attached: function() {
        if(!window.MediaRecorder) {
          // alert(this.gettext("your browser does not support recording"));;
          window.MediaRecorder = function() {
            var noop = function(){};
            this.start = noop;
            this.stop = noop;
            this.ondataavailable = false
          };
        }

        this.super();

        var that = this;

        if (navigator.getMedia) {
          var audioCtx = new AudioContext();

          navigator.getMedia (
            {audio: true},

            function(stream) {

              var mediaRecorder = new MediaRecorder(stream);

              that.startButton.onclick = function() {
                console.log("starting recorder");
                mediaRecorder.start();
                that.startButton.classList.add("recording");
              };

              that.stopButton.onclick = function() {
                console.log("stopping recorder");
                mediaRecorder.stop();
                that.bg.style.background = that.buttoncolor;
                that.startButton.classList.remove("recording");
              };

              var processData = function(e) {
                console.log("data available after recording");
                var audioURL = window.URL.createObjectURL(e.data);
                that.broadcast('clip', audioURL);
                mediaRecorder = new MediaRecorder(stream);
                mediaRecorder.ondataavailable = processData;
              };

              mediaRecorder.ondataavailable = processData;
            },

            function(err) { console.log('The following gUM error occured: ' + err); }
          );
        }
      }
    });
  </script>
</polymer-element>

<style>
  @font-face {
    font-family: 'FontAwesome';
    src: url(component-notebook/vendor/fonts/fontawesome-webfont.eot?v=4.0.3);
    src: url(component-notebook/vendor/fonts/fontawesome-webfont.eot?#iefix&v=4.0.3) format('embedded-opentype'), url(component-notebook/vendor/fonts/fontawesome-webfont.woff?v=4.0.3) format('woff'), url(component-notebook/vendor/fonts/fontawesome-webfont.ttf?v=4.0.3) format('truetype'), url(component-notebook/vendor/fonts/fontawesome-webfont.svg?v=4.0.3#fontawesomeregular) format('svg');
    font-weight: normal;
    font-style: normal;
  }
</style>
<script src="component-notebook/vendor/markdown/markdown.min.js"></script>

<polymer-element name="ceci-notebook" extends="ceci-element" attributes="backgroundcolor textcolor nameAttrb" backgroundcolor="#000000" textcolor="#ffffff" nameattrb="my notes" assetpath="component-notebook/">
  <template>
    <style>/*!
 *  Font Awesome 4.1.0 by @davegandy - http://fontawesome.io - @fontawesome
 *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)
 */@font-face{font-family:'FontAwesome';src:url(../fonts/fontawesome-webfont.eot?v=4.1.0);src:url(../fonts/fontawesome-webfont.eot?#iefix&v=4.1.0) format('embedded-opentype'),url(../fonts/fontawesome-webfont.woff?v=4.1.0) format('woff'),url(../fonts/fontawesome-webfont.ttf?v=4.1.0) format('truetype'),url(../fonts/fontawesome-webfont.svg?v=4.1.0#fontawesomeregular) format('svg');font-weight:normal;font-style:normal}.fa{display:inline-block;font-family:FontAwesome;font-style:normal;font-weight:normal;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.fa-lg{font-size:1.33333333em;line-height:.75em;vertical-align:-15%}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-fw{width:1.28571429em;text-align:center}.fa-ul{padding-left:0;margin-left:2.14285714em;list-style-type:none}.fa-ul>li{position:relative}.fa-li{position:absolute;left:-2.14285714em;width:2.14285714em;top:.14285714em;text-align:center}.fa-li.fa-lg{left:-1.85714286em}.fa-border{padding:.2em .25em .15em;border:solid .08em #eee;border-radius:.1em}.pull-right{float:right}.pull-left{float:left}.fa.pull-left{margin-right:.3em}.fa.pull-right{margin-left:.3em}.fa-spin{-webkit-animation:spin 2s infinite linear;-moz-animation:spin 2s infinite linear;-o-animation:spin 2s infinite linear;animation:spin 2s infinite linear}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg)}100%{-moz-transform:rotate(359deg)}}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg)}100%{-webkit-transform:rotate(359deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg)}100%{-o-transform:rotate(359deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.fa-rotate-90{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);-webkit-transform:rotate(90deg);-moz-transform:rotate(90deg);-ms-transform:rotate(90deg);-o-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2);-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=3);-webkit-transform:rotate(270deg);-moz-transform:rotate(270deg);-ms-transform:rotate(270deg);-o-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1);-webkit-transform:scale(-1, 1);-moz-transform:scale(-1, 1);-ms-transform:scale(-1, 1);-o-transform:scale(-1, 1);transform:scale(-1, 1)}.fa-flip-vertical{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1);-webkit-transform:scale(1, -1);-moz-transform:scale(1, -1);-ms-transform:scale(1, -1);-o-transform:scale(1, -1);transform:scale(1, -1)}.fa-stack{position:relative;display:inline-block;width:2em;height:2em;line-height:2em;vertical-align:middle}.fa-stack-1x,.fa-stack-2x{position:absolute;left:0;width:100%;text-align:center}.fa-stack-1x{line-height:inherit}.fa-stack-2x{font-size:2em}.fa-inverse{color:#fff}.fa-glass:before{content:"\f000"}.fa-music:before{content:"\f001"}.fa-search:before{content:"\f002"}.fa-envelope-o:before{content:"\f003"}.fa-heart:before{content:"\f004"}.fa-star:before{content:"\f005"}.fa-star-o:before{content:"\f006"}.fa-user:before{content:"\f007"}.fa-film:before{content:"\f008"}.fa-th-large:before{content:"\f009"}.fa-th:before{content:"\f00a"}.fa-th-list:before{content:"\f00b"}.fa-check:before{content:"\f00c"}.fa-times:before{content:"\f00d"}.fa-search-plus:before{content:"\f00e"}.fa-search-minus:before{content:"\f010"}.fa-power-off:before{content:"\f011"}.fa-signal:before{content:"\f012"}.fa-gear:before,.fa-cog:before{content:"\f013"}.fa-trash-o:before{content:"\f014"}.fa-home:before{content:"\f015"}.fa-file-o:before{content:"\f016"}.fa-clock-o:before{content:"\f017"}.fa-road:before{content:"\f018"}.fa-download:before{content:"\f019"}.fa-arrow-circle-o-down:before{content:"\f01a"}.fa-arrow-circle-o-up:before{content:"\f01b"}.fa-inbox:before{content:"\f01c"}.fa-play-circle-o:before{content:"\f01d"}.fa-rotate-right:before,.fa-repeat:before{content:"\f01e"}.fa-refresh:before{content:"\f021"}.fa-list-alt:before{content:"\f022"}.fa-lock:before{content:"\f023"}.fa-flag:before{content:"\f024"}.fa-headphones:before{content:"\f025"}.fa-volume-off:before{content:"\f026"}.fa-volume-down:before{content:"\f027"}.fa-volume-up:before{content:"\f028"}.fa-qrcode:before{content:"\f029"}.fa-barcode:before{content:"\f02a"}.fa-tag:before{content:"\f02b"}.fa-tags:before{content:"\f02c"}.fa-book:before{content:"\f02d"}.fa-bookmark:before{content:"\f02e"}.fa-print:before{content:"\f02f"}.fa-camera:before{content:"\f030"}.fa-font:before{content:"\f031"}.fa-bold:before{content:"\f032"}.fa-italic:before{content:"\f033"}.fa-text-height:before{content:"\f034"}.fa-text-width:before{content:"\f035"}.fa-align-left:before{content:"\f036"}.fa-align-center:before{content:"\f037"}.fa-align-right:before{content:"\f038"}.fa-align-justify:before{content:"\f039"}.fa-list:before{content:"\f03a"}.fa-dedent:before,.fa-outdent:before{content:"\f03b"}.fa-indent:before{content:"\f03c"}.fa-video-camera:before{content:"\f03d"}.fa-photo:before,.fa-image:before,.fa-picture-o:before{content:"\f03e"}.fa-pencil:before{content:"\f040"}.fa-map-marker:before{content:"\f041"}.fa-adjust:before{content:"\f042"}.fa-tint:before{content:"\f043"}.fa-edit:before,.fa-pencil-square-o:before{content:"\f044"}.fa-share-square-o:before{content:"\f045"}.fa-check-square-o:before{content:"\f046"}.fa-arrows:before{content:"\f047"}.fa-step-backward:before{content:"\f048"}.fa-fast-backward:before{content:"\f049"}.fa-backward:before{content:"\f04a"}.fa-play:before{content:"\f04b"}.fa-pause:before{content:"\f04c"}.fa-stop:before{content:"\f04d"}.fa-forward:before{content:"\f04e"}.fa-fast-forward:before{content:"\f050"}.fa-step-forward:before{content:"\f051"}.fa-eject:before{content:"\f052"}.fa-chevron-left:before{content:"\f053"}.fa-chevron-right:before{content:"\f054"}.fa-plus-circle:before{content:"\f055"}.fa-minus-circle:before{content:"\f056"}.fa-times-circle:before{content:"\f057"}.fa-check-circle:before{content:"\f058"}.fa-question-circle:before{content:"\f059"}.fa-info-circle:before{content:"\f05a"}.fa-crosshairs:before{content:"\f05b"}.fa-times-circle-o:before{content:"\f05c"}.fa-check-circle-o:before{content:"\f05d"}.fa-ban:before{content:"\f05e"}.fa-arrow-left:before{content:"\f060"}.fa-arrow-right:before{content:"\f061"}.fa-arrow-up:before{content:"\f062"}.fa-arrow-down:before{content:"\f063"}.fa-mail-forward:before,.fa-share:before{content:"\f064"}.fa-expand:before{content:"\f065"}.fa-compress:before{content:"\f066"}.fa-plus:before{content:"\f067"}.fa-minus:before{content:"\f068"}.fa-asterisk:before{content:"\f069"}.fa-exclamation-circle:before{content:"\f06a"}.fa-gift:before{content:"\f06b"}.fa-leaf:before{content:"\f06c"}.fa-fire:before{content:"\f06d"}.fa-eye:before{content:"\f06e"}.fa-eye-slash:before{content:"\f070"}.fa-warning:before,.fa-exclamation-triangle:before{content:"\f071"}.fa-plane:before{content:"\f072"}.fa-calendar:before{content:"\f073"}.fa-random:before{content:"\f074"}.fa-comment:before{content:"\f075"}.fa-magnet:before{content:"\f076"}.fa-chevron-up:before{content:"\f077"}.fa-chevron-down:before{content:"\f078"}.fa-retweet:before{content:"\f079"}.fa-shopping-cart:before{content:"\f07a"}.fa-folder:before{content:"\f07b"}.fa-folder-open:before{content:"\f07c"}.fa-arrows-v:before{content:"\f07d"}.fa-arrows-h:before{content:"\f07e"}.fa-bar-chart-o:before{content:"\f080"}.fa-twitter-square:before{content:"\f081"}.fa-facebook-square:before{content:"\f082"}.fa-camera-retro:before{content:"\f083"}.fa-key:before{content:"\f084"}.fa-gears:before,.fa-cogs:before{content:"\f085"}.fa-comments:before{content:"\f086"}.fa-thumbs-o-up:before{content:"\f087"}.fa-thumbs-o-down:before{content:"\f088"}.fa-star-half:before{content:"\f089"}.fa-heart-o:before{content:"\f08a"}.fa-sign-out:before{content:"\f08b"}.fa-linkedin-square:before{content:"\f08c"}.fa-thumb-tack:before{content:"\f08d"}.fa-external-link:before{content:"\f08e"}.fa-sign-in:before{content:"\f090"}.fa-trophy:before{content:"\f091"}.fa-github-square:before{content:"\f092"}.fa-upload:before{content:"\f093"}.fa-lemon-o:before{content:"\f094"}.fa-phone:before{content:"\f095"}.fa-square-o:before{content:"\f096"}.fa-bookmark-o:before{content:"\f097"}.fa-phone-square:before{content:"\f098"}.fa-twitter:before{content:"\f099"}.fa-facebook:before{content:"\f09a"}.fa-github:before{content:"\f09b"}.fa-unlock:before{content:"\f09c"}.fa-credit-card:before{content:"\f09d"}.fa-rss:before{content:"\f09e"}.fa-hdd-o:before{content:"\f0a0"}.fa-bullhorn:before{content:"\f0a1"}.fa-bell:before{content:"\f0f3"}.fa-certificate:before{content:"\f0a3"}.fa-hand-o-right:before{content:"\f0a4"}.fa-hand-o-left:before{content:"\f0a5"}.fa-hand-o-up:before{content:"\f0a6"}.fa-hand-o-down:before{content:"\f0a7"}.fa-arrow-circle-left:before{content:"\f0a8"}.fa-arrow-circle-right:before{content:"\f0a9"}.fa-arrow-circle-up:before{content:"\f0aa"}.fa-arrow-circle-down:before{content:"\f0ab"}.fa-globe:before{content:"\f0ac"}.fa-wrench:before{content:"\f0ad"}.fa-tasks:before{content:"\f0ae"}.fa-filter:before{content:"\f0b0"}.fa-briefcase:before{content:"\f0b1"}.fa-arrows-alt:before{content:"\f0b2"}.fa-group:before,.fa-users:before{content:"\f0c0"}.fa-chain:before,.fa-link:before{content:"\f0c1"}.fa-cloud:before{content:"\f0c2"}.fa-flask:before{content:"\f0c3"}.fa-cut:before,.fa-scissors:before{content:"\f0c4"}.fa-copy:before,.fa-files-o:before{content:"\f0c5"}.fa-paperclip:before{content:"\f0c6"}.fa-save:before,.fa-floppy-o:before{content:"\f0c7"}.fa-square:before{content:"\f0c8"}.fa-navicon:before,.fa-reorder:before,.fa-bars:before{content:"\f0c9"}.fa-list-ul:before{content:"\f0ca"}.fa-list-ol:before{content:"\f0cb"}.fa-strikethrough:before{content:"\f0cc"}.fa-underline:before{content:"\f0cd"}.fa-table:before{content:"\f0ce"}.fa-magic:before{content:"\f0d0"}.fa-truck:before{content:"\f0d1"}.fa-pinterest:before{content:"\f0d2"}.fa-pinterest-square:before{content:"\f0d3"}.fa-google-plus-square:before{content:"\f0d4"}.fa-google-plus:before{content:"\f0d5"}.fa-money:before{content:"\f0d6"}.fa-caret-down:before{content:"\f0d7"}.fa-caret-up:before{content:"\f0d8"}.fa-caret-left:before{content:"\f0d9"}.fa-caret-right:before{content:"\f0da"}.fa-columns:before{content:"\f0db"}.fa-unsorted:before,.fa-sort:before{content:"\f0dc"}.fa-sort-down:before,.fa-sort-desc:before{content:"\f0dd"}.fa-sort-up:before,.fa-sort-asc:before{content:"\f0de"}.fa-envelope:before{content:"\f0e0"}.fa-linkedin:before{content:"\f0e1"}.fa-rotate-left:before,.fa-undo:before{content:"\f0e2"}.fa-legal:before,.fa-gavel:before{content:"\f0e3"}.fa-dashboard:before,.fa-tachometer:before{content:"\f0e4"}.fa-comment-o:before{content:"\f0e5"}.fa-comments-o:before{content:"\f0e6"}.fa-flash:before,.fa-bolt:before{content:"\f0e7"}.fa-sitemap:before{content:"\f0e8"}.fa-umbrella:before{content:"\f0e9"}.fa-paste:before,.fa-clipboard:before{content:"\f0ea"}.fa-lightbulb-o:before{content:"\f0eb"}.fa-exchange:before{content:"\f0ec"}.fa-cloud-download:before{content:"\f0ed"}.fa-cloud-upload:before{content:"\f0ee"}.fa-user-md:before{content:"\f0f0"}.fa-stethoscope:before{content:"\f0f1"}.fa-suitcase:before{content:"\f0f2"}.fa-bell-o:before{content:"\f0a2"}.fa-coffee:before{content:"\f0f4"}.fa-cutlery:before{content:"\f0f5"}.fa-file-text-o:before{content:"\f0f6"}.fa-building-o:before{content:"\f0f7"}.fa-hospital-o:before{content:"\f0f8"}.fa-ambulance:before{content:"\f0f9"}.fa-medkit:before{content:"\f0fa"}.fa-fighter-jet:before{content:"\f0fb"}.fa-beer:before{content:"\f0fc"}.fa-h-square:before{content:"\f0fd"}.fa-plus-square:before{content:"\f0fe"}.fa-angle-double-left:before{content:"\f100"}.fa-angle-double-right:before{content:"\f101"}.fa-angle-double-up:before{content:"\f102"}.fa-angle-double-down:before{content:"\f103"}.fa-angle-left:before{content:"\f104"}.fa-angle-right:before{content:"\f105"}.fa-angle-up:before{content:"\f106"}.fa-angle-down:before{content:"\f107"}.fa-desktop:before{content:"\f108"}.fa-laptop:before{content:"\f109"}.fa-tablet:before{content:"\f10a"}.fa-mobile-phone:before,.fa-mobile:before{content:"\f10b"}.fa-circle-o:before{content:"\f10c"}.fa-quote-left:before{content:"\f10d"}.fa-quote-right:before{content:"\f10e"}.fa-spinner:before{content:"\f110"}.fa-circle:before{content:"\f111"}.fa-mail-reply:before,.fa-reply:before{content:"\f112"}.fa-github-alt:before{content:"\f113"}.fa-folder-o:before{content:"\f114"}.fa-folder-open-o:before{content:"\f115"}.fa-smile-o:before{content:"\f118"}.fa-frown-o:before{content:"\f119"}.fa-meh-o:before{content:"\f11a"}.fa-gamepad:before{content:"\f11b"}.fa-keyboard-o:before{content:"\f11c"}.fa-flag-o:before{content:"\f11d"}.fa-flag-checkered:before{content:"\f11e"}.fa-terminal:before{content:"\f120"}.fa-code:before{content:"\f121"}.fa-mail-reply-all:before,.fa-reply-all:before{content:"\f122"}.fa-star-half-empty:before,.fa-star-half-full:before,.fa-star-half-o:before{content:"\f123"}.fa-location-arrow:before{content:"\f124"}.fa-crop:before{content:"\f125"}.fa-code-fork:before{content:"\f126"}.fa-unlink:before,.fa-chain-broken:before{content:"\f127"}.fa-question:before{content:"\f128"}.fa-info:before{content:"\f129"}.fa-exclamation:before{content:"\f12a"}.fa-superscript:before{content:"\f12b"}.fa-subscript:before{content:"\f12c"}.fa-eraser:before{content:"\f12d"}.fa-puzzle-piece:before{content:"\f12e"}.fa-microphone:before{content:"\f130"}.fa-microphone-slash:before{content:"\f131"}.fa-shield:before{content:"\f132"}.fa-calendar-o:before{content:"\f133"}.fa-fire-extinguisher:before{content:"\f134"}.fa-rocket:before{content:"\f135"}.fa-maxcdn:before{content:"\f136"}.fa-chevron-circle-left:before{content:"\f137"}.fa-chevron-circle-right:before{content:"\f138"}.fa-chevron-circle-up:before{content:"\f139"}.fa-chevron-circle-down:before{content:"\f13a"}.fa-html5:before{content:"\f13b"}.fa-css3:before{content:"\f13c"}.fa-anchor:before{content:"\f13d"}.fa-unlock-alt:before{content:"\f13e"}.fa-bullseye:before{content:"\f140"}.fa-ellipsis-h:before{content:"\f141"}.fa-ellipsis-v:before{content:"\f142"}.fa-rss-square:before{content:"\f143"}.fa-play-circle:before{content:"\f144"}.fa-ticket:before{content:"\f145"}.fa-minus-square:before{content:"\f146"}.fa-minus-square-o:before{content:"\f147"}.fa-level-up:before{content:"\f148"}.fa-level-down:before{content:"\f149"}.fa-check-square:before{content:"\f14a"}.fa-pencil-square:before{content:"\f14b"}.fa-external-link-square:before{content:"\f14c"}.fa-share-square:before{content:"\f14d"}.fa-compass:before{content:"\f14e"}.fa-toggle-down:before,.fa-caret-square-o-down:before{content:"\f150"}.fa-toggle-up:before,.fa-caret-square-o-up:before{content:"\f151"}.fa-toggle-right:before,.fa-caret-square-o-right:before{content:"\f152"}.fa-euro:before,.fa-eur:before{content:"\f153"}.fa-gbp:before{content:"\f154"}.fa-dollar:before,.fa-usd:before{content:"\f155"}.fa-rupee:before,.fa-inr:before{content:"\f156"}.fa-cny:before,.fa-rmb:before,.fa-yen:before,.fa-jpy:before{content:"\f157"}.fa-ruble:before,.fa-rouble:before,.fa-rub:before{content:"\f158"}.fa-won:before,.fa-krw:before{content:"\f159"}.fa-bitcoin:before,.fa-btc:before{content:"\f15a"}.fa-file:before{content:"\f15b"}.fa-file-text:before{content:"\f15c"}.fa-sort-alpha-asc:before{content:"\f15d"}.fa-sort-alpha-desc:before{content:"\f15e"}.fa-sort-amount-asc:before{content:"\f160"}.fa-sort-amount-desc:before{content:"\f161"}.fa-sort-numeric-asc:before{content:"\f162"}.fa-sort-numeric-desc:before{content:"\f163"}.fa-thumbs-up:before{content:"\f164"}.fa-thumbs-down:before{content:"\f165"}.fa-youtube-square:before{content:"\f166"}.fa-youtube:before{content:"\f167"}.fa-xing:before{content:"\f168"}.fa-xing-square:before{content:"\f169"}.fa-youtube-play:before{content:"\f16a"}.fa-dropbox:before{content:"\f16b"}.fa-stack-overflow:before{content:"\f16c"}.fa-instagram:before{content:"\f16d"}.fa-flickr:before{content:"\f16e"}.fa-adn:before{content:"\f170"}.fa-bitbucket:before{content:"\f171"}.fa-bitbucket-square:before{content:"\f172"}.fa-tumblr:before{content:"\f173"}.fa-tumblr-square:before{content:"\f174"}.fa-long-arrow-down:before{content:"\f175"}.fa-long-arrow-up:before{content:"\f176"}.fa-long-arrow-left:before{content:"\f177"}.fa-long-arrow-right:before{content:"\f178"}.fa-apple:before{content:"\f179"}.fa-windows:before{content:"\f17a"}.fa-android:before{content:"\f17b"}.fa-linux:before{content:"\f17c"}.fa-dribbble:before{content:"\f17d"}.fa-skype:before{content:"\f17e"}.fa-foursquare:before{content:"\f180"}.fa-trello:before{content:"\f181"}.fa-female:before{content:"\f182"}.fa-male:before{content:"\f183"}.fa-gittip:before{content:"\f184"}.fa-sun-o:before{content:"\f185"}.fa-moon-o:before{content:"\f186"}.fa-archive:before{content:"\f187"}.fa-bug:before{content:"\f188"}.fa-vk:before{content:"\f189"}.fa-weibo:before{content:"\f18a"}.fa-renren:before{content:"\f18b"}.fa-pagelines:before{content:"\f18c"}.fa-stack-exchange:before{content:"\f18d"}.fa-arrow-circle-o-right:before{content:"\f18e"}.fa-arrow-circle-o-left:before{content:"\f190"}.fa-toggle-left:before,.fa-caret-square-o-left:before{content:"\f191"}.fa-dot-circle-o:before{content:"\f192"}.fa-wheelchair:before{content:"\f193"}.fa-vimeo-square:before{content:"\f194"}.fa-turkish-lira:before,.fa-try:before{content:"\f195"}.fa-plus-square-o:before{content:"\f196"}.fa-space-shuttle:before{content:"\f197"}.fa-slack:before{content:"\f198"}.fa-envelope-square:before{content:"\f199"}.fa-wordpress:before{content:"\f19a"}.fa-openid:before{content:"\f19b"}.fa-institution:before,.fa-bank:before,.fa-university:before{content:"\f19c"}.fa-mortar-board:before,.fa-graduation-cap:before{content:"\f19d"}.fa-yahoo:before{content:"\f19e"}.fa-google:before{content:"\f1a0"}.fa-reddit:before{content:"\f1a1"}.fa-reddit-square:before{content:"\f1a2"}.fa-stumbleupon-circle:before{content:"\f1a3"}.fa-stumbleupon:before{content:"\f1a4"}.fa-delicious:before{content:"\f1a5"}.fa-digg:before{content:"\f1a6"}.fa-pied-piper-square:before,.fa-pied-piper:before{content:"\f1a7"}.fa-pied-piper-alt:before{content:"\f1a8"}.fa-drupal:before{content:"\f1a9"}.fa-joomla:before{content:"\f1aa"}.fa-language:before{content:"\f1ab"}.fa-fax:before{content:"\f1ac"}.fa-building:before{content:"\f1ad"}.fa-child:before{content:"\f1ae"}.fa-paw:before{content:"\f1b0"}.fa-spoon:before{content:"\f1b1"}.fa-cube:before{content:"\f1b2"}.fa-cubes:before{content:"\f1b3"}.fa-behance:before{content:"\f1b4"}.fa-behance-square:before{content:"\f1b5"}.fa-steam:before{content:"\f1b6"}.fa-steam-square:before{content:"\f1b7"}.fa-recycle:before{content:"\f1b8"}.fa-automobile:before,.fa-car:before{content:"\f1b9"}.fa-cab:before,.fa-taxi:before{content:"\f1ba"}.fa-tree:before{content:"\f1bb"}.fa-spotify:before{content:"\f1bc"}.fa-deviantart:before{content:"\f1bd"}.fa-soundcloud:before{content:"\f1be"}.fa-database:before{content:"\f1c0"}.fa-file-pdf-o:before{content:"\f1c1"}.fa-file-word-o:before{content:"\f1c2"}.fa-file-excel-o:before{content:"\f1c3"}.fa-file-powerpoint-o:before{content:"\f1c4"}.fa-file-photo-o:before,.fa-file-picture-o:before,.fa-file-image-o:before{content:"\f1c5"}.fa-file-zip-o:before,.fa-file-archive-o:before{content:"\f1c6"}.fa-file-sound-o:before,.fa-file-audio-o:before{content:"\f1c7"}.fa-file-movie-o:before,.fa-file-video-o:before{content:"\f1c8"}.fa-file-code-o:before{content:"\f1c9"}.fa-vine:before{content:"\f1ca"}.fa-codepen:before{content:"\f1cb"}.fa-jsfiddle:before{content:"\f1cc"}.fa-life-bouy:before,.fa-life-saver:before,.fa-support:before,.fa-life-ring:before{content:"\f1cd"}.fa-circle-o-notch:before{content:"\f1ce"}.fa-ra:before,.fa-rebel:before{content:"\f1d0"}.fa-ge:before,.fa-empire:before{content:"\f1d1"}.fa-git-square:before{content:"\f1d2"}.fa-git:before{content:"\f1d3"}.fa-hacker-news:before{content:"\f1d4"}.fa-tencent-weibo:before{content:"\f1d5"}.fa-qq:before{content:"\f1d6"}.fa-wechat:before,.fa-weixin:before{content:"\f1d7"}.fa-send:before,.fa-paper-plane:before{content:"\f1d8"}.fa-send-o:before,.fa-paper-plane-o:before{content:"\f1d9"}.fa-history:before{content:"\f1da"}.fa-circle-thin:before{content:"\f1db"}.fa-header:before{content:"\f1dc"}.fa-paragraph:before{content:"\f1dd"}.fa-sliders:before{content:"\f1de"}.fa-share-alt:before{content:"\f1e0"}.fa-share-alt-square:before{content:"\f1e1"}.fa-bomb:before{content:"\f1e2"}</style>
    <style>:host {
  display: block;
  width: 100%;
  padding: 10px;
  text-align: center;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

:host .header {
  display: block;
  position: relative;
  margin-bottom: .5em;
}

:host .header .name {
  text-align: left;
}
:host .header .headerbutton {
  position: absolute;
  margin: .2em;
  min-width: 1.2em;
  top: -.2em;
  cursor: pointer;
  -moz-user-select: none;
  user-select: none;
  border-radius: 3px;
}

:host .kitten {
  content:url(img/kitten.jpg);
}

:host .header .headerbutton:hover {
  color: black;
  background: white;
}

:host .header .trash {
  right: 13.5em;
}

:host .header .prev {
  right: 11em;
}

:host .header .next {
  right: 8.5em;
}

:host .header .add {
  right: 6em;
}
:host .header .text {
  right: 3.5em;
}
:host .header .camera {
  right: 1em;
}
:host .pages {
  width: 100%;
  min-height: 20em;
  overflow: hidden;
}

:host .page {
  width: 100%;
  min-height: 20em;
  display:block;
  list-style: none;
  text-align: left;
  background: white;
  color: black;
  border: 2px solid "#555";
}

:host .page ul {
  margin: 0;
  padding: 0;
}

:host .page li {
  background: white;
  list-style: none;
  padding-bottom: .5em;
  padding-left: 1em;
  padding-top: .5em;
  padding-right: 1em;
  border-top: 1px solid #ccc;
}

:host .page li p {
  margin: 0;
  margin-top: .5em;
}
:host .page li h1 {
  margin: 0;
}


/*
:host .pages .page {
  display: none;
}

:host .pages .page.current {
  display: block;
}
*/

:host .pt-perspective {
	position: relative;
	width: 100%;
	height: 100%;
	-webkit-perspective: 1200px;
	-moz-perspective: 1200px;
	perspective: 1200px;
}

:host .pt-page {
	width: 100%;
	height: 100%;
	position: absolute;
	top: 0;
	left: 0;
	visibility: hidden;
	overflow: hidden;
	-webkit-backface-visibility: hidden;
	-moz-backface-visibility: hidden;
	backface-visibility: hidden;
	-webkit-transform: translate3d(0, 0, 0);
	-moz-transform: translate3d(0, 0, 0);
	transform: translate3d(0, 0, 0);
	-webkit-transform-style: preserve-3d;
	-moz-transform-style: preserve-3d;
	transform-style: preserve-3d;
}

:host .pt-page-current,
:host .no-js .pt-page {
	visibility: visible;
	z-index: 1;
}

:host .no-js body {
	overflow: auto;
}

:host .pt-page-ontop {
	z-index: 999;
}

/* Triggers (menu and button) */

:host .pt-triggers {
	position: absolute;
	width: 300px;
	z-index: 999999;
	top: 12%;
	left: 50%;
	margin-top: 130px;
	-webkit-transform: translateX(-50%);
	-moz-transform: translateX(-50%);
	-ms-transform: translateX(-50%); 
	transform: translateX(-50%);
}

:host .no-js .pt-triggers {
	display: none;
}

:host .pt-triggers .dl-menuwrapper button,
:host .pt-touch-button {
	border: none;
	font-size: 13px;
	font-weight: 700;
	text-transform: uppercase;
	margin: 10px 0 20px;
	padding: 0px 20px;
	line-height: 50px;
	height: 50px;
	letter-spacing: 1px;
	width: 100%;
	cursor: pointer;
	display: block;
	font-family: 'Lato', Calibri, Arial, sans-serif;
	box-shadow: 0 3px 0 rgba(0,0,0,0.1);
	-webkit-touch-callout: none;
	-webkit-user-select: none;
	-khtml-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
}

:host .pt-touch-button {
	background: #fff;
	color: #aaa;
}

:host .pt-triggers .dl-menuwrapper button {
	margin-bottom: 0;
}

:host .pt-touch-button:active {
	box-shadow: 0 1px 0 rgba(0,0,0,0.1);
}

:host .touch .pt-triggers .dl-menuwrapper {
	display: none;
}

:host .pt-message {
	display: none;
	position: absolute;
	z-index: 99999;
	bottom: 0;
	left: 0;
	width: 100%;
	background: #da475c;
	color: #fff;
	text-align: center;
}

:host .pt-message p {
	margin: 0;
	line-height: 60px;
	font-size: 26px;
}

:host .no-cssanimations .pt-message {
	display: block;
}

@media screen and (max-width: 47.4375em) {
	:host .pt-triggers .dl-menuwrapper {
		display: none;
	}
}

@media screen and (max-height: 45.9em) {
	:host .pt-triggers .dl-menuwrapper li a {
		padding-top: 2px;
		padding-bottom: 2px;
	}
	:host .pt-triggers .dl-menuwrapper li.dl-back:after, .dl-menuwrapper li > a:not(:only-child):after {
		line-height: 24px;
	}
}

@media screen and (max-height: 38em) { 
	:host .pt-triggers .dl-menuwrapper {
		display: none;
	}
}

/* animation sets */

/* move from / to  */

:host .pt-page-moveToLeft {
	-webkit-animation: moveToLeft .6s ease both;
	animation: moveToLeft .6s ease both;
}

.pt-page-moveFromLeft {
	-webkit-animation: moveFromLeft .6s ease both;
	animation: moveFromLeft .6s ease both;
}

.pt-page-moveToRight {
	-webkit-animation: moveToRight .6s ease both;
	animation: moveToRight .6s ease both;
}

:host .pt-page-moveFromRight {
	-webkit-animation: moveFromRight .6s ease both;
	animation: moveFromRight .6s ease both;
}

.pt-page-moveToTop {
	-webkit-animation: moveToTop .6s ease both;
	animation: moveToTop .6s ease both;
}

.pt-page-moveFromTop {
	-webkit-animation: moveFromTop .6s ease both;
	animation: moveFromTop .6s ease both;
}

.pt-page-moveToBottom {
	-webkit-animation: moveToBottom .6s ease both;
	animation: moveToBottom .6s ease both;
}

.pt-page-moveFromBottom {
	-webkit-animation: moveFromBottom .6s ease both;
	animation: moveFromBottom .6s ease both;
}

/* fade */

.pt-page-fade {
	-webkit-animation: fade .7s ease both;
	animation: fade .7s ease both;
}

/* move from / to and fade */

.pt-page-moveToLeftFade {
	-webkit-animation: moveToLeftFade .7s ease both;
	animation: moveToLeftFade .7s ease both;
}

.pt-page-moveFromLeftFade {
	-webkit-animation: moveFromLeftFade .7s ease both;
	animation: moveFromLeftFade .7s ease both;
}

.pt-page-moveToRightFade {
	-webkit-animation: moveToRightFade .7s ease both;
	animation: moveToRightFade .7s ease both;
}

.pt-page-moveFromRightFade {
	-webkit-animation: moveFromRightFade .7s ease both;
	animation: moveFromRightFade .7s ease both;
}

.pt-page-moveToTopFade {
	-webkit-animation: moveToTopFade .7s ease both;
	animation: moveToTopFade .7s ease both;
}

.pt-page-moveFromTopFade {
	-webkit-animation: moveFromTopFade .7s ease both;
	animation: moveFromTopFade .7s ease both;
}

.pt-page-moveToBottomFade {
	-webkit-animation: moveToBottomFade .7s ease both;
	animation: moveToBottomFade .7s ease both;
}

.pt-page-moveFromBottomFade {
	-webkit-animation: moveFromBottomFade .7s ease both;
	animation: moveFromBottomFade .7s ease both;
}

/* move to with different easing */

.pt-page-moveToLeftEasing {
	-webkit-animation: moveToLeft .7s ease-in-out both;
	animation: moveToLeft .7s ease-in-out both;
}
.pt-page-moveToRightEasing {
	-webkit-animation: moveToRight .7s ease-in-out both;
	animation: moveToRight .7s ease-in-out both;
}
.pt-page-moveToTopEasing {
	-webkit-animation: moveToTop .7s ease-in-out both;
	animation: moveToTop .7s ease-in-out both;
}
.pt-page-moveToBottomEasing {
	-webkit-animation: moveToBottom .7s ease-in-out both;
	animation: moveToBottom .7s ease-in-out both;
}

/********************************* keyframes **************************************/

/* move from / to  */

@-webkit-keyframes moveToLeft {
	from { }
	to { -webkit-transform: translateX(-100%); }
}
@keyframes moveToLeft {
	from { }
	to { -webkit-transform: translateX(-100%); transform: translateX(-100%); }
}

@-webkit-keyframes moveFromLeft {
	from { -webkit-transform: translateX(-100%); }
}
@keyframes moveFromLeft {
	from { -webkit-transform: translateX(-100%); transform: translateX(-100%); }
}

@-webkit-keyframes moveToRight { 
	from { }
	to { -webkit-transform: translateX(100%); }
}
@keyframes moveToRight { 
	from { }
	to { -webkit-transform: translateX(100%); transform: translateX(100%); }
}

@-webkit-keyframes moveFromRight {
	from { -webkit-transform: translateX(100%); }
}
@keyframes moveFromRight {
	from { -webkit-transform: translateX(100%); transform: translateX(100%); }
}

@-webkit-keyframes moveToTop {
	from { }
	to { -webkit-transform: translateY(-100%); }
}
@keyframes moveToTop {
	from { }
	to { -webkit-transform: translateY(-100%); transform: translateY(-100%); }
}

@-webkit-keyframes moveFromTop {
	from { -webkit-transform: translateY(-100%); }
}
@keyframes moveFromTop {
	from { -webkit-transform: translateY(-100%); transform: translateY(-100%); }
}

@-webkit-keyframes moveToBottom {
	from { }
	to { -webkit-transform: translateY(100%); }
}
@keyframes moveToBottom {
	from { }
	to { -webkit-transform: translateY(100%); transform: translateY(100%); }
}

@-webkit-keyframes moveFromBottom {
	from { -webkit-transform: translateY(100%); }
}
@keyframes moveFromBottom {
	from { -webkit-transform: translateY(100%); transform: translateY(100%); }
}

/* fade */

@-webkit-keyframes fade {
	from { }
	to { opacity: 0.3; }
}
@keyframes fade {
	from { }
	to { opacity: 0.3; }
}

/* move from / to and fade */

@-webkit-keyframes moveToLeftFade {
	from { }
	to { opacity: 0.3; -webkit-transform: translateX(-100%); }
}
@keyframes moveToLeftFade {
	from { }
	to { opacity: 0.3; -webkit-transform: translateX(-100%); transform: translateX(-100%); }
}

@-webkit-keyframes moveFromLeftFade {
	from { opacity: 0.3; -webkit-transform: translateX(-100%); }
}
@keyframes moveFromLeftFade {
	from { opacity: 0.3; -webkit-transform: translateX(-100%); transform: translateX(-100%); }
}

@-webkit-keyframes moveToRightFade {
	from { }
	to { opacity: 0.3; -webkit-transform: translateX(100%); }
}
@keyframes moveToRightFade {
	from { }
	to { opacity: 0.3; -webkit-transform: translateX(100%); transform: translateX(100%); }
}

@-webkit-keyframes moveFromRightFade {
	from { opacity: 0.3; -webkit-transform: translateX(100%); }
}
@keyframes moveFromRightFade {
	from { opacity: 0.3; -webkit-transform: translateX(100%); transform: translateX(100%); }
}

@-webkit-keyframes moveToTopFade {
	from { }
	to { opacity: 0.3; -webkit-transform: translateY(-100%); }
}
@keyframes moveToTopFade {
	from { }
	to { opacity: 0.3; -webkit-transform: translateY(-100%); transform: translateY(-100%); }
}

@-webkit-keyframes moveFromTopFade {
	from { opacity: 0.3; -webkit-transform: translateY(-100%); }
}
@keyframes moveFromTopFade {
	from { opacity: 0.3; -webkit-transform: translateY(-100%); transform: translateY(-100%); }
}

@-webkit-keyframes moveToBottomFade {
	from { }
	to { opacity: 0.3; -webkit-transform: translateY(100%); }
}
@keyframes moveToBottomFade {
	from { }
	to { opacity: 0.3; -webkit-transform: translateY(100%); transform: translateY(100%); }
}

@-webkit-keyframes moveFromBottomFade {
	from { opacity: 0.3; -webkit-transform: translateY(100%); }
}
@keyframes moveFromBottomFade {
	from { opacity: 0.3; -webkit-transform: translateY(100%); transform: translateY(100%); }
}

/* scale and fade */

.pt-page-scaleDown {
	-webkit-animation: scaleDown .7s ease both;
	animation: scaleDown .7s ease both;
}

.pt-page-scaleUp {
	-webkit-animation: scaleUp .7s ease both;
	animation: scaleUp .7s ease both;
}

.pt-page-scaleUpDown {
	-webkit-animation: scaleUpDown .5s ease both;
	animation: scaleUpDown .5s ease both;
}

.pt-page-scaleDownUp {
	-webkit-animation: scaleDownUp .5s ease both;
	animation: scaleDownUp .5s ease both;
}

.pt-page-scaleDownCenter {
	-webkit-animation: scaleDownCenter .4s ease-in both;
	animation: scaleDownCenter .4s ease-in both;
}

.pt-page-scaleUpCenter {
	-webkit-animation: scaleUpCenter .4s ease-out both;
	animation: scaleUpCenter .4s ease-out both;
}

/********************************* keyframes **************************************/

/* scale and fade */

@-webkit-keyframes scaleDown {
	from { }
	to { opacity: 0; -webkit-transform: scale(.8); }
}
@keyframes scaleDown {
	from { }
	to { opacity: 0; -webkit-transform: scale(.8); transform: scale(.8); }
}

@-webkit-keyframes scaleUp {
	from { opacity: 0; -webkit-transform: scale(.8); }
}
@keyframes scaleUp {
	from { opacity: 0; -webkit-transform: scale(.8); transform: scale(.8); }
}

@-webkit-keyframes scaleUpDown {
	from { opacity: 0; -webkit-transform: scale(1.2); }
}
@keyframes scaleUpDown {
	from { opacity: 0; -webkit-transform: scale(1.2); transform: scale(1.2); }
}

@-webkit-keyframes scaleDownUp {
	from { }
	to { opacity: 0; -webkit-transform: scale(1.2); }
}
@keyframes scaleDownUp {
	from { }
	to { opacity: 0; -webkit-transform: scale(1.2); transform: scale(1.2); }
}

@-webkit-keyframes scaleDownCenter {
	from { }
	to { opacity: 0; -webkit-transform: scale(.7); }
}
@keyframes scaleDownCenter {
	from { }
	to { opacity: 0; -webkit-transform: scale(.7); transform: scale(.7); }
}

@-webkit-keyframes scaleUpCenter {
	from { opacity: 0; -webkit-transform: scale(.7); }
}
@keyframes scaleUpCenter {
	from { opacity: 0; -webkit-transform: scale(.7); transform: scale(.7); }
}

/* rotate sides first and scale */

.pt-page-rotateRightSideFirst {
	-webkit-transform-origin: 0% 50%;
	transform-origin: 0% 50%;
	-webkit-animation: rotateRightSideFirst .8s both ease-in;
	animation: rotateRightSideFirst .8s both ease-in;
}
.pt-page-rotateLeftSideFirst {
	-webkit-transform-origin: 100% 50%;
	transform-origin: 100% 50%;
	-webkit-animation: rotateLeftSideFirst .8s both ease-in;
	animation: rotateLeftSideFirst .8s both ease-in;
}
.pt-page-rotateTopSideFirst {
	-webkit-transform-origin: 50% 100%;
	transform-origin: 50% 100%;
	-webkit-animation: rotateTopSideFirst .8s both ease-in;
	animation: rotateTopSideFirst .8s both ease-in;
}
.pt-page-rotateBottomSideFirst {
	-webkit-transform-origin: 50% 0%;
	transform-origin: 50% 0%;
	-webkit-animation: rotateBottomSideFirst .8s both ease-in;
	animation: rotateBottomSideFirst .8s both ease-in;
}

/* flip */

.pt-page-flipOutRight {
	-webkit-transform-origin: 50% 50%;
	transform-origin: 50% 50%;
	-webkit-animation: flipOutRight .5s both ease-in;
	animation: flipOutRight .5s both ease-in;
}
.pt-page-flipInLeft {
	-webkit-transform-origin: 50% 50%;
	transform-origin: 50% 50%;
	-webkit-animation: flipInLeft .5s both ease-out;
	animation: flipInLeft .5s both ease-out;
}
.pt-page-flipOutLeft {
	-webkit-transform-origin: 50% 50%;
	transform-origin: 50% 50%;
	-webkit-animation: flipOutLeft .5s both ease-in;
	animation: flipOutLeft .5s both ease-in;
}
.pt-page-flipInRight {
	-webkit-transform-origin: 50% 50%;
	transform-origin: 50% 50%;
	-webkit-animation: flipInRight .5s both ease-out;
	animation: flipInRight .5s both ease-out;
}
.pt-page-flipOutTop {
	-webkit-transform-origin: 50% 50%;
	transform-origin: 50% 50%;
	-webkit-animation: flipOutTop .5s both ease-in;
	animation: flipOutTop .5s both ease-in;
}
.pt-page-flipInBottom {
	-webkit-transform-origin: 50% 50%;
	transform-origin: 50% 50%;
	-webkit-animation: flipInBottom .5s both ease-out;
	animation: flipInBottom .5s both ease-out;
}
.pt-page-flipOutBottom {
	-webkit-transform-origin: 50% 50%;
	transform-origin: 50% 50%;
	-webkit-animation: flipOutBottom .5s both ease-in;
	animation: flipOutBottom .5s both ease-in;
}
.pt-page-flipInTop {
	-webkit-transform-origin: 50% 50%;
	transform-origin: 50% 50%;
	-webkit-animation: flipInTop .5s both ease-out;
	animation: flipInTop .5s both ease-out;
}

/* rotate fall */

.pt-page-rotateFall {
	-webkit-transform-origin: 0% 0%;
	transform-origin: 0% 0%;
	-webkit-animation: rotateFall 1s both ease-in;
	animation: rotateFall 1s both ease-in;
}

/* rotate newspaper */
.pt-page-rotateOutNewspaper {
	-webkit-transform-origin: 50% 50%;
	transform-origin: 50% 50%;
	-webkit-animation: rotateOutNewspaper .5s both ease-in;
	animation: rotateOutNewspaper .5s both ease-in;
}
.pt-page-rotateInNewspaper {
	-webkit-transform-origin: 50% 50%;
	transform-origin: 50% 50%;
	-webkit-animation: rotateInNewspaper .5s both ease-out;
	animation: rotateInNewspaper .5s both ease-out;
}

/* push */
.pt-page-rotatePushLeft {
	-webkit-transform-origin: 0% 50%;
	transform-origin: 0% 50%;
	-webkit-animation: rotatePushLeft .8s both ease;
	animation: rotatePushLeft .8s both ease;
}
.pt-page-rotatePushRight {
	-webkit-transform-origin: 100% 50%;
	transform-origin: 100% 50%;
	-webkit-animation: rotatePushRight .8s both ease;
	animation: rotatePushRight .8s both ease;
}
.pt-page-rotatePushTop {
	-webkit-transform-origin: 50% 0%;
	transform-origin: 50% 0%;
	-webkit-animation: rotatePushTop .8s both ease;
	animation: rotatePushTop .8s both ease;
}
.pt-page-rotatePushBottom {
	-webkit-transform-origin: 50% 100%;
	transform-origin: 50% 100%;
	-webkit-animation: rotatePushBottom .8s both ease;
	animation: rotatePushBottom .8s both ease;
}

/* pull */
.pt-page-rotatePullRight {
	-webkit-transform-origin: 100% 50%;
	transform-origin: 100% 50%;
	-webkit-animation: rotatePullRight .5s both ease;
	animation: rotatePullRight .5s both ease;
}
.pt-page-rotatePullLeft {
	-webkit-transform-origin: 0% 50%;
	transform-origin: 0% 50%;
	-webkit-animation: rotatePullLeft .5s both ease;
	animation: rotatePullLeft .5s both ease;
}
.pt-page-rotatePullTop {
	-webkit-transform-origin: 50% 0%;
	transform-origin: 50% 0%;
	-webkit-animation: rotatePullTop .5s both ease;
	animation: rotatePullTop .5s both ease;
}
.pt-page-rotatePullBottom {
	-webkit-transform-origin: 50% 100%;
	transform-origin: 50% 100%;
	-webkit-animation: rotatePullBottom .5s both ease;
	animation: rotatePullBottom .5s both ease;
}

/* fold */
.pt-page-rotateFoldRight {
	-webkit-transform-origin: 0% 50%;
	transform-origin: 0% 50%;
	-webkit-animation: rotateFoldRight .7s both ease;
	animation: rotateFoldRight .7s both ease;
}
.pt-page-rotateFoldLeft {
	-webkit-transform-origin: 100% 50%;
	transform-origin: 100% 50%;
	-webkit-animation: rotateFoldLeft .7s both ease;
	animation: rotateFoldLeft .7s both ease;
}
.pt-page-rotateFoldTop {
	-webkit-transform-origin: 50% 100%;
	transform-origin: 50% 100%;
	-webkit-animation: rotateFoldTop .7s both ease;
	animation: rotateFoldTop .7s both ease;
}
.pt-page-rotateFoldBottom {
	-webkit-transform-origin: 50% 0%;
	transform-origin: 50% 0%;
	-webkit-animation: rotateFoldBottom .7s both ease;
	animation: rotateFoldBottom .7s both ease;
}

/* unfold */
.pt-page-rotateUnfoldLeft {
	-webkit-transform-origin: 100% 50%;
	transform-origin: 100% 50%;
	-webkit-animation: rotateUnfoldLeft .7s both ease;
	animation: rotateUnfoldLeft .7s both ease;
}
.pt-page-rotateUnfoldRight {
	-webkit-transform-origin: 0% 50%;
	transform-origin: 0% 50%;
	-webkit-animation: rotateUnfoldRight .7s both ease;
	animation: rotateUnfoldRight .7s both ease;
}
.pt-page-rotateUnfoldTop {
	-webkit-transform-origin: 50% 100%;
	transform-origin: 50% 100%;
	-webkit-animation: rotateUnfoldTop .7s both ease;
	animation: rotateUnfoldTop .7s both ease;
}
.pt-page-rotateUnfoldBottom {
	-webkit-transform-origin: 50% 0%;
	transform-origin: 50% 0%;
	-webkit-animation: rotateUnfoldBottom .7s both ease;
	animation: rotateUnfoldBottom .7s both ease;
}

/* room walls */
.pt-page-rotateRoomLeftOut {
	-webkit-transform-origin: 100% 50%;
	transform-origin: 100% 50%;
	-webkit-animation: rotateRoomLeftOut .8s both ease;
	animation: rotateRoomLeftOut .8s both ease;
}
.pt-page-rotateRoomLeftIn {
	-webkit-transform-origin: 0% 50%;
	transform-origin: 0% 50%;
	-webkit-animation: rotateRoomLeftIn .8s both ease;
	animation: rotateRoomLeftIn .8s both ease;
}
.pt-page-rotateRoomRightOut {
	-webkit-transform-origin: 0% 50%;
	transform-origin: 0% 50%;
	-webkit-animation: rotateRoomRightOut .8s both ease;
	animation: rotateRoomRightOut .8s both ease;
}
.pt-page-rotateRoomRightIn {
	-webkit-transform-origin: 100% 50%;
	transform-origin: 100% 50%;
	-webkit-animation: rotateRoomRightIn .8s both ease;
	animation: rotateRoomRightIn .8s both ease;
}
.pt-page-rotateRoomTopOut {
	-webkit-transform-origin: 50% 100%;
	transform-origin: 50% 100%;
	-webkit-animation: rotateRoomTopOut .8s both ease;
	animation: rotateRoomTopOut .8s both ease;
}
.pt-page-rotateRoomTopIn {
	-webkit-transform-origin: 50% 0%;
	transform-origin: 50% 0%;
	-webkit-animation: rotateRoomTopIn .8s both ease;
	animation: rotateRoomTopIn .8s both ease;
}
.pt-page-rotateRoomBottomOut {
	-webkit-transform-origin: 50% 0%;
	transform-origin: 50% 0%;
	-webkit-animation: rotateRoomBottomOut .8s both ease;
	animation: rotateRoomBottomOut .8s both ease;
}
.pt-page-rotateRoomBottomIn {
	-webkit-transform-origin: 50% 100%;
	transform-origin: 50% 100%;
	-webkit-animation: rotateRoomBottomIn .8s both ease;
	animation: rotateRoomBottomIn .8s both ease;
}

/* cube */
.pt-page-rotateCubeLeftOut {
	-webkit-transform-origin: 100% 50%;
	transform-origin: 100% 50%;
	-webkit-animation: rotateCubeLeftOut .6s both ease-in;
	animation: rotateCubeLeftOut .6s both ease-in;
}
.pt-page-rotateCubeLeftIn {
	-webkit-transform-origin: 0% 50%;
	transform-origin: 0% 50%;
	-webkit-animation: rotateCubeLeftIn .6s both ease-in;
	animation: rotateCubeLeftIn .6s both ease-in;
}
.pt-page-rotateCubeRightOut {
	-webkit-transform-origin: 0% 50%;
	transform-origin: 0% 50%;
	-webkit-animation: rotateCubeRightOut .6s both ease-in;
	animation: rotateCubeRightOut .6s both ease-in;
}
.pt-page-rotateCubeRightIn {
	-webkit-transform-origin: 100% 50%;
	transform-origin: 100% 50%;
	-webkit-animation: rotateCubeRightIn .6s both ease-in;
	animation: rotateCubeRightIn .6s both ease-in;
}
.pt-page-rotateCubeTopOut {
	-webkit-transform-origin: 50% 100%;
	transform-origin: 50% 100%;
	-webkit-animation: rotateCubeTopOut .6s both ease-in;
	animation: rotateCubeTopOut .6s both ease-in;
}
.pt-page-rotateCubeTopIn {
	-webkit-transform-origin: 50% 0%;
	transform-origin: 50% 0%;
	-webkit-animation: rotateCubeTopIn .6s both ease-in;
	animation: rotateCubeTopIn .6s both ease-in;
}
.pt-page-rotateCubeBottomOut {
	-webkit-transform-origin: 50% 0%;
	transform-origin: 50% 0%;
	-webkit-animation: rotateCubeBottomOut .6s both ease-in;
	animation: rotateCubeBottomOut .6s both ease-in;
}
.pt-page-rotateCubeBottomIn {
	-webkit-transform-origin: 50% 100%;
	transform-origin: 50% 100%;
	-webkit-animation: rotateCubeBottomIn .6s both ease-in;
	animation: rotateCubeBottomIn .6s both ease-in;
}

/* carousel */
.pt-page-rotateCarouselLeftOut {
	-webkit-transform-origin: 100% 50%;
	transform-origin: 100% 50%;
	-webkit-animation: rotateCarouselLeftOut .8s both ease;
	animation: rotateCarouselLeftOut .8s both ease;
}
.pt-page-rotateCarouselLeftIn {
	-webkit-transform-origin: 0% 50%;
	transform-origin: 0% 50%;
	-webkit-animation: rotateCarouselLeftIn .8s both ease;
	animation: rotateCarouselLeftIn .8s both ease;
}
.pt-page-rotateCarouselRightOut {
	-webkit-transform-origin: 0% 50%;
	transform-origin: 0% 50%;
	-webkit-animation: rotateCarouselRightOut .8s both ease;
	animation: rotateCarouselRightOut .8s both ease;
}
.pt-page-rotateCarouselRightIn {
	-webkit-transform-origin: 100% 50%;
	transform-origin: 100% 50%;
	-webkit-animation: rotateCarouselRightIn .8s both ease;
	animation: rotateCarouselRightIn .8s both ease;
}
.pt-page-rotateCarouselTopOut {
	-webkit-transform-origin: 50% 100%;
	transform-origin: 50% 100%;
	-webkit-animation: rotateCarouselTopOut .8s both ease;
	animation: rotateCarouselTopOut .8s both ease;
}
.pt-page-rotateCarouselTopIn {
	-webkit-transform-origin: 50% 0%;
	transform-origin: 50% 0%;
	-webkit-animation: rotateCarouselTopIn .8s both ease;
	animation: rotateCarouselTopIn .8s both ease;
}
.pt-page-rotateCarouselBottomOut {
	-webkit-transform-origin: 50% 0%;
	transform-origin: 50% 0%;
	-webkit-animation: rotateCarouselBottomOut .8s both ease;
	animation: rotateCarouselBottomOut .8s both ease;
}
.pt-page-rotateCarouselBottomIn {
	-webkit-transform-origin: 50% 100%;
	transform-origin: 50% 100%;
	-webkit-animation: rotateCarouselBottomIn .8s both ease;
	animation: rotateCarouselBottomIn .8s both ease;
}

/* sides */
.pt-page-rotateSidesOut {
	-webkit-transform-origin: -50% 50%;
	transform-origin: -50% 50%;
	-webkit-animation: rotateSidesOut .5s both ease-in;
	animation: rotateSidesOut .5s both ease-in;
}
.pt-page-rotateSidesIn {
	-webkit-transform-origin: 150% 50%;
	transform-origin: 150% 50%;
	-webkit-animation: rotateSidesIn .5s both ease-out;
	animation: rotateSidesIn .5s both ease-out;
}

/* slide */
.pt-page-rotateSlideOut {
	-webkit-animation: rotateSlideOut 1s both ease;
	animation: rotateSlideOut 1s both ease;
}
.pt-page-rotateSlideIn {
	-webkit-animation: rotateSlideIn 1s both ease;
	animation: rotateSlideIn 1s both ease;
}

/********************************* keyframes **************************************/

/* rotate sides first and scale */

@-webkit-keyframes rotateRightSideFirst {
	0% { }
	40% { -webkit-transform: rotateY(15deg); opacity: .8; -webkit-animation-timing-function: ease-out; }
	100% { -webkit-transform: scale(0.8) translateZ(-200px); opacity:0; }
}
@keyframes rotateRightSideFirst {
	0% { }
	40% { -webkit-transform: rotateY(15deg); transform: rotateY(15deg); opacity: .8; -webkit-animation-timing-function: ease-out; animation-timing-function: ease-out; }
	100% { -webkit-transform: scale(0.8) translateZ(-200px); transform: scale(0.8) translateZ(-200px); opacity:0; }
}

@-webkit-keyframes rotateLeftSideFirst {
	0% { }
	40% { -webkit-transform: rotateY(-15deg); opacity: .8; -webkit-animation-timing-function: ease-out; }
	100% { -webkit-transform: scale(0.8) translateZ(-200px); opacity:0; }
}
@keyframes rotateLeftSideFirst {
	0% { }
	40% { -webkit-transform: rotateY(-15deg); transform: rotateY(-15deg); opacity: .8; -webkit-animation-timing-function: ease-out; animation-timing-function: ease-out; }
	100% { -webkit-transform: scale(0.8) translateZ(-200px); transform: scale(0.8) translateZ(-200px); opacity:0; }
}

@-webkit-keyframes rotateTopSideFirst {
	0% { }
	40% { -webkit-transform: rotateX(15deg); opacity: .8; -webkit-animation-timing-function: ease-out; }
	100% { -webkit-transform: scale(0.8) translateZ(-200px); opacity:0; }
}
@keyframes rotateTopSideFirst {
	0% { }
	40% { -webkit-transform: rotateX(15deg); transform: rotateX(15deg); opacity: .8; -webkit-animation-timing-function: ease-out; animation-timing-function: ease-out; }
	100% { -webkit-transform: scale(0.8) translateZ(-200px); transform: scale(0.8) translateZ(-200px); opacity:0; }
}

@-webkit-keyframes rotateBottomSideFirst {
	0% { }
	40% { -webkit-transform: rotateX(-15deg); opacity: .8; -webkit-animation-timing-function: ease-out; }
	100% { -webkit-transform: scale(0.8) translateZ(-200px); opacity:0; }
}
@keyframes rotateBottomSideFirst {
	0% { }
	40% { -webkit-transform: rotateX(-15deg); transform: rotateX(-15deg); opacity: .8; -webkit-animation-timing-function: ease-out; animation-timing-function: ease-out; }
	100% { -webkit-transform: scale(0.8) translateZ(-200px); transform: scale(0.8) translateZ(-200px); opacity:0; }
}

/* flip */

@-webkit-keyframes flipOutRight {
	from { }
	to { -webkit-transform: translateZ(-1000px) rotateY(90deg); opacity: 0.2; }
}
@keyframes flipOutRight {
	from { }
	to { -webkit-transform: translateZ(-1000px) rotateY(90deg); transform: translateZ(-1000px) rotateY(90deg); opacity: 0.2; }
}

@-webkit-keyframes flipInLeft {
	from { -webkit-transform: translateZ(-1000px) rotateY(-90deg); opacity: 0.2; }
}
@keyframes flipInLeft {
	from { -webkit-transform: translateZ(-1000px) rotateY(-90deg); transform: translateZ(-1000px) rotateY(-90deg); opacity: 0.2; }
}

@-webkit-keyframes flipOutLeft {
	from { }
	to { -webkit-transform: translateZ(-1000px) rotateY(-90deg); opacity: 0.2; }
}
@keyframes flipOutLeft {
	from { }
	to { -webkit-transform: translateZ(-1000px) rotateY(-90deg); transform: translateZ(-1000px) rotateY(-90deg); opacity: 0.2; }
}

@-webkit-keyframes flipInRight {
	from { -webkit-transform: translateZ(-1000px) rotateY(90deg); opacity: 0.2; }
}
@keyframes flipInRight {
	from { -webkit-transform: translateZ(-1000px) rotateY(90deg); transform: translateZ(-1000px) rotateY(90deg); opacity: 0.2; }
}

@-webkit-keyframes flipOutTop {
	from { }
	to { -webkit-transform: translateZ(-1000px) rotateX(90deg); opacity: 0.2; }
}
@keyframes flipOutTop {
	from { }
	to { -webkit-transform: translateZ(-1000px) rotateX(90deg); transform: translateZ(-1000px) rotateX(90deg); opacity: 0.2; }
}

@-webkit-keyframes flipInBottom {
	from { -webkit-transform: translateZ(-1000px) rotateX(-90deg); opacity: 0.2; }
}
@keyframes flipInBottom {
	from { -webkit-transform: translateZ(-1000px) rotateX(-90deg); transform: translateZ(-1000px) rotateX(-90deg); opacity: 0.2; }
}

@-webkit-keyframes flipOutBottom {
	from { }
	to { -webkit-transform: translateZ(-1000px) rotateX(-90deg); opacity: 0.2; }
}
@keyframes flipOutBottom {
	from { }
	to { -webkit-transform: translateZ(-1000px) rotateX(-90deg); transform: translateZ(-1000px) rotateX(-90deg); opacity: 0.2; }
}

@-webkit-keyframes flipInTop {
	from { -webkit-transform: translateZ(-1000px) rotateX(90deg); opacity: 0.2; }
}
@keyframes flipInTop {
	from { -webkit-transform: translateZ(-1000px) rotateX(90deg); transform: translateZ(-1000px) rotateX(90deg); opacity: 0.2; }
}

/* fall */

@-webkit-keyframes rotateFall {
	0% { -webkit-transform: rotateZ(0deg); }
	20% { -webkit-transform: rotateZ(10deg); -webkit-animation-timing-function: ease-out; }
	40% { -webkit-transform: rotateZ(17deg); }
	60% { -webkit-transform: rotateZ(16deg); }
	100% { -webkit-transform: translateY(100%) rotateZ(17deg); }
}
@keyframes rotateFall {
	0% { -webkit-transform: rotateZ(0deg); transform: rotateZ(0deg); }
	20% { -webkit-transform: rotateZ(10deg); transform: rotateZ(10deg); -webkit-animation-timing-function: ease-out; animation-timing-function: ease-out; }
	40% { -webkit-transform: rotateZ(17deg); transform: rotateZ(17deg); }
	60% { -webkit-transform: rotateZ(16deg); transform: rotateZ(16deg); }
	100% { -webkit-transform: translateY(100%) rotateZ(17deg); transform: translateY(100%) rotateZ(17deg); }
}

/* newspaper */

@-webkit-keyframes rotateOutNewspaper {
	from { }
	to { -webkit-transform: translateZ(-3000px) rotateZ(360deg); opacity: 0; }
}
@keyframes rotateOutNewspaper {
	from { }
	to { -webkit-transform: translateZ(-3000px) rotateZ(360deg); transform: translateZ(-3000px) rotateZ(360deg); opacity: 0; }
}

@-webkit-keyframes rotateInNewspaper {
	from { -webkit-transform: translateZ(-3000px) rotateZ(-360deg); opacity: 0; }
}
@keyframes rotateInNewspaper {
	from { -webkit-transform: translateZ(-3000px) rotateZ(-360deg); transform: translateZ(-3000px) rotateZ(-360deg); opacity: 0; }
}

/* push */

@-webkit-keyframes rotatePushLeft {
	from { }
	to { opacity: 0; -webkit-transform: rotateY(90deg); }
}
@keyframes rotatePushLeft {
	from { }
	to { opacity: 0; -webkit-transform: rotateY(90deg); transform: rotateY(90deg); }
}

@-webkit-keyframes rotatePushRight {
	from { }
	to { opacity: 0; -webkit-transform: rotateY(-90deg); }
}
@keyframes rotatePushRight {
	from { }
	to { opacity: 0; -webkit-transform: rotateY(-90deg); transform: rotateY(-90deg); }
}

@-webkit-keyframes rotatePushTop {
	from { }
	to { opacity: 0; -webkit-transform: rotateX(-90deg); }
}
@keyframes rotatePushTop {
	from { }
	to { opacity: 0; -webkit-transform: rotateX(-90deg); transform: rotateX(-90deg); }
}

@-webkit-keyframes rotatePushBottom {
	from { }
	to { opacity: 0; -webkit-transform: rotateX(90deg); }
}
@keyframes rotatePushBottom {
	from { }
	to { opacity: 0; -webkit-transform: rotateX(90deg); transform: rotateX(90deg); }
}

/* pull */

@-webkit-keyframes rotatePullRight {
	from { opacity: 0; -webkit-transform: rotateY(-90deg); }
}
@keyframes rotatePullRight {
	from { opacity: 0; -webkit-transform: rotateY(-90deg); transform: rotateY(-90deg); }
}

@-webkit-keyframes rotatePullLeft {
	from { opacity: 0; -webkit-transform: rotateY(90deg); }
}
@keyframes rotatePullLeft {
	from { opacity: 0; -webkit-transform: rotateY(90deg); transform: rotateY(90deg); }
}

@-webkit-keyframes rotatePullTop {
	from { opacity: 0; -webkit-transform: rotateX(-90deg); }
}
@keyframes rotatePullTop {
	from { opacity: 0; -webkit-transform: rotateX(-90deg); transform: rotateX(-90deg); }
}

@-webkit-keyframes rotatePullBottom {
	from { opacity: 0; -webkit-transform: rotateX(90deg); }
}
@keyframes rotatePullBottom {
	from { opacity: 0; -webkit-transform: rotateX(90deg); transform: rotateX(90deg); }
}

/* fold */

@-webkit-keyframes rotateFoldRight {
	from { }
	to { opacity: 0; -webkit-transform: translateX(100%) rotateY(90deg); }
}
@keyframes rotateFoldRight {
	from { }
	to { opacity: 0; -webkit-transform: translateX(100%) rotateY(90deg); transform: translateX(100%) rotateY(90deg); }
}

@-webkit-keyframes rotateFoldLeft {
	from { }
	to { opacity: 0; -webkit-transform: translateX(-100%) rotateY(-90deg); }
}
@keyframes rotateFoldLeft {
	from { }
	to { opacity: 0; -webkit-transform: translateX(-100%) rotateY(-90deg); transform: translateX(-100%) rotateY(-90deg); }
}

@-webkit-keyframes rotateFoldTop {
	from { }
	to { opacity: 0; -webkit-transform: translateY(-100%) rotateX(90deg); }
}
@keyframes rotateFoldTop {
	from { }
	to { opacity: 0; -webkit-transform: translateY(-100%) rotateX(90deg); transform: translateY(-100%) rotateX(90deg); }
}

@-webkit-keyframes rotateFoldBottom {
	from { }
	to { opacity: 0; -webkit-transform: translateY(100%) rotateX(-90deg); }
}
@keyframes rotateFoldBottom {
	from { }
	to { opacity: 0; -webkit-transform: translateY(100%) rotateX(-90deg); transform: translateY(100%) rotateX(-90deg); }
}

/* unfold */

@-webkit-keyframes rotateUnfoldLeft {
	from { opacity: 0; -webkit-transform: translateX(-100%) rotateY(-90deg); }
}
@keyframes rotateUnfoldLeft {
	from { opacity: 0; -webkit-transform: translateX(-100%) rotateY(-90deg); transform: translateX(-100%) rotateY(-90deg); }
}

@-webkit-keyframes rotateUnfoldRight {
	from { opacity: 0; -webkit-transform: translateX(100%) rotateY(90deg); }
}
@keyframes rotateUnfoldRight {
	from { opacity: 0; -webkit-transform: translateX(100%) rotateY(90deg); transform: translateX(100%) rotateY(90deg); }
}

@-webkit-keyframes rotateUnfoldTop {
	from { opacity: 0; -webkit-transform: translateY(-100%) rotateX(90deg); }
}
@keyframes rotateUnfoldTop {
	from { opacity: 0; -webkit-transform: translateY(-100%) rotateX(90deg); transform: translateY(-100%) rotateX(90deg); }
}

@-webkit-keyframes rotateUnfoldBottom {
	from { opacity: 0; -webkit-transform: translateY(100%) rotateX(-90deg); }
}
@keyframes rotateUnfoldBottom {
	from { opacity: 0; -webkit-transform: translateY(100%) rotateX(-90deg); transform: translateY(100%) rotateX(-90deg); }
}

/* room walls */

@-webkit-keyframes rotateRoomLeftOut {
	from { }
	to { opacity: .3; -webkit-transform: translateX(-100%) rotateY(90deg); }
}
@keyframes rotateRoomLeftOut {
	from { }
	to { opacity: .3; -webkit-transform: translateX(-100%) rotateY(90deg); transform: translateX(-100%) rotateY(90deg); }
}

@-webkit-keyframes rotateRoomLeftIn {
	from { opacity: .3; -webkit-transform: translateX(100%) rotateY(-90deg); }
}
@keyframes rotateRoomLeftIn {
	from { opacity: .3; -webkit-transform: translateX(100%) rotateY(-90deg); transform: translateX(100%) rotateY(-90deg); }
}

@-webkit-keyframes rotateRoomRightOut {
	from { }
	to { opacity: .3; -webkit-transform: translateX(100%) rotateY(-90deg); }
}
@keyframes rotateRoomRightOut {
	from { }
	to { opacity: .3; -webkit-transform: translateX(100%) rotateY(-90deg); transform: translateX(100%) rotateY(-90deg); }
}

@-webkit-keyframes rotateRoomRightIn {
	from { opacity: .3; -webkit-transform: translateX(-100%) rotateY(90deg); }
}
@keyframes rotateRoomRightIn {
	from { opacity: .3; -webkit-transform: translateX(-100%) rotateY(90deg); transform: translateX(-100%) rotateY(90deg); }
}

@-webkit-keyframes rotateRoomTopOut {
	from { }
	to { opacity: .3; -webkit-transform: translateY(-100%) rotateX(-90deg); }
}
@keyframes rotateRoomTopOut {
	from { }
	to { opacity: .3; -webkit-transform: translateY(-100%) rotateX(-90deg); transform: translateY(-100%) rotateX(-90deg); }
}

@-webkit-keyframes rotateRoomTopIn {
	from { opacity: .3; -webkit-transform: translateY(100%) rotateX(90deg); }
}
@keyframes rotateRoomTopIn {
	from { opacity: .3; -webkit-transform: translateY(100%) rotateX(90deg); transform: translateY(100%) rotateX(90deg); }
}

@-webkit-keyframes rotateRoomBottomOut {
	from { }
	to { opacity: .3; -webkit-transform: translateY(100%) rotateX(90deg); }
}
@keyframes rotateRoomBottomOut {
	from { }
	to { opacity: .3; -webkit-transform: translateY(100%) rotateX(90deg); transform: translateY(100%) rotateX(90deg); }
}

@-webkit-keyframes rotateRoomBottomIn {
	from { opacity: .3; -webkit-transform: translateY(-100%) rotateX(-90deg); }
}
@keyframes rotateRoomBottomIn {
	from { opacity: .3; -webkit-transform: translateY(-100%) rotateX(-90deg); transform: translateY(-100%) rotateX(-90deg); }
}

/* cube */

@-webkit-keyframes rotateCubeLeftOut {
	0% { }
	50% { -webkit-animation-timing-function: ease-out;  -webkit-transform: translateX(-50%) translateZ(-200px) rotateY(-45deg); }
	100% { opacity: .3; -webkit-transform: translateX(-100%) rotateY(-90deg); }
}
@keyframes rotateCubeLeftOut {
	0% { }
	50% { -webkit-animation-timing-function: ease-out; animation-timing-function: ease-out;  -webkit-transform: translateX(-50%) translateZ(-200px) rotateY(-45deg);  transform: translateX(-50%) translateZ(-200px) rotateY(-45deg); }
	100% { opacity: .3; -webkit-transform: translateX(-100%) rotateY(-90deg); transform: translateX(-100%) rotateY(-90deg); }
}

@-webkit-keyframes rotateCubeLeftIn {
	0% { opacity: .3; -webkit-transform: translateX(100%) rotateY(90deg); }
	50% { -webkit-animation-timing-function: ease-out;  -webkit-transform: translateX(50%) translateZ(-200px) rotateY(45deg); }
}
@keyframes rotateCubeLeftIn {
	0% { opacity: .3; -webkit-transform: translateX(100%) rotateY(90deg); transform: translateX(100%) rotateY(90deg); }
	50% { -webkit-animation-timing-function: ease-out; animation-timing-function: ease-out;  -webkit-transform: translateX(50%) translateZ(-200px) rotateY(45deg);  transform: translateX(50%) translateZ(-200px) rotateY(45deg); }
}

@-webkit-keyframes rotateCubeRightOut {
	0% { }
	50% { -webkit-animation-timing-function: ease-out; -webkit-transform: translateX(50%) translateZ(-200px) rotateY(45deg); }
	100% { opacity: .3; -webkit-transform: translateX(100%) rotateY(90deg); }
}
@keyframes rotateCubeRightOut {
	0% { }
	50% { -webkit-animation-timing-function: ease-out; animation-timing-function: ease-out; -webkit-transform: translateX(50%) translateZ(-200px) rotateY(45deg); transform: translateX(50%) translateZ(-200px) rotateY(45deg); }
	100% { opacity: .3; -webkit-transform: translateX(100%) rotateY(90deg); transform: translateX(100%) rotateY(90deg); }
}

@-webkit-keyframes rotateCubeRightIn {
	0% { opacity: .3; -webkit-transform: translateX(-100%) rotateY(-90deg); }
	50% { -webkit-animation-timing-function: ease-out; -webkit-transform: translateX(-50%) translateZ(-200px) rotateY(-45deg); }
}
@keyframes rotateCubeRightIn {
	0% { opacity: .3; -webkit-transform: translateX(-100%) rotateY(-90deg); transform: translateX(-100%) rotateY(-90deg); }
	50% { -webkit-animation-timing-function: ease-out; animation-timing-function: ease-out; -webkit-transform: translateX(-50%) translateZ(-200px) rotateY(-45deg); transform: translateX(-50%) translateZ(-200px) rotateY(-45deg); }
}

@-webkit-keyframes rotateCubeTopOut {
	0% { }
	50% { -webkit-animation-timing-function: ease-out; -webkit-transform: translateY(-50%) translateZ(-200px) rotateX(45deg); }
	100% { opacity: .3; -webkit-transform: translateY(-100%) rotateX(90deg); }
}
@keyframes rotateCubeTopOut {
	0% {}
	50% { -webkit-animation-timing-function: ease-out; animation-timing-function: ease-out; -webkit-transform: translateY(-50%) translateZ(-200px) rotateX(45deg); transform: translateY(-50%) translateZ(-200px) rotateX(45deg); }
	100% { opacity: .3; -webkit-transform: translateY(-100%) rotateX(90deg); transform: translateY(-100%) rotateX(90deg); }
}

@-webkit-keyframes rotateCubeTopIn {
	0% { opacity: .3; -webkit-transform: translateY(100%) rotateX(-90deg); }
	50% { -webkit-animation-timing-function: ease-out; -webkit-transform: translateY(50%) translateZ(-200px) rotateX(-45deg); }
}
@keyframes rotateCubeTopIn {
	0% { opacity: .3; -webkit-transform: translateY(100%) rotateX(-90deg); transform: translateY(100%) rotateX(-90deg); }
	50% { -webkit-animation-timing-function: ease-out; animation-timing-function: ease-out; -webkit-transform: translateY(50%) translateZ(-200px) rotateX(-45deg); transform: translateY(50%) translateZ(-200px) rotateX(-45deg); }
}

@-webkit-keyframes rotateCubeBottomOut {
	0% { }
	50% { -webkit-animation-timing-function: ease-out; -webkit-transform: translateY(50%) translateZ(-200px) rotateX(-45deg); }
	100% { opacity: .3; -webkit-transform: translateY(100%) rotateX(-90deg); }
}
@keyframes rotateCubeBottomOut {
	0% { }
	50% { -webkit-animation-timing-function: ease-out; animation-timing-function: ease-out; -webkit-transform: translateY(50%) translateZ(-200px) rotateX(-45deg); transform: translateY(50%) translateZ(-200px) rotateX(-45deg); }
	100% { opacity: .3; -webkit-transform: translateY(100%) rotateX(-90deg); transform: translateY(100%) rotateX(-90deg); }
}

@-webkit-keyframes rotateCubeBottomIn {
	0% { opacity: .3; -webkit-transform: translateY(-100%) rotateX(90deg); }
	50% { -webkit-animation-timing-function: ease-out; -webkit-transform: translateY(-50%) translateZ(-200px) rotateX(45deg); }
}
@keyframes rotateCubeBottomIn {
	0% { opacity: .3; -webkit-transform: translateY(-100%) rotateX(90deg); transform: translateY(-100%) rotateX(90deg); }
	50% { -webkit-animation-timing-function: ease-out; animation-timing-function: ease-out; -webkit-transform: translateY(-50%) translateZ(-200px) rotateX(45deg); transform: translateY(-50%) translateZ(-200px) rotateX(45deg); }
}

/* carousel */

@-webkit-keyframes rotateCarouselLeftOut {
	from { }
	to { opacity: .3; -webkit-transform: translateX(-150%) scale(.4) rotateY(-65deg); }
}
@keyframes rotateCarouselLeftOut {
	from { }
	to { opacity: .3; -webkit-transform: translateX(-150%) scale(.4) rotateY(-65deg); transform: translateX(-150%) scale(.4) rotateY(-65deg); }
}

@-webkit-keyframes rotateCarouselLeftIn {
	from { opacity: .3; -webkit-transform: translateX(200%) scale(.4) rotateY(65deg); }
}
@keyframes rotateCarouselLeftIn {
	from { opacity: .3; -webkit-transform: translateX(200%) scale(.4) rotateY(65deg); transform: translateX(200%) scale(.4) rotateY(65deg); }
}

@-webkit-keyframes rotateCarouselRightOut {
	from { }
	to { opacity: .3; -webkit-transform: translateX(200%) scale(.4) rotateY(65deg); }
}
@keyframes rotateCarouselRightOut {
	from { }
	to { opacity: .3; -webkit-transform: translateX(200%) scale(.4) rotateY(65deg); transform: translateX(200%) scale(.4) rotateY(65deg); }
}

@-webkit-keyframes rotateCarouselRightIn {
	from { opacity: .3; -webkit-transform: translateX(-200%) scale(.4) rotateY(-65deg); }
}
@keyframes rotateCarouselRightIn {
	from { opacity: .3; -webkit-transform: translateX(-200%) scale(.4) rotateY(-65deg); transform: translateX(-200%) scale(.4) rotateY(-65deg); }
}

@-webkit-keyframes rotateCarouselTopOut {
	from { }
	to { opacity: .3; -webkit-transform: translateY(-200%) scale(.4) rotateX(65deg); }
}
@keyframes rotateCarouselTopOut {
	from { }
	to { opacity: .3; -webkit-transform: translateY(-200%) scale(.4) rotateX(65deg); transform: translateY(-200%) scale(.4) rotateX(65deg); }
}

@-webkit-keyframes rotateCarouselTopIn {
	from { opacity: .3; -webkit-transform: translateY(200%) scale(.4) rotateX(-65deg); }
}
@keyframes rotateCarouselTopIn {
	from { opacity: .3; -webkit-transform: translateY(200%) scale(.4) rotateX(-65deg); transform: translateY(200%) scale(.4) rotateX(-65deg); }
}

@-webkit-keyframes rotateCarouselBottomOut {
	from { }
	to { opacity: .3; -webkit-transform: translateY(200%) scale(.4) rotateX(-65deg); }
}
@keyframes rotateCarouselBottomOut {
	from { }
	to { opacity: .3; -webkit-transform: translateY(200%) scale(.4) rotateX(-65deg); transform: translateY(200%) scale(.4) rotateX(-65deg); }
}

@-webkit-keyframes rotateCarouselBottomIn {
	from { opacity: .3; -webkit-transform: translateY(-200%) scale(.4) rotateX(65deg); }
}
@keyframes rotateCarouselBottomIn {
	from { opacity: .3; -webkit-transform: translateY(-200%) scale(.4) rotateX(65deg); transform: translateY(-200%) scale(.4) rotateX(65deg); }
}

/* sides */

@-webkit-keyframes rotateSidesOut {
	from { }
	to { opacity: 0; -webkit-transform: translateZ(-500px) rotateY(90deg); }
}
@keyframes rotateSidesOut {
	from { }
	to { opacity: 0; -webkit-transform: translateZ(-500px) rotateY(90deg); transform: translateZ(-500px) rotateY(90deg); }
}

@-webkit-keyframes rotateSidesIn {
	from { opacity: 0; -webkit-transform: translateZ(-500px) rotateY(-90deg); }
}
@keyframes rotateSidesIn {
	from { opacity: 0; -webkit-transform: translateZ(-500px) rotateY(-90deg); transform: translateZ(-500px) rotateY(-90deg); }
}

/* slide */

@-webkit-keyframes rotateSlideOut {
	0% { }
	25% { opacity: .5; -webkit-transform: translateZ(-500px); }
	75% { opacity: .5; -webkit-transform: translateZ(-500px) translateX(-200%); }
	100% { opacity: .5; -webkit-transform: translateZ(-500px) translateX(-200%); }
}
@keyframes rotateSlideOut {
	0% { }
	25% { opacity: .5; -webkit-transform: translateZ(-500px); transform: translateZ(-500px); }
	75% { opacity: .5; -webkit-transform: translateZ(-500px) translateX(-200%); transform: translateZ(-500px) translateX(-200%); }
	100% { opacity: .5; -webkit-transform: translateZ(-500px) translateX(-200%); transform: translateZ(-500px) translateX(-200%); }
}

@-webkit-keyframes rotateSlideIn {
	0%, 25% { opacity: .5; -webkit-transform: translateZ(-500px) translateX(200%); }
	75% { opacity: .5; -webkit-transform: translateZ(-500px); }
	100% { opacity: 1; -webkit-transform: translateZ(0) translateX(0); }
}
@keyframes rotateSlideIn {
	0%, 25% { opacity: .5; -webkit-transform: translateZ(-500px) translateX(200%); transform: translateZ(-500px) translateX(200%); }
	75% { opacity: .5; -webkit-transform: translateZ(-500px); transform: translateZ(-500px); }
	100% { opacity: 1; -webkit-transform: translateZ(0) translateX(0); transform: translateZ(0) translateX(0); }
}

/* animation delay classes */

.pt-page-delay100 {
	-webkit-animation-delay: .1s;
	animation-delay: .1s;
}
.pt-page-delay180 {
	-webkit-animation-delay: .180s;
	animation-delay: .180s;
}
.pt-page-delay200 {
	-webkit-animation-delay: .2s;
	animation-delay: .2s;
}
.pt-page-delay300 {
	-webkit-animation-delay: .3s;
	animation-delay: .3s;
}
.pt-page-delay400 {
	-webkit-animation-delay: .4s;
	animation-delay: .4s;
}
.pt-page-delay500 {
	-webkit-animation-delay: .5s;
	animation-delay: .5s;
}
.pt-page-delay700 {
	-webkit-animation-delay: .7s;
	animation-delay: .7s;
}
.pt-page-delay1000 {
	-webkit-animation-delay: 1s;
	animation-delay: 1s;
}</style>
    <div id="header" class="header">
      <div class="name">note {{currentPage}}/{{pageCount}}</div>
      <div class="prev headerbutton" on-click="{{prevPage}}"><i class="fa fa-angle-left"></i></div>
      <div class="next headerbutton" on-click="{{nextPage}}"><i class="fa fa-angle-right"></i></div>
      <div class="trash headerbutton" on-click="{{deletePage}}"><i class="fa fa-trash-o"></i></div>
      <div class="add headerbutton" on-click="{{newPage}}"><i class="fa fa-plus"></i></div>
      <div class="text headerbutton" on-click="{{wantsText}}"><i class="fa fa-header"></i></div>
      <div class="camera headerbutton" on-click="{{wantsImage}}"><i class="fa fa-camera"></i></div>
    </div>
    <div id="pages" class="pages pt-perspective pt-main"></div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      "tags": ["data", "words"],
      "thumbnail": "./thumbnail.png",
      "name": "Notebook",
      "description": "Stores pages of stuff",
      "broadcasts": {
        "wantsPicture": {
          "label": "User wants picture",
          "description": "The user clicked on the picture icon"
        },
        "wantsText": {
          "label": "User wants text",
          "description": "The user clicked on the plus icon"
        }
      },
      "listeners": {
        "newPage": {
          "description": "Create a new page",
          "label": "New Page",
          "default" : false
        },
        "nextPage": {
          "description": "Go to next page",
          "label": "Next Page",
          "default" : false
        },
        "prevPage": {
          "description": "Go to previous",
          "label": "Previous Page",
          "default" : false
        },
        "deletePage": {
          "description": "Delete current page",
          "label": "Delete Page",
          "default" : false
        },
        "addImage": {
          "description": "Add image to current page",
          "label": "Add image",
          "default": false
        },
        "addText": {
          "description": "Add markdown text to current page",
          "label": "Add text",
          "default": false
        },
        "addHTML": {
          "description": "Add an HTML fragment to current page",
          "label": "Add HTML",
          "default": false
        }
      },
      "attributes": {
        "backgroundcolor": {
          "label": "Background Color",
          "editable": "color"
        },
        "textcolor": {
          "label": "Text Color",
          "editable": "color"
        },
        "nameAttrb": {
          "label": "Notebook Name",
          "editable": "text"
        }
      }
    }
  </ceci-definition>
  <script>
    Polymer('ceci-notebook', {
      currentPage: 1,
      pageCount:4,
      ready: function() {
        this.super();
        if (localStorage['hack-collection-pages'] == undefined) {
          localStorage['hack-collection-pages'] = JSON.stringify(
            { pages: [
                ['<h1>First page</h1>', '<p>Notebooks can store text</p>'],
                ['<h1>Page 2</h1>', '<p>even with markdown <strong>markup</strong></p>'],
                ['<h1>Page 3</h1>', '<p>and even...</p>', "<img class='kitten'></img>", "kittens!"],
              ],
              'currentPage': 1
          });
        }
        var data = this.getData();
        this.currentPage = data['currentPage'] || 1;
        this.pageCount = data['pages'].length;
        this.updateDisplay();
      },
      attached : function(){
        this.super();
      },
      getData: function() {
        return JSON.parse(localStorage['hack-collection-pages']);
      },
      setData: function(data) {
        localStorage['hack-collection-pages'] = JSON.stringify(data);
      },
      updateDisplay: function() {
        // XXX this is now called way too many times. Navigation should just be via CSS
        this.$.pages.innerHTML = "";
        var data = this.getData();
        var page, list, item;
        var currentPage = this.$.pages.querySelector('.page.current');
        if (currentPage) {
          currentPage.classList.remove('current');
        }
        for (var pageNo=0; pageNo < data.pages.length; pageNo++) {
          page = document.createElement('div');
          page.className = 'page';
          page.classList.add('pt-page');
          if (pageNo == this.currentPage-1) {
            page.classList.add('pt-page-current');
          }
          list = document.createElement('ul');
          var pageData = data['pages'][pageNo];
          if (pageData) {
            for (var i=0; i<pageData.length; i++) {
              item = document.createElement("li");
              item.innerHTML = pageData[i];
              list.appendChild(item);
            }
          }
          page.appendChild(list);
          this.$.pages.appendChild(page);
        }
      },
      addImage: function(imgsrc) {
        this.addHTML("<img src='" + imgsrc + "'></img>");
      },
      addText: function(stuff) {
        this.addHTML(markdown.toHTML(stuff));
      },
      addHTML: function(snippet) {
        var pagesElt = this.$.pages.querySelectorAll('.page');
        var pageElt = pagesElt.item(this.currentPage-1);
        var item = document.createElement("li");
        item.innerHTML = snippet
        pageElt.querySelector('ul').appendChild(item);
        var data = this.getData();
        data.pages[this.currentPage-1].push(snippet);
        this.setData(data);
      },
      newPage: function() {
        var data = this.getData();
        var pages = data['pages']
        pages.splice(this.currentPage, 0, []);
        data['pages'] = pages;
        this.pageCount++;
        this.currentPage++;
        this.setData(data);
        this.updateDisplay();
      },
      nextPage: function() {
        var data = this.getData();
        var pagesElt = this.$.pages.querySelectorAll('.page');
        if (this.currentPage == data.pages.length) return;
        var outPage = pagesElt.item(this.currentPage-1);
        var inPage = pagesElt.item(this.currentPage);
        function animationDone() {
          outPage.classList.remove('pt-page-current');
          outPage.classList.remove('pt-page-moveToLeftFade');
          inPage.classList.remove('pt-page-moveFromRightFade');
          inPage.removeEventListener('animationend', animationDone);
          inPage.removeEventListener('webkitAnimationEnd', animationDone);
        }
        inPage.addEventListener('animationend', animationDone);
        inPage.addEventListener('webkitAnimationEnd', animationDone);
        outPage.classList.add('pt-page-moveToLeftFade');
        inPage.classList.add('pt-page-current');
        inPage.classList.add('pt-page-moveFromRightFade');
        this.currentPage++;
        data['currentPage'] = this.currentPage;
        this.setData(data);
      },
      prevPage: function() {
        var pagesElt = this.$.pages.querySelectorAll('.page');
        if (this.currentPage <= 1) return;
        var outPage = pagesElt.item(this.currentPage-1);
        var inPage = pagesElt.item(this.currentPage-2);
        function animationDone() {
          outPage.classList.remove('pt-page-current');
          outPage.classList.remove('pt-page-moveToRightFade');
          inPage.classList.remove('pt-page-moveFromLeftFade');
          inPage.removeEventListener('animationend', animationDone);
          inPage.removeEventListener('webkitAnimationEnd', animationDone);
        }
        inPage.addEventListener('animationend', animationDone);
        inPage.addEventListener('webkitAnimationEnd', animationDone);
        outPage.classList.add('pt-page-moveToRightFade');
        inPage.classList.add('pt-page-current');
        inPage.classList.add('pt-page-moveFromLeftFade');
        var pagesElt = this.$.pages.querySelectorAll('.page');
        this.currentPage--;
        var data = this.getData();
        data['currentPage'] = this.currentPage;
        this.setData(data);
      },
      deletePage: function() {
        var data = this.getData();
        data['pages'].splice(this.currentPage-1, 1);
        this.pageCount = data['pages'].length;
        if (this.currentPage > this.pageCount) {
          this.currentPage = this.pageCount;
        }
        this.setData(data);
        if (this.pageCount == 0) {
          this.newPage();
          this.currentPage = 1;
        }
        this.updateDisplay();
      },
      wantsPicture: function() {
        this.broadcast("getpicture", "wantpicture");
      },
      wantsText: function() {
        this.broadcast("gettext", "wanttext");
      },
      backgroundcolorChanged: function (oldValue, newValue) {
        this.style.backgroundColor = newValue;
      },
      textcolorChanged: function (oldValue, newValue) {
        this.style.color = newValue;
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-pad-grid" extends="ceci-element" attributes="backgroundcolor textcolor numrows numcols labels palettenumber" backgroundcolor="#000000" textcolor="#ffffff" numrows="5" numcols="3" palettenumber="1" labels="cucumber,tomato,eggplant,,up,,left,,right,,down," assetpath="component-pad-grid/">
  <template>
    <style>:host {
  display: block;
  width: 100%;
  padding: 10px;
  text-align: center;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

:host .output-channel {
  padding: 5px 10px;
  background: #999;
  margin: 0 3px;
  display: block;
  border: solid 2px #555;
}

:host .beats {
  display: inline-block;
}

:host .next-up {
  background: white;
  border: solid 2px white;
  font-weight: bold;
}

:host #channels {
  display: inline-block;
  position: relative;
}



:host .channel {
  overflow: auto;
  margin-bottom: 4px;
}

:host .channel:last-child {
  margin-bottom: 0;
}

:host .channel .beat,
:host .channel .label
{
  display:block;
  float: left;
}

:host .channel .label:after {
  content: "1";
}

:host .channel .beat {
  background: #DDD;
  margin: 0;
  height: 40px;
  width: 68px;
  opacity: .2;
  margin: 0 4px 0px 0;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  position: relative;
}

:host .overlay {
  position: absolute;
  width: 100%;
  height: 100%;
  background: white;
  opacity: 0;
}

:host .channel .beat:last-child {
  margin-right: 0px;
}

:host .channel .beat:hover {
  opacity: .8;
}

:host [data-beat="0"] .beat:first-child,
:host [data-beat="1"] .beat:nth-child(2),
:host [data-beat="2"] .beat:nth-child(3),
:host [data-beat="3"] .beat:nth-child(4)
{
  opacity: .25;
}

:host [data-beat="0"] .beat.on:first-child,
:host [data-beat="1"] .beat.on:nth-child(2),
:host [data-beat="2"] .beat.on:nth-child(3),
:host [data-beat="3"] .beat.on:nth-child(4)
{
  opacity: 1;
}


:host .indicator.top {
  top: -8px;
}

:host .indicator {
  position: absolute;
  width: 68px;
  height: 5px;
  background: white;
  opacity: .4;
  -webkit-transform: scaleX(.2);
  -webkit-transform-origin: center;
  -moz-transform: scaleX(.2);
  -moz-transform-origin: center;
}

:host .indicator.bottom {
  bottom: -8px;
}

:host [data-beat="0"] .indicator { left: 0px; }
:host [data-beat="1"] .indicator { left: 72px; }
:host [data-beat="2"] .indicator { left: 144px; }
:host [data-beat="3"] .indicator { left: 216px; }

:host .channel .beat.on {
  opacity: 1;
}

[data-color*="yellow"] .beat {
  background: rgba(229,210,0,1);
}

[data-color*="blue"] .beat {
  background: rgba(53,140,206,1);
}

[data-color*="red"] .beat {
  background: rgba(232,30,20,1);
}

[data-color*="pink"] .beat {
  background: rgba(255,84,167,1);
}

[data-color*="purple"] .beat {
  background: rgba(159,39,207,1);
}

[data-color*="green"] .beat {
  background: rgba(113,184,6,1);
}

[data-color*="orange"] .beat {
  background: rgba(255,123,0,1);
}

:host .box {
  user-select: none;
  -moz-user-select: none;
  -webkit-user-select: none;
  cursor: pointer;
  display: block;
}
:host .row {
  display: block;
  width: 100%;
  padding-bottom: .5em;
}
  
:host .push {
  position: relative;
  text-align: center;
  vertical-align: baseline;
  font-size: 18px;
  display: inline-block;
  border-radius: 5px;
  min-height: 4em;
  margin-right: 4%;
}

:host .push:last-child {
  margin-right: 0;
}
:host .label {
  display: inline;
  position: absolute;
  top: 50%;
  height: 1.2em;
  margin-top: -.6em;
  left: 0;
  right: 0;
  text-align: center;
}



.animation-target {
  -webkit-animation: animation 1000ms linear both;
  animation: animation 1000ms linear both;
}

/* Generated with Bounce.js. Edit at http://bouncejs.com/#{s:[{T:%22c%22,e:%22s%22,d:1000,D:0,f:{x:1,y:1},t:{x:2,y:2},s:1,b:4}]} */

@-webkit-keyframes animation { 
  0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  1.666667% { -webkit-transform: matrix3d(1.18318, 0, 0, 0, 0, 1.18318, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.18318, 0, 0, 0, 0, 1.18318, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  3.333333% { -webkit-transform: matrix3d(1.31571, 0, 0, 0, 0, 1.31571, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.31571, 0, 0, 0, 0, 1.31571, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  5% { -webkit-transform: matrix3d(1.40196, 0, 0, 0, 0, 1.40196, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.40196, 0, 0, 0, 0, 1.40196, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  6.666667% { -webkit-transform: matrix3d(1.44775, 0, 0, 0, 0, 1.44775, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.44775, 0, 0, 0, 0, 1.44775, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  8.333333% { -webkit-transform: matrix3d(1.4597, 0, 0, 0, 0, 1.4597, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.4597, 0, 0, 0, 0, 1.4597, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  10% { -webkit-transform: matrix3d(1.44478, 0, 0, 0, 0, 1.44478, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.44478, 0, 0, 0, 0, 1.44478, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  11.666667% { -webkit-transform: matrix3d(1.40977, 0, 0, 0, 0, 1.40977, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.40977, 0, 0, 0, 0, 1.40977, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  13.333333% { -webkit-transform: matrix3d(1.36102, 0, 0, 0, 0, 1.36102, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.36102, 0, 0, 0, 0, 1.36102, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  15% { -webkit-transform: matrix3d(1.30417, 0, 0, 0, 0, 1.30417, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.30417, 0, 0, 0, 0, 1.30417, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  16.666667% { -webkit-transform: matrix3d(1.24402, 0, 0, 0, 0, 1.24402, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.24402, 0, 0, 0, 0, 1.24402, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  18.333333% { -webkit-transform: matrix3d(1.18448, 0, 0, 0, 0, 1.18448, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.18448, 0, 0, 0, 0, 1.18448, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  20% { -webkit-transform: matrix3d(1.12856, 0, 0, 0, 0, 1.12856, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.12856, 0, 0, 0, 0, 1.12856, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  21.666667% { -webkit-transform: matrix3d(1.07837, 0, 0, 0, 0, 1.07837, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.07837, 0, 0, 0, 0, 1.07837, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  23.333333% { -webkit-transform: matrix3d(1.0353, 0, 0, 0, 0, 1.0353, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.0353, 0, 0, 0, 0, 1.0353, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  25% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  26.666667% { -webkit-transform: matrix3d(0.9726, 0, 0, 0, 0, 0.9726, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.9726, 0, 0, 0, 0, 0.9726, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  28.333333% { -webkit-transform: matrix3d(0.95278, 0, 0, 0, 0, 0.95278, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.95278, 0, 0, 0, 0, 0.95278, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  30% { -webkit-transform: matrix3d(0.93988, 0, 0, 0, 0, 0.93988, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93988, 0, 0, 0, 0, 0.93988, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  31.666667% { -webkit-transform: matrix3d(0.93303, 0, 0, 0, 0, 0.93303, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93303, 0, 0, 0, 0, 0.93303, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  33.333333% { -webkit-transform: matrix3d(0.93124, 0, 0, 0, 0, 0.93124, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93124, 0, 0, 0, 0, 0.93124, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  35% { -webkit-transform: matrix3d(0.93348, 0, 0, 0, 0, 0.93348, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93348, 0, 0, 0, 0, 0.93348, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  36.666667% { -webkit-transform: matrix3d(0.93871, 0, 0, 0, 0, 0.93871, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93871, 0, 0, 0, 0, 0.93871, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  38.333333% { -webkit-transform: matrix3d(0.946, 0, 0, 0, 0, 0.946, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.946, 0, 0, 0, 0, 0.946, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  40% { -webkit-transform: matrix3d(0.95451, 0, 0, 0, 0, 0.95451, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.95451, 0, 0, 0, 0, 0.95451, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  41.666667% { -webkit-transform: matrix3d(0.9635, 0, 0, 0, 0, 0.9635, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.9635, 0, 0, 0, 0, 0.9635, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  43.333333% { -webkit-transform: matrix3d(0.97241, 0, 0, 0, 0, 0.97241, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.97241, 0, 0, 0, 0, 0.97241, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  45% { -webkit-transform: matrix3d(0.98077, 0, 0, 0, 0, 0.98077, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.98077, 0, 0, 0, 0, 0.98077, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  46.666667% { -webkit-transform: matrix3d(0.98828, 0, 0, 0, 0, 0.98828, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.98828, 0, 0, 0, 0, 0.98828, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  48.333333% { -webkit-transform: matrix3d(0.99472, 0, 0, 0, 0, 0.99472, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99472, 0, 0, 0, 0, 0.99472, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  50% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  51.666667% { -webkit-transform: matrix3d(1.0041, 0, 0, 0, 0, 1.0041, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.0041, 0, 0, 0, 0, 1.0041, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  53.333333% { -webkit-transform: matrix3d(1.00706, 0, 0, 0, 0, 1.00706, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00706, 0, 0, 0, 0, 1.00706, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  55% { -webkit-transform: matrix3d(1.00899, 0, 0, 0, 0, 1.00899, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00899, 0, 0, 0, 0, 1.00899, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  56.666667% { -webkit-transform: matrix3d(1.01002, 0, 0, 0, 0, 1.01002, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.01002, 0, 0, 0, 0, 1.01002, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  58.333333% { -webkit-transform: matrix3d(1.01028, 0, 0, 0, 0, 1.01028, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.01028, 0, 0, 0, 0, 1.01028, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  60% { -webkit-transform: matrix3d(1.00995, 0, 0, 0, 0, 1.00995, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00995, 0, 0, 0, 0, 1.00995, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  61.666667% { -webkit-transform: matrix3d(1.00917, 0, 0, 0, 0, 1.00917, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00917, 0, 0, 0, 0, 1.00917, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  63.333333% { -webkit-transform: matrix3d(1.00808, 0, 0, 0, 0, 1.00808, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00808, 0, 0, 0, 0, 1.00808, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  65% { -webkit-transform: matrix3d(1.0068, 0, 0, 0, 0, 1.0068, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.0068, 0, 0, 0, 0, 1.0068, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  66.666667% { -webkit-transform: matrix3d(1.00546, 0, 0, 0, 0, 1.00546, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00546, 0, 0, 0, 0, 1.00546, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  68.333333% { -webkit-transform: matrix3d(1.00413, 0, 0, 0, 0, 1.00413, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00413, 0, 0, 0, 0, 1.00413, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  70% { -webkit-transform: matrix3d(1.00288, 0, 0, 0, 0, 1.00288, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00288, 0, 0, 0, 0, 1.00288, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  71.666667% { -webkit-transform: matrix3d(1.00175, 0, 0, 0, 0, 1.00175, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00175, 0, 0, 0, 0, 1.00175, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  73.333333% { -webkit-transform: matrix3d(1.00079, 0, 0, 0, 0, 1.00079, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00079, 0, 0, 0, 0, 1.00079, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  75% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  76.666667% { -webkit-transform: matrix3d(0.99939, 0, 0, 0, 0, 0.99939, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99939, 0, 0, 0, 0, 0.99939, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  78.333333% { -webkit-transform: matrix3d(0.99894, 0, 0, 0, 0, 0.99894, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99894, 0, 0, 0, 0, 0.99894, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  80% { -webkit-transform: matrix3d(0.99866, 0, 0, 0, 0, 0.99866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99866, 0, 0, 0, 0, 0.99866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  81.666667% { -webkit-transform: matrix3d(0.9985, 0, 0, 0, 0, 0.9985, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.9985, 0, 0, 0, 0, 0.9985, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  83.333333% { -webkit-transform: matrix3d(0.99846, 0, 0, 0, 0, 0.99846, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99846, 0, 0, 0, 0, 0.99846, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  85% { -webkit-transform: matrix3d(0.99851, 0, 0, 0, 0, 0.99851, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99851, 0, 0, 0, 0, 0.99851, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  86.666667% { -webkit-transform: matrix3d(0.99863, 0, 0, 0, 0, 0.99863, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99863, 0, 0, 0, 0, 0.99863, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  88.333333% { -webkit-transform: matrix3d(0.99879, 0, 0, 0, 0, 0.99879, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99879, 0, 0, 0, 0, 0.99879, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  90% { -webkit-transform: matrix3d(0.99898, 0, 0, 0, 0, 0.99898, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99898, 0, 0, 0, 0, 0.99898, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  91.666667% { -webkit-transform: matrix3d(0.99918, 0, 0, 0, 0, 0.99918, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99918, 0, 0, 0, 0, 0.99918, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  93.333333% { -webkit-transform: matrix3d(0.99938, 0, 0, 0, 0, 0.99938, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99938, 0, 0, 0, 0, 0.99938, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  95% { -webkit-transform: matrix3d(0.99957, 0, 0, 0, 0, 0.99957, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99957, 0, 0, 0, 0, 0.99957, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  96.666667% { -webkit-transform: matrix3d(0.99974, 0, 0, 0, 0, 0.99974, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99974, 0, 0, 0, 0, 0.99974, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  98.333333% { -webkit-transform: matrix3d(0.99988, 0, 0, 0, 0, 0.99988, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99988, 0, 0, 0, 0, 0.99988, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 
}

@keyframes animation { 
  0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  1.666667% { -webkit-transform: matrix3d(1.18318, 0, 0, 0, 0, 1.18318, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.18318, 0, 0, 0, 0, 1.18318, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  3.333333% { -webkit-transform: matrix3d(1.31571, 0, 0, 0, 0, 1.31571, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.31571, 0, 0, 0, 0, 1.31571, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  5% { -webkit-transform: matrix3d(1.40196, 0, 0, 0, 0, 1.40196, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.40196, 0, 0, 0, 0, 1.40196, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  6.666667% { -webkit-transform: matrix3d(1.44775, 0, 0, 0, 0, 1.44775, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.44775, 0, 0, 0, 0, 1.44775, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  8.333333% { -webkit-transform: matrix3d(1.4597, 0, 0, 0, 0, 1.4597, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.4597, 0, 0, 0, 0, 1.4597, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  10% { -webkit-transform: matrix3d(1.44478, 0, 0, 0, 0, 1.44478, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.44478, 0, 0, 0, 0, 1.44478, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  11.666667% { -webkit-transform: matrix3d(1.40977, 0, 0, 0, 0, 1.40977, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.40977, 0, 0, 0, 0, 1.40977, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  13.333333% { -webkit-transform: matrix3d(1.36102, 0, 0, 0, 0, 1.36102, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.36102, 0, 0, 0, 0, 1.36102, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  15% { -webkit-transform: matrix3d(1.30417, 0, 0, 0, 0, 1.30417, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.30417, 0, 0, 0, 0, 1.30417, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  16.666667% { -webkit-transform: matrix3d(1.24402, 0, 0, 0, 0, 1.24402, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.24402, 0, 0, 0, 0, 1.24402, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  18.333333% { -webkit-transform: matrix3d(1.18448, 0, 0, 0, 0, 1.18448, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.18448, 0, 0, 0, 0, 1.18448, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  20% { -webkit-transform: matrix3d(1.12856, 0, 0, 0, 0, 1.12856, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.12856, 0, 0, 0, 0, 1.12856, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  21.666667% { -webkit-transform: matrix3d(1.07837, 0, 0, 0, 0, 1.07837, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.07837, 0, 0, 0, 0, 1.07837, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  23.333333% { -webkit-transform: matrix3d(1.0353, 0, 0, 0, 0, 1.0353, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.0353, 0, 0, 0, 0, 1.0353, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  25% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  26.666667% { -webkit-transform: matrix3d(0.9726, 0, 0, 0, 0, 0.9726, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.9726, 0, 0, 0, 0, 0.9726, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  28.333333% { -webkit-transform: matrix3d(0.95278, 0, 0, 0, 0, 0.95278, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.95278, 0, 0, 0, 0, 0.95278, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  30% { -webkit-transform: matrix3d(0.93988, 0, 0, 0, 0, 0.93988, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93988, 0, 0, 0, 0, 0.93988, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  31.666667% { -webkit-transform: matrix3d(0.93303, 0, 0, 0, 0, 0.93303, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93303, 0, 0, 0, 0, 0.93303, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  33.333333% { -webkit-transform: matrix3d(0.93124, 0, 0, 0, 0, 0.93124, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93124, 0, 0, 0, 0, 0.93124, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  35% { -webkit-transform: matrix3d(0.93348, 0, 0, 0, 0, 0.93348, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93348, 0, 0, 0, 0, 0.93348, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  36.666667% { -webkit-transform: matrix3d(0.93871, 0, 0, 0, 0, 0.93871, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93871, 0, 0, 0, 0, 0.93871, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  38.333333% { -webkit-transform: matrix3d(0.946, 0, 0, 0, 0, 0.946, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.946, 0, 0, 0, 0, 0.946, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  40% { -webkit-transform: matrix3d(0.95451, 0, 0, 0, 0, 0.95451, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.95451, 0, 0, 0, 0, 0.95451, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  41.666667% { -webkit-transform: matrix3d(0.9635, 0, 0, 0, 0, 0.9635, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.9635, 0, 0, 0, 0, 0.9635, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  43.333333% { -webkit-transform: matrix3d(0.97241, 0, 0, 0, 0, 0.97241, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.97241, 0, 0, 0, 0, 0.97241, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  45% { -webkit-transform: matrix3d(0.98077, 0, 0, 0, 0, 0.98077, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.98077, 0, 0, 0, 0, 0.98077, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  46.666667% { -webkit-transform: matrix3d(0.98828, 0, 0, 0, 0, 0.98828, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.98828, 0, 0, 0, 0, 0.98828, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  48.333333% { -webkit-transform: matrix3d(0.99472, 0, 0, 0, 0, 0.99472, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99472, 0, 0, 0, 0, 0.99472, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  50% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  51.666667% { -webkit-transform: matrix3d(1.0041, 0, 0, 0, 0, 1.0041, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.0041, 0, 0, 0, 0, 1.0041, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  53.333333% { -webkit-transform: matrix3d(1.00706, 0, 0, 0, 0, 1.00706, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00706, 0, 0, 0, 0, 1.00706, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  55% { -webkit-transform: matrix3d(1.00899, 0, 0, 0, 0, 1.00899, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00899, 0, 0, 0, 0, 1.00899, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  56.666667% { -webkit-transform: matrix3d(1.01002, 0, 0, 0, 0, 1.01002, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.01002, 0, 0, 0, 0, 1.01002, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  58.333333% { -webkit-transform: matrix3d(1.01028, 0, 0, 0, 0, 1.01028, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.01028, 0, 0, 0, 0, 1.01028, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  60% { -webkit-transform: matrix3d(1.00995, 0, 0, 0, 0, 1.00995, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00995, 0, 0, 0, 0, 1.00995, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  61.666667% { -webkit-transform: matrix3d(1.00917, 0, 0, 0, 0, 1.00917, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00917, 0, 0, 0, 0, 1.00917, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  63.333333% { -webkit-transform: matrix3d(1.00808, 0, 0, 0, 0, 1.00808, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00808, 0, 0, 0, 0, 1.00808, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  65% { -webkit-transform: matrix3d(1.0068, 0, 0, 0, 0, 1.0068, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.0068, 0, 0, 0, 0, 1.0068, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  66.666667% { -webkit-transform: matrix3d(1.00546, 0, 0, 0, 0, 1.00546, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00546, 0, 0, 0, 0, 1.00546, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  68.333333% { -webkit-transform: matrix3d(1.00413, 0, 0, 0, 0, 1.00413, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00413, 0, 0, 0, 0, 1.00413, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  70% { -webkit-transform: matrix3d(1.00288, 0, 0, 0, 0, 1.00288, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00288, 0, 0, 0, 0, 1.00288, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  71.666667% { -webkit-transform: matrix3d(1.00175, 0, 0, 0, 0, 1.00175, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00175, 0, 0, 0, 0, 1.00175, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  73.333333% { -webkit-transform: matrix3d(1.00079, 0, 0, 0, 0, 1.00079, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00079, 0, 0, 0, 0, 1.00079, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  75% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  76.666667% { -webkit-transform: matrix3d(0.99939, 0, 0, 0, 0, 0.99939, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99939, 0, 0, 0, 0, 0.99939, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  78.333333% { -webkit-transform: matrix3d(0.99894, 0, 0, 0, 0, 0.99894, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99894, 0, 0, 0, 0, 0.99894, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  80% { -webkit-transform: matrix3d(0.99866, 0, 0, 0, 0, 0.99866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99866, 0, 0, 0, 0, 0.99866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  81.666667% { -webkit-transform: matrix3d(0.9985, 0, 0, 0, 0, 0.9985, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.9985, 0, 0, 0, 0, 0.9985, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  83.333333% { -webkit-transform: matrix3d(0.99846, 0, 0, 0, 0, 0.99846, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99846, 0, 0, 0, 0, 0.99846, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  85% { -webkit-transform: matrix3d(0.99851, 0, 0, 0, 0, 0.99851, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99851, 0, 0, 0, 0, 0.99851, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  86.666667% { -webkit-transform: matrix3d(0.99863, 0, 0, 0, 0, 0.99863, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99863, 0, 0, 0, 0, 0.99863, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  88.333333% { -webkit-transform: matrix3d(0.99879, 0, 0, 0, 0, 0.99879, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99879, 0, 0, 0, 0, 0.99879, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  90% { -webkit-transform: matrix3d(0.99898, 0, 0, 0, 0, 0.99898, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99898, 0, 0, 0, 0, 0.99898, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  91.666667% { -webkit-transform: matrix3d(0.99918, 0, 0, 0, 0, 0.99918, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99918, 0, 0, 0, 0, 0.99918, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  93.333333% { -webkit-transform: matrix3d(0.99938, 0, 0, 0, 0, 0.99938, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99938, 0, 0, 0, 0, 0.99938, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  95% { -webkit-transform: matrix3d(0.99957, 0, 0, 0, 0, 0.99957, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99957, 0, 0, 0, 0, 0.99957, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  96.666667% { -webkit-transform: matrix3d(0.99974, 0, 0, 0, 0, 0.99974, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99974, 0, 0, 0, 0, 0.99974, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  98.333333% { -webkit-transform: matrix3d(0.99988, 0, 0, 0, 0, 0.99988, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99988, 0, 0, 0, 0, 0.99988, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 
}

</style>
    <div id="box" class="box">
     <div class="row">
       <div class="push"></div>
       <div class="push"></div>
       <div class="push"></div>
       <div class="push"></div>
     </div>
    </div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      "tags": ["music", "touch"],
      "thumbnail": "./thumbnail.png",
      "name": "Pad Grid",
      "description": "Alternates output between set broadcasts from a single input",
      "broadcasts": {
        "taplabel": {
          "label": "Tapped label",
          "description": "The label of the key tapped",
          "default": "green"
        },
        "tapnumber": {
          "label": "Tapped number",
          "description": "The number of the key tapped (starts at 1)",
          "default": "blue"
        },
        "tap1": {
          "label": "Button 1 tapped",
          "description": "The first button was tapped",
          "default": ""
        },
        "tap2": {
          "label": "Button 2 tapped",
          "description": "The first button was tapped",
          "default": ""
        },
        "tap3": {
          "label": "Button 3 tapped",
          "description": "The first button was tapped",
          "default": ""
        },
        "tap4": {
          "label": "Button 4 tapped",
          "description": "The first button was tapped",
          "default": ""
        },
        "tap5": {
          "label": "Button 5 tapped",
          "description": "The first button was tapped",
          "default": ""
        },
        "tap6": {
          "label": "Button 6 tapped",
          "description": "The first button was tapped",
          "default": ""
        },
        "tap7": {
          "label": "Button 7 tapped",
          "description": "The first button was tapped",
          "default": ""
        },
        "tap8": {
          "label": "Button 8 tapped",
          "description": "The first button was tapped",
          "default": ""
        },
        "tap9": {
          "label": "Button 9 tapped",
          "description": "The first button was tapped",
          "default": ""
        }
      },
      "listeners": {
      },
      "attributes": {
        "backgroundcolor": {
          "label": "Background Color",
          "editable": "color"
        },
        "textcolor": {
          "label": "Text Color",
          "editable": "color"
        },
        "labels": {
          "label": "Comma separated labels",
          "editable": "text"
        },
        "numcols": {
          "label": "Number of columns",
          "editable": "number"
        },
        "numrows": {
          "label": "Number of rows",
          "editable": "number"
        },
        "palettenumber": { 
          "label": "Which palette? 1-6",
          "editable": "number"
        }
      }
    }
  </ceci-definition>
  <script>
    Polymer('ceci-pad-grid', {
      nextBroadcast : "",
      ready: function() {
        this.super();
        this.colors = [
          ["#578A71",
"#CA53D5",
"#D7552D",
"#95DF44",
"#692A3F",
"#CFA83B",
"#CD98BF",
"#68DB90",
"#C69D85",
"#7C70D0",
"#5D9335",
"#C54692",
"#CE5062",
"#719CC2",
"#C7D383",
"#884928",
"#525926",
"#534273",
"#9BD8CE",
"#3D3D3C"] ,
          ["#89FB21",
"#CD94FD",
"#F4701F",
"#3FD5B7",
"#32170D",
"#196F17",
"#D32458",
"#E3B21E",
"#6B3887",
"#B9C2F2",
"#D7FE76",
"#E48475",
"#283A46",
"#4A7AC5",
"#F174A2",
"#65470F",
"#57C4DE",
"#32D089",
"#A4FEF9",
"#2D2706"],
          ["#FEEBB5",
"#E299BE",
"#8EBCC8",
"#EE9C74",
"#ADD171",
"#8AD4AA",
"#DECFF4",
"#FEFAF1",
"#D0A399",
"#E8C972",
"#FBFE88",
"#C7FCF2",
"#EDFDAA",
"#9CBA8B",
"#CEFED8",
"#BFDBF0",
"#89E3CD",
"#8FC1BA",
"#F7C479",
"#ACC674"],
          ["#C8C3B3",
"#1A1B13",
"#8A6B58",
"#E6DA9B",
"#6E8476",
"#DEF2F1",
"#E7B68C",
"#D1EABA",
"#A38E67",
"#9D9B9A",
"#393A31",
"#9FBFA9",
"#F6FDE4",
"#89906D",
"#F0F6CA",
"#A07763",
"#B7C1B7",
"#343432",
"#DCB586",
"#8E7055"],
          ["#AB41BC",
"#BAA5F1",
"#755288",
"#8F5CF1",
"#F998ED",
"#F258F4",
"#BD91FF",
"#9155AA",
"#BF80C1",
"#E780FF",
"#7752C8",
"#766AB8",
"#9D3896",
"#CF69FD",
"#9A4F95",
"#A994EF",
"#B16FA5",
"#8F36B6",
"#9054E0",
"#6A5DAB"],
          ["#FFFFFF"],
          ["#FF3333", "#FFFFFF"],
          ["#BC4212",
"#D3A18A",
"#FE266A",
"#9B4047",
"#F54F4F",
"#896759",
"#C18058",
"#D45162",
"#F16941",
"#F79D92",
"#AD4436",
"#915C3D",
"#F90D4E",
"#CE1B3A",
"#AC2D4D",
"#F76856",
"#E29A6F",
"#EB5461",
"#F26E32",
"#CE450C"]
        ];
        var self = this;
        this.labelsList = this.getAttribute("labels").split(',');
      },
      attached : function(){
        this.super();
        var that = this;
      },
      updateChannels: function(){
        var that = this;
        this.activebroadcasts = [];
        Array.prototype.forEach.call(this.querySelectorAll("ceci-broadcast"), function(broadcast) {
          var item = {};
          item.channelcolor = broadcast.getAttribute("on");
          item.channelname = broadcast.getAttribute("from");
          that.activebroadcasts.push(item);
        });
      },
      input: function(value) {
        this.currentBeat = this.currentBeat + 1;
        if(this.currentBeat > 3) {
          this.currentBeat = 0;
        }
        var playChannels = this.playbeats[parseInt(this.currentBeat)];
        for(var i = 0; i < playChannels.length; i++){
          this.broadcast(playChannels[i],"tick");
        }
      },
      generateCells: function() {
        this.$.box.innerHTML = '';
        var that = this;
        var row;
        var cell;
        var counter = 0;
        for (var i=0; i < this.numrows; i++) {
          row = document.createElement("div");
          row.setAttribute('class', 'row');
          for (var j=0; j < this.numcols; j++) {
            cell = document.createElement("div");
            cell.setAttribute('class', 'push');
            cell.style.width =((100.0-this.numcols*4)/this.numcols).toString() + "%";
            label = document.createElement('div');
            label.setAttribute('class', 'label');
            var labelText = this.labelsList[counter] || "";
            cell.setAttribute('number', counter+1);
            cell.setAttribute('label', labelText);
            label.textContent = labelText
            cell.appendChild(label);
            cell.addEventListener("click", function(e) {
              var square= e.currentTarget;
              var label = square.getAttribute('label');
              if (label) {
                that.broadcast("taplabel", label);
              }
              var tapnumber = square.getAttribute('number');
              that.broadcast("tapnumber", tapnumber);
              if (Number(tapnumber) < 10) {
                if (label == '') label = "tap"
                that.broadcast('tap' + tapnumber, label);
              }

              // next two lines are sadly needed: http://css-tricks.com/restart-css-animation/
              square.classList.remove("animation-target");
              square.offsetWidth = square.offsetWidth;
              square.classList.add("animation-target");
            });
            var palette = this.colors[(this.palettenumber-1) % this.colors.length];
            cell.style.backgroundColor = palette[counter % palette.length];
            row.appendChild(cell);
            counter ++;
          }
          this.$.box.appendChild(row);
        }
      },
      palettenumberChanged: function (oldValue, newValue) {
        this.palettenumber = Number(newValue);
        this.generateCells();
      },
      labelsChanged: function (oldValue, newValue) {
        this.labelsList = newValue.split(',');
        this.generateCells();
      },
      numcolsChanged: function (oldValue, newValue) {
        if (newValue < 1) {
          this.numcols = "1"; // XXX not sure how to force the settings pane to refuse a value.
          return;
        }
        this.generateCells();
      },
      numrowsChanged: function (oldValue, newValue) {
        if (newValue < 1) {
          this.numrows = "1"; // XXX not sure how to force the settings pane to refuse a value.
          return;
        }
        this.generateCells();
      },
      backgroundcolorChanged: function (oldValue, newValue) {
        this.style.backgroundColor = newValue;
      },
      textcolorChanged: function (oldValue, newValue) {
        this.style.color = newValue;
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-paypal" attributes="amount account currency" extends="ceci-element" currency="BRL" amount="5" account="donate@mozilla.org" button="false" assetpath="component-paypal/">
  <ceci-definition>
    {
      "name": "PayPal",
      "description": "Add your own PayPal donation buttons, and start raising funds.",
      "tags": ["paypal", "donate"],
      "thumbnail": "./thumbnail.png",
      "broadcasts": {
        "donate": {
          "label": "Donate",
          "description": "Occurs when donation process begins."
        }
      },
      "listeners": {
        "submit": {
          "description": "Submits a donation once settings have been chosen.",
          "label": "Submit",
          "default": "orange"
        }
      },
      "attributes": {
        "amount": {
          "label": "Amount",
          "description": "Amount of money to donate.",
          "editable": "number",
          "listener": true,
          "max": 3,
          "min": 50
        },
        "account": {
          "label": "Account",
          "description": "PayPal account which will receive payment.",
          "editable": "text"
        },
        "currency": {
          "label": "Currency",
          "description": "Currency code for donation amount.",
          "editable": "text"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host img {
  width: 100%;
}

:host h3 {
  text-align: center;
}

:host #account {
  text-align: center;
}</style>
    <h3><span id="donationAmount">Donation Amount:</span> <span>{{amount}}</span> <span>{{currency}}</span></h3>
    <p id="account">{{account}}</p>
    <form id="form" method="post" action="https://www.paypal.com/cgi-bin/webscr">
      <input type="hidden" name="amount" id="pp_amount" value="{{amount}}">
      <input type="hidden" name="business" id="pp_business" value="{{account}}">
      <input type="hidden" name="currency_code" id="pp_currency_code" value="{{currency}}">
      <input type="hidden" name="item_name" id="fundrasingCampaignName" value="Donation from AppMaker App">
      <input type="hidden" name="no_shipping" value="1">
      <input type="hidden" name="rm" value="1">
      <input type="hidden" name="cmd" value="_donations"> <!-- TODO - could switch between donation and payments -->
      <input type="hidden" name="return" value=""> <!-- Return url is the current app url with query param to tell success -->
    </form>
    <img src="component-paypal/thumbnail.png">
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-paypal', {
      ready: function () {
        this.super();
        this.$.donationAmount.innerHTML = this.gettext(this.localName + "/donationAmount") || this.$.donationAmount.innerHTML;
      },
      submit: function (value) {
        this.$.form.submit();
        this.broadcast('donate');
      }
    });
  </script>
</polymer-element>


<polymer-element name="ceci-random" extends="ceci-element" attributes="allowsame min max value" min="0" max="9" allowsame="false" assetpath="component-random-number/">
  <ceci-definition>
    {
      "name": "Random",
      "thumbnail": "./thumbnail.png",
      "description": "Generates a random number",
      "broadcasts": {
        "send": {
          "label": "Send random number",
          "description": "Sends the random number if explicitly asked to."
        },
        "changed": {
          "label": "Random number changed",
          "description": "Sends the newly generated number."
        }
      },
      "listeners": {
        "generate": {
          "description": "Generate a random number between min and max",
          "label": "Generates a random number"
        },
        "send": {
          "description": "Send the random number out",
          "label": "Send random number"
        }
      },
      "attributes": {
        "min": {
          "description": "",
          "label": "Min",
          "editable": "number"
        },

        "max": {
          "description": "",
          "label": "Max",
          "editable": "number"
        },
        "allowsame": {
          "description": "Allow same number twice",
          "label": "Allow same number twice",
          "editable": "boolean"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host .counter {
  text-align: center;
  font-size: 14px;
  padding: 8px 0px;
  background: #DDD;
  color: #666;
}

:host .counter .count-wrapper {
  display: inline-block;
  background: white;
  padding: 5px 12px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
  border: solid 1px #CCC;
  border-width: 1px 1px 2px 1px;
}
</style>
    <div class="counter">
        Random between {{min}} and {{max}} &rarr;
      <div class="count-wrapper">
 {{value}}
      </div>
    </div>
    <shadow></shadow>
  </template>
  <tags>starter,math</tags>
    <script>
      Polymer("ceci-random", {
        ready: function() {
          this.value = Number(this.value) || 0;
          this.super();
        },
        value: 0,
        valueChanged: function() {
          this.broadcast("changed", this.value);
        },
        generate: function() {
          var max = Number(this.max);
          var min = Number(this.min);
          var random = Math.floor(Math.random() * (max - min + 1)) + min;

          if(this.allowsame == "false") {
            while(this.value == random){
              random = Math.floor(Math.random() * (max - min + 1)) + min;
            }
          }
          this.value = random;
        },
        send: function() {
          this.broadcast("send", this.value);
        }
      });
    </script>
</polymer-element>

<polymer-element name="ceci-sequencer" attributes="playbeats" extends="ceci-element" assetpath="component-sequencer/">
  <template>
    <style>:host {
  display: block;
  width: 100%;
  padding: 20px 10px 16px 10px;
  background: #555;
  text-align: center;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

:host .output-channel {
  padding: 5px 10px;
  background: #999;
  margin: 0 3px;
  display: block;
  border: solid 2px #555;
}

:host .beats {
  display: inline-block;
}

:host .next-up {
  background: white;
  border: solid 2px white;
  font-weight: bold;
}

:host #channels {
  display: inline-block;
  position: relative;
}



:host .channelrow {
  overflow: auto;
  margin-bottom: 4px;
}

:host .channelrow:last-child {
  margin-bottom: 0;
}

:host .channelrow .beat,
:host .channelrow .label
{
  display:block;
  float: left;
}

:host .channelrow .label:after {
  content: "1";
}

:host .channelrow .beat {
  background: #DDD;
  margin: 0;
  height: 40px;
  width: 68px;
  opacity: .2;
  margin: 0 4px 0px 0;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  position: relative;
}

:host .overlay {
  position: absolute;
  width: 100%;
  height: 100%;
  background: white;
  opacity: 0;
}

:host .channelrow .beat:last-child {
  margin-right: 0px;
}

:host .channelrow .beat:hover {
  opacity: .8;
}

:host [data-beat="0"] .beat:first-child,
:host [data-beat="1"] .beat:nth-child(2),
:host [data-beat="2"] .beat:nth-child(3),
:host [data-beat="3"] .beat:nth-child(4)
{
  opacity: .25;
}

:host [data-beat="0"] .beat.on:first-child,
:host [data-beat="1"] .beat.on:nth-child(2),
:host [data-beat="2"] .beat.on:nth-child(3),
:host [data-beat="3"] .beat.on:nth-child(4)
{
  opacity: 1;
}


:host .indicator.top {
  top: -8px;
}

:host .indicator {
  position: absolute;
  width: 68px;
  height: 5px;
  background: white;
  opacity: .4;
  -webkit-transform: scaleX(.2);
  -webkit-transform-origin: center;
  -moz-transform: scaleX(.2);
  -moz-transform-origin: center;
}

:host .indicator.bottom {
  bottom: -8px;
}

:host [data-beat="0"] .indicator { left: 0px; }
:host [data-beat="1"] .indicator { left: 72px; }
:host [data-beat="2"] .indicator { left: 144px; }
:host [data-beat="3"] .indicator { left: 216px; }

:host .channelrow .beat.on {
  opacity: 1;
}

[data-color*="yellow"] .beat {
  background: rgba(229,210,0,1);
}

[data-color*="blue"] .beat {
  background: rgba(53,140,206,1);
}

[data-color*="red"] .beat {
  background: rgba(232,30,20,1);
}

[data-color*="pink"] .beat {
  background: rgba(255,84,167,1);
}

[data-color*="purple"] .beat {
  background: rgba(159,39,207,1);
}

[data-color*="green"] .beat {
  background: rgba(113,184,6,1);
}

[data-color*="orange"] .beat {
  background: rgba(255,123,0,1);
}</style>
    <div id="channels" data-beat="{{currentBeat}}">
      <div class="indicator top"></div>
      <div class="indicator bottom"></div>
      <template repeat="{{item, i in activebroadcasts}}">
        <div data-color="{{item.channelcolor}}" data-channel="{{item.channelname}}" class="channelrow">
            <div on-click="{{beattap}}" data-beat="1" class="beat"></div>
            <div on-click="{{beattap}}" data-beat="2" class="beat"></div>
            <div on-click="{{beattap}}" data-beat="3" class="beat"></div>
            <div on-click="{{beattap}}" data-beat="4" class="beat"></div>
        </div>
      </template>
    </div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      "tags": [""],
      "thumbnail": "./thumbnail.png",
      "name": "Sequencer",
      "description": "Alternates output between set broadcasts from a single input",
      "broadcasts": {
        "A": {
          "label": "Beat A",
          "description": "The first broadcast in the rotation.",
          "default": "green"
        },
        "B": {
          "label": "Beat B",
          "description": "The second broadcast in the rotation.",
          "default": "yellow"
        },
        "C": {
          "label": "Beat C",
          "description": "The third broadcast in the rotation."
        },
        "D": {
          "label": "Beat D",
          "description": "The fourth broadcast in the rotation."
        },
        "E": {
          "label": "Beat E",
          "description": "The fifth broadcast in the rotation."
        }
      },
      "listeners": {
        "input": {
          "description": "Plays the next beat in the sequence.",
          "label": "Play Beat",
          "default": true
        }
      },
      "attributes": {}
    }
  </ceci-definition>
  <script>
    Polymer('ceci-sequencer', {
      beattap: function(e){
        var that = this;
        var beatEl = e.target;

        if (beatEl.classList.contains("on")){
          beatEl.classList.remove("on");
        }
        else{
          beatEl.classList.add("on");
        }

        that.playbeats = [[],[],[],[]];

        Array.prototype.forEach.call(this.shadowRoot.querySelectorAll(".channelrow"), function(chan) {
          var channel = chan.getAttribute("data-channel");
          var beat = 0;
          Array.prototype.forEach.call(chan.querySelectorAll(".beat"), function(beatEl) {
            if(beatEl.classList.contains("on")) {
              that.playbeats[beat].push(channel);
            }
              beat++;
          });
        });
        this.setAttribute("playbeats",JSON.stringify(this.playbeats));
      },
      currentBeat: 0,
      ready: function() {
        this.super();
        this.lastBroadcast = null;
        var self = this;
        this.playbeats = JSON.parse(this.getAttribute("playbeats")) || [["A"],["B"],["A"],["B"]];
      },
      colorSquares : function(){
        var that = this;
        for(var i = 0; i < this.playbeats.length; i++){
          var beatCount = i + 1;
          var beats = this.playbeats[i];
          for(var j = 0; j < beats.length; j++) {
            var channel = beats[j];
            this.shadowRoot.querySelector(".channelrow[data-channel="+channel+"] .beat:nth-child("+beatCount+")").classList.add("on");
          }
        }
      },
      attached : function(){
        this.super();
        var that = this;
        this.addEventListener("channelUpdated",function(){
          this.updateChannels();
        });
        this.updateChannels();
        this.async(function(){
          this.colorSquares()
        });
      },
      updateChannels: function(){
        var that = this;
        this.activebroadcasts = [];
        Array.prototype.forEach.call(this.querySelectorAll("ceci-broadcast"), function(broadcast) {
          var item = {};
          item.channelcolor = broadcast.getAttribute("on");
          item.channelname = broadcast.getAttribute("from");
          that.activebroadcasts.push(item);
        });
        this.async(function(){
          this.colorSquares()
        });

      },
      input: function(value) {
        if(this.currentBeat > 3) {
          this.currentBeat = 0;
        }
        var playChannels = this.playbeats[this.currentBeat];
        for(var i = 0; i < playChannels.length; i++){
          this.broadcast(playChannels[i], "tick");
        }
        this.currentBeat += 1;
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-snaredrum" attributes="drumcolor backgroundcolor stickcolor" drumcolor="#FFFFFF" stickcolor="#000000" backgroundcolor="#ff9900" extends="ceci-element" speed="1.0" assetpath="component-snaredrum/">
  <ceci-definition>
    {
      "tags": ["music", "instrument", "tap"],
      "thumbnail": "./thumbnail.png",
      "description": "Broadcasts a \"click\" when clicked.",
      "name": "Snare Drum",
      "broadcasts": {},
      "listeners": {
        "kick": {
          "description": "Causes a fake click event to occur.",
          "label": "Hit",
          "default": true
        }
      },
      "attributes": {
        "stickcolor": {
          "label": "Stick Color",
          "editable": "color"
        },
        "backgroundcolor": {
          "label": "Background Color",
          "editable": "color"
        },
        "drumcolor": {
          "label": "Drum Color",
          "description": "Color of the drum.",
          "editable": "color"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  background: orange;
}

:host #kick {
  height: 75px;
  display: block;
  cursor: pointer;
  overflow: hidden;
  width: 100%;
  position: relative;
}

:host #kick, :host #kick * {

}

:host #drum {
  height: 200px;
  width: 200px;
  background: white;
  position: absolute;
  left: calc(50% - 100px);
  border-radius: 150px;
  top: -20px;
  -webkit-transform: scaleY(.4);
  -moz-transform: scaleY(.4);
  transform: scaleY(.4);
}

:host #stick {
  height: 8px;
  width: 120px;
  background: black;
  position: absolute;
  left: 40px;
  top: 20px;
  border-radius: 100px;
  -webkit-transform-origin: left;
  -moz-transform-origin: left;
  transform-origin: left;
}

:host .hit #stick {
  top: 25px;
  -webkit-transform: rotate(15deg);
  -moz-transform: rotate(15deg);
  transform: rotate(15deg);
}

:host .hit #drum {
  top: -15px;
}

:host audio {
  display: none;
}
</style>
    <div id="kick" class="off" on-mousedown="{{kickon}}" on-mouseup="{{kickoff}}">
      <div id="drum"></div>
      <div id="stick"></div>
    </div>
    <audio id="kicksound" src="component-snaredrum/sounds/snare.mp3" preload="preload"></audio>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-snaredrum', {
      ready: function () {
        this.super();
        var that = this;
      },
      kickon: function () {
        this.$.kicksound.pause();
        this.$.kicksound.currentTime = 0;
        this.$.kicksound.play();
        this.$.kick.classList.add("hit");
      },
      kick : function(){
        this.kickon();
        var that = this;
        window.setTimeout(function(){
          that.kickoff();
        },100)
      },
      kickoff : function(){
        this.$.kick.classList.remove("hit");
      },
      snare: function () {
        this.$.snare.pause();
        this.$.snare.currentTime = 0;
        this.$.snare.play();
      },
      sourceChanged: function(oldValue, newValue) {
        this.$.clip.src = newValue;
      },
      setSpeed: function(channel, value) {
        this.speedChanged(this.$.snare.playbackRate || 1, value);
        this.speedChanged(this.$.kick.playbackRate || 1, value);
      },
      speedChanged: function(oldValue, newValue) {
        try  {
          var f = parseFloat(newValue);
          if (f) {
            this.$.kick.playbackRate = parseFloat(newValue);
            this.$.snare.playbackRate = parseFloat(newValue);
          }
        } catch (e) {}
      },
      stickcolorChanged: function (oldValue, newValue) {
        this.$.stick.style.background = newValue;
      },
      drumcolorChanged: function (oldValue, newValue) {
        this.$.drum.style.background = newValue;
      },
      backgroundcolorChanged: function (oldValue, newValue) {
        this.$.kick.style.background = newValue;
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-spacer" attributes="height" height="30" extends="ceci-element" assetpath="component-spacer/">
  <template>
    <style>:host {
  display: block;
  width: 100%;
}
</style>
    <div id="spacer"></div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      "tags": ["starter", "layout", "navigation"],
      "thumbnail": "./thumbnail.png",
      "name": "Spacer",
      "description": "A spacer to put between components.",
      "broadcasts": {},
      "listeners": {},
      "attributes": {
        "height": {
          "label": "Height",
          "description": "The height of the spacer.",
          "editable": "number",
          "min" : 5
        }
      }
    }
  </ceci-definition>
  <script>
    Polymer('ceci-spacer', {
      ready: function () {
        this.super();
      },
      heightChanged: function (oldValue, newValue) {
        this.$.spacer.style.height = newValue + "px";
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-splitter" extends="ceci-element" assetpath="component-splitter/">
  <template>
    <style>:host, :host .splitter {
  display: block;
  width: 100%;
  height: 50px;
}

:host .splitter {
  background-color: black;
}
</style>
    <div class="splitter">
    </div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      "tags": ["component-splitter", "splitter"],
      "thumbnail": "./thumbnail.png",
      "description": "When a message passes through this component, it can send the message to multiple broadcasts.",
      "name": "Splitter",
      "broadcasts": {
        "splitter1": {
          "label": "splitter1",
          "description": "repeats input",
          "default": true
        },
        "splitter2": {
          "label": "splitter2",
          "description": "repeats input"
        },
        "splitter3": {
          "label": "splitter3",
          "description": "repeats input"
        },
        "splitter4": {
          "label": "splitter4",
          "description": "repeats input"
        },
        "splitter5": {
          "label": "splitter5",
          "description": "repeats input"
        },
        "splitter6": {
          "label": "splitter6",
          "description": "repeats input"
        }
      },
      "listeners": {
        "input": {
          "description": "input 1",
          "label": "Input",
          "default": true
        }
      },
      "attributes": {}
    }
  </ceci-definition>
  <script>
    Polymer('ceci-splitter', {
      ready: function () {
        this.super();
      },
      input: function(val) {
        this.broadcast("splitter1", val );
        this.broadcast("splitter2", val );
        this.broadcast("splitter3", val );
        this.broadcast("splitter4", val );
        this.broadcast("splitter5", val );
        this.broadcast("splitter6", val );
      }
    });
  </script>
</polymer-element>


<polymer-element name="ceci-text-input" attributes="buttonlabel inputname placeholdertext emitonchange label" extends="ceci-element" placeholdertext="Placeholder" buttonlabel="Submit" inputname="Text Input" assetpath="component-text-input/">
  <ceci-definition>
    {
      "tags": ["input", "form", "button"],
      "thumbnail": "./thumbnail.png",
      "name": "Text Input",
      "description": "A text input that broadcasts whatever a user types.",
      "broadcasts": {
        "sendData": {
          "label": "Send Data",
          "description": "Sends the current value of the input field.",
          "default": true
        }
      },
      "listeners": {
        "click": {
          "description": "Causes a fake click event to occur.",
          "label": "Send Data"
        },
        "setvalue": {
          "description": "Set the value of the field.",
          "label": "Set Value"
        }
      },
      "attributes": {
        "inputname": {
          "label": "Input Name",
          "description": "The name of this field, helpful when saving data.",
          "editable": "text"
        },
        "buttonlabel": {
          "label": "Button Label",
          "description": "The label on the button.",
          "editable": "text"
        },
        "placeholdertext": {
          "label": "Placeholder Text",
          "description": "The text you want your input field to show by default.",
          "editable": "text"
        },
        "emitonchange": {
          "label": "Emit on change",
          "description": "Background color of the button while it is being clicked or tapped.",
          "editable": "boolean"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host input[type=text]{
  padding: 10px 5px;
  height: 100%;
  border: none;
  color: #000;
  font-weight: 500;
  font-size: 1.6rem;
  background-color: #FFF;
  background-size: auto 100%;
  width: 70%;
  border-radius: 0;
  margin: 0;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  border: 0.1rem solid rgb(204, 204, 204);
  border-right: none;
  text-indent: 0.6rem;
  outline: none;
  font-weight: 400;
  font-size: 1.6rem;
  font-family: "FiraSans", sans-serif;
}

:host .onchange input[type=text]{
  width: 100%;
}

:host .onchange button {
  display: none;
}

:host #wrapper {
  position: relative;
}

:host button {
  background: linear-gradient(to top, #f8f8f8, #ddd);
  background: -webkit-linear-gradient(top, #f8f8f8, #ddd);
  border: 0.1rem solid #a6a6a6;
  border-radius: 0 0.2rem 0.2rem 0;
  right: 0px;

  width: 30%;
  padding: 0;
  height: 100%;
  font-weight: 500;
  font-size: 1.6rem;
  font-family: "FiraSans", sans-serif;
  position: absolute;
}

:host button:active {
  background: linear-gradient(to top, #ddd, #ddd);
  background: -webkit-linear-gradient(top, #ddd, #ddd);
}</style>
    <div id="wrapper">
      <input id="inputText" type="text" on-input="{{input}}" on-keypress="{{keypress}}">
      <button id="button" on-click="{{submit}}">{{buttonlabel}}</button>
    </div>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-text-input', {
      emitonchange:false,
      ready: function () {
        this.super();
        var that = this;
        this.$.button.innerHTML = this.gettext("ceci-text-input/button") || this.$.button.innerHTML;
      },
      submit: function () {
        this.broadcast('sendData', this.$.inputText.value);
        this.$.inputText.value = "";
      },
      click : function(){
        this.submit();
      },
      input: function (e) {
        if (!this.emitonchange) {
          return;
        }
        this.broadcast('sendData', this.$.inputText.value);
      },
      keypress: function (e) {
        if (!this.emitonchange) {
          if (e.keyCode == 13) {
            this.broadcast('sendData', this.$.inputText.value);
            this.$.inputText.value = '';
          }
        }
      },
      setvalue: function(v) {
        this.$.inputText.value = v;
      },
      emitonchangeChanged: function(oldValue, newValue) {
        this.$.wrapper.classList.toggle('onchange');
      },
      placeholdertextChanged: function(oldValue, newValue) {
        if (this.$.inputText.hasAttribute('placeholder')) {
          this.$.inputText.setAttribute("placeholder", newValue);
        }
        else {
          this.$.inputText.setAttribute("placeholder", newValue);
        }
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-textbox" attributes="text" extends="ceci-element" text="I&apos;m a textbox!" assetpath="component-textbox/">
  <ceci-definition>
    {
      "tags": ["form", "input", "text"],
      "thumbnail": "./thumbnail.png",
      "description": "Listen for a message and updates text",
      "name": "Text",
      "broadcasts": {},
      "listeners": {
        "setValue": {
          "description": "Set value text box",
          "label": "Set Value"
        }
      },
      "attributes": {
        "text": {
          "label": "Text",
          "description": "A text for your label to show up in your app.",
          "editable": "text",
          "listener": true
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  padding: 10px;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}

:host p {
  word-wrap: break-word;
  overflow: hidden;
  padding: 0;
  margin: 0;
  font-size: 15px;
  font-family: "FiraSans", sans-serif;
  font-weight: 500;
  line-height: auto;
}
</style>
    <p id="textBox"></p>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-textbox', {
      ready: function () {
        this.super();
      },
      setValue: function(e) {
        this.text = e;
      },
      textChanged: function (oldValue, newValue) {
        this.$.textBox.innerHTML = newValue;
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-todo-list" extends="ceci-element" attributes="collection" collection="" assetpath="component-todo/">
  <ceci-definition>
    {
      "name": "To-Do List",
      "thumbnail": "./thumbnail.png",
      "description": "A list of things to do",
      "broadcasts": {
        "itemcompleted": {
          "label": "Item done",
          "description": "Sends a message that an item in the list was completed."
        },
        "allitemscompleted": {
          "label": "All items done",
          "description": "Sends a message that the todo list was completed."
        }
      },
      "listeners": {
        "additem": {
          "description": "Adds a todo list item.",
          "label": "Add Item",
          "default" : true
        }
      },
      "attributes": {
        "collection": {
          "description": "",
          "label": "Collection",
          "editable": "text"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  background: white;
}

:host .hidden {
  display: none;
}

:host .list-container {
  padding: 10px;
}

:host .item {
  font-size: 16px;
  border-bottom: solid 1px #DDD;
}

:host .item:last-child {
  border: none;
}

:host .remove-column {
  text-align: center;
  cursor: pointer;
}

:host .remove-column:hover {
  color: #212429;
  background: #fff;
}

:host .remove-item {
  display: none;
  float: right;
  color: #639ccd;
}

:host .first-run-container {
  padding: 10px;
}

:host .first-run-container p {
  margin: 0;
  padding: 0;
  font-size: 16px;
  margin-bottom: 8px;
  color: #999;
}

:host .first-run-container h3 {
  margin: 0;
  padding: 0;
  font-size: 16px;
  font-weight: bold;
}

:host .first-run-container input {
  font-size: 16px;
  padding: 6px 3px;
}

:host .completed .remove-item {
  display: inline-block;
  float: right;
  color: #639ccd;
  cursor: pointer;
  padding: 10px 0;
}

:host label {
  display: block;
  padding: 10px 0;
  width: 240px;
}

:host .completed .remove-item:hover {
  text-decoration: underline;
}

:host .completed label {
  text-decoration: line-through;

  color: #999;
}

:host .no-items {
  font-size: 16px;
  margin: 0;
}

:host button {
  background: #6eba1d;
  border: none;
  font-size: 16px;
  color: white;
  padding: 8px 8px;
  cursor: pointer;

}
</style>
    <div class="first-run-container">
      <h3>Choose or Create a Collection</h3>
      <p>This Brick will store your items in a Collection with this name.</p>
      <input placeholder="Ex. &apos;todos&apos;" value="todos" type="text">
      <button on-click="{{addNewCollection}}">Done</button>
    </div>
    <div class="list-container hidden">
      <template if="{{ items.length == 0 }}">
      <p class="no-items">0 To-do Items</p>
      </template>
      <template repeat="{{item, itemindex in items}}">
        <div class="item {{item.completed | applyClassName}}">
          <a on-click="{{removeItem}}" data-item-index="{{itemindex}}" class="remove-item">Clear</a>
          <label>
            <input data-item-index="{{itemindex}}" on-change="{{onCheckboxChange}}" type="checkbox" checked="{{item.completed}}">
            {{item.description}}
          </label>
        </div>
      </template>
    </div>
    <shadow></shadow>
  </template>
    <script>
      Polymer("ceci-todo-list", {
        ready: function() {
          this.super();
          this.collections = document.querySelector("ceci-collections");
          this.items = [];
          this.onItemChange = null;
          this.completed = 0;
        },
        collectionReady: function() {
          var self = this;
          var collection = this.collections.getCollection(this.collection);
          var completedField = collection.getField("completed");
          var descriptionField = collection.getField("description");
          if (!completedField) {
            collection.addField("completed", "checkbox");
          }
          if (!descriptionField) {
            collection.addField("description", "text");
          }
          this.shadowRoot.querySelector(".list-container").classList.remove("hidden");
          this.shadowRoot.querySelector(".first-run-container").classList.add("hidden");
          this.items = [];
          this.completed = 0;
          for (var i = 0; i < collection.data.length; i++) {
            this.items.push(collection.data[i]);
            if (collection.data[i].completed) {
              this.completed++;
            }
          }
          this.onItemChange = function(e) {
            var detail = e.detail;
            if (detail.removed) {
              self.items.splice(detail.index, 1);
            }
            if (detail.added) {
              self.items.splice(detail.index, 0, detail.added);
            }
          };
          collection.addEventListener("itemchange", this.onItemChange);
          this.lastCollection = this.collection;
        },
        addNewCollection: function() {
          this.collection = this.shadowRoot.querySelector(".first-run-container input").value;
        },
        additem: function(item) {
          if(item){
            var collection = this.collections.getCollection(this.collection);
            collection.addItem({
              description: item
            });
          }
        },
        collectionChanged: function() {
          // Clean up any events on the old collection if we change collections.
          if (this.lastCollection && this.onItemChange) {
            var lastCollection = this.collections.getCollection(this.lastCollection);
            lastCollection.removeEventListener("itemchange", this.onItemChange);
            this.onItemChange = null;
          }
          this.shadowRoot.querySelector(".first-run-container input").value = this.collection;
          if (this.collection === "") {
            return;
          }
          var collection = this.collections.getCollection(this.collection);
          if (!collection) {
            this.collections.addCollection(this.collection);
          }
          this.async(this.collectionReady);
        },
        onCheckboxChange: function(event, detail, sender) {
          var collection = this.collections.getCollection(this.collection);
          var index = parseInt(sender.getAttribute('data-item-index'));
          var dataItem = collection.data[index];
          dataItem.completed = sender.checked;
          collection.updateItem(index, dataItem);
          if (sender.checked) {
            this.completed++;
            this.broadcast("itemcompleted", dataItem.description);
            if (this.completed >= this.items.length) {
              this.broadcast("allitemscompleted", this.completed);
            }
          } else {
            this.completed--;
          }
        },
        removeItem: function(event, detail, sender) {
          var collection = this.collections.getCollection(this.collection);
          var index = parseInt(sender.getAttribute('data-item-index'));
          var dataItem = collection.data[index];
          collection.removeItem(index);
          this.completed--;
        },
        applyClassName: function(value) {
          if (value) {
            return "completed";
          }
          return;
        }
      });
    </script>
</polymer-element>

<polymer-element name="ceci-transformer" extends="ceci-element" attributes="message" assetpath="component-transformer/">
  <ceci-definition>
    {
      "name": "Transformer",
      "thumbnail": "./thumbnail.png",
      "description": "Listens for a message and sends out what the user specifies.",
      "broadcasts": {
        "transformedMessage": {
          "label": "Transformed Message",
          "description": "Broadcasts the current count."
        }
      },
      "listeners": {
        "incomingMessage": {
          "description": "Increment the total by the increment value",
          "label": "Incoming Message",
          "default" : true
        }
      },
      "attributes": {
        "message": {
          "description": "Transform received messaeg to this.",
          "label": "Message",
          "editable": "Text",
          "default" : true
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host .counter {
  text-align: center;
  font-size: 16px;
  padding: 8px 0px;
  background: #DDD;
  color: #666;
}

:host .counter .count-wrapper {
  display: inline-block;
  background: white;
  padding: 5px 12px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
  border: solid 1px #CCC;
  border-width: 1px 1px 2px 1px;
}
</style>
    <div class="counter">
      <div class="count-wrapper">
        Transform to "<span class="count">{{message}}</span>"
      </div>
    </div>
    <shadow></shadow>
  </template>
  <tags>starter,math</tags>
    <script>
      Polymer("ceci-transformer", {
        ready: function() {
          this.super();
        },
        incomingMessage : function(){
          this.broadcast("transformedMessage", this.message);
        },
        message: 'Sprocket',
        unitChanged: function() {
          this.updateUnit();
        },
        resetCount: function() {
          this.value = 0;
        }
      });
    </script>
</polymer-element>


</body>
</html>
